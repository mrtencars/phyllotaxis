(function(){
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},c=Object.create(new $jscomp.global.Proxy(a,{get:function(m,l,e){return m==a&&"q"==l&&e==c}}));return!0===c.q}catch(m){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;
$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,m){a!=Array.prototype&&a!=Object.prototype&&(a[c]=m.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var c=a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};
$jscomp.polyfill=function(a,c,m,l){if(c){m=$jscomp.global;a=a.split(".");for(l=0;l<a.length-1;l++){var e=a[l];e in m||(m[e]={});m=m[e]}a=a[a.length-1];l=m[a];c=c(l);c!=l&&null!=c&&$jscomp.defineProperty(m,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("WeakMap",function(a){function c(){if(!a||!Object.seal)return!1;try{var c=Object.seal({}),e=Object.seal({}),h=new a([[c,2],[e,3]]);if(2!=h.get(c)||3!=h.get(e))return!1;h.delete(c);h.set(e,4);return!h.has(c)&&4==h.get(e)}catch(A){return!1}}function m(a){$jscomp.owns(a,e)||$jscomp.defineProperty(a,e,{value:{}})}function l(a){var c=Object[a];c&&(Object[a]=function(a){m(a);return c(a)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;
var e="$jscomp_hidden_"+Math.random();l("freeze");l("preventExtensions");l("seal");var h=0,n=function(a){this.id_=(h+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};n.prototype.set=function(a,c){m(a);if(!$jscomp.owns(a,e))throw Error("WeakMap key fail: "+a);a[e][this.id_]=c;return this};n.prototype.get=function(a){return $jscomp.owns(a,e)?a[e][this.id_]:void 0};n.prototype.has=
function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)};n.prototype.delete=function(a){return $jscomp.owns(a,e)&&$jscomp.owns(a[e],this.id_)?delete a[e][this.id_]:!1};return n},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new a($jscomp.makeIterator([[c,"s"]]));if("s"!=e.get(c)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var h=e.entries(),n=h.next();if(n.done||n.value[0]!=c||"s"!=n.value[1])return!1;n=h.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!h.next().done?!1:!0}catch(q){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m=new WeakMap,l=function(a){this.data_={};this.head_=n();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};l.prototype.set=function(a,c){a=0===a?0:a;var h=e(this,a);h.list||(h.list=this.data_[h.id]=[]);h.entry?h.entry.value=c:(h.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:a,value:c},h.list.push(h.entry),this.head_.previous.next=h.entry,this.head_.previous=h.entry,this.size++);return this};l.prototype.delete=function(a){a=e(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};l.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};l.prototype.has=function(a){return!!e(this,a).entry};
l.prototype.get=function(a){return(a=e(this,a).entry)&&a.value};l.prototype.entries=function(){return h(this,function(a){return[a.key,a.value]})};l.prototype.keys=function(){return h(this,function(a){return a.key})};l.prototype.values=function(){return h(this,function(a){return a.value})};l.prototype.forEach=function(a,c){for(var e=this.entries(),h;!(h=e.next()).done;)h=h.value,a.call(c,h[1],h[0],this)};l.prototype[Symbol.iterator]=l.prototype.entries;var e=function(a,c){var e=c&&typeof c;"object"==
e||"function"==e?m.has(c)?e=m.get(c):(e=""+ ++u,m.set(c,e)):e="p_"+c;var h=a.data_[e];if(h&&$jscomp.owns(a.data_,e))for(a=0;a<h.length;a++){var n=h[a];if(c!==c&&n.key!==n.key||c===n.key)return{id:e,list:h,index:a,entry:n}}return{id:e,list:h,index:-1,entry:void 0}},h=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},n=function(){var a={};return a.previous=
a.next=a.head=a},u=0;return l},"es6","es3");$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var m=0,l={next:function(){if(m<a.length){var e=m++;return{value:c(e,a[e]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Object.getOwnPropertySymbols",function(a){return a?a:function(){return[]}},"es6","es5");$jscomp.polyfill("Reflect.ownKeys",function(a){return a?a:function(a){var c=[],l=Object.getOwnPropertyNames(a);a=Object.getOwnPropertySymbols(a);for(var e=0;e<l.length;e++)("jscomp_symbol_"==l[e].substring(0,14)?a:c).push(l[e]);return c.concat(a)}},"es6","es5");
$jscomp.polyfill("Set",function(a){function c(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new a($jscomp.makeIterator([c]));if(!e.has(c)||1!=e.size||e.add(c)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var h=e.entries(),n=h.next();if(n.done||n.value[0]!=c||n.value[1]!=c)return!1;n=h.next();return n.done||n.value[0]==c||4!=n.value[0].x||n.value[1]!=n.value[0]?!1:h.next().done}catch(u){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(c())return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};m.prototype.add=function(a){a=0===a?0:a;this.map_.set(a,a);this.size=this.map_.size;return this};m.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};m.prototype.clear=
function(){this.map_.clear();this.size=0};m.prototype.has=function(a){return this.map_.has(a)};m.prototype.entries=function(){return this.map_.entries()};m.prototype.values=function(){return this.map_.values()};m.prototype.keys=m.prototype.values;m.prototype[Symbol.iterator]=m.prototype.values;m.prototype.forEach=function(a,c){var e=this;this.map_.forEach(function(h){return a.call(c,h,h,e)})};return m},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,m){return m})}},"es8","es3");
var coerce={toList:function(a,c){c=void 0===c?null:c;return"list"!==a.ctype?(console.log("argument is not a list"),c):a.value},toHomog:function(a,c,m){c=void 0===c?[0,0,0,0]:c;m=void 0===m?3:m;a=coerce.toList(a);if(null===a)return c;c=a.map(coerce.toReal);c.length>m+1&&(console.log("Coordinate vector too long."),c=c.slice(0,m+1));for(;c.length<m;)c.push(0);c.length===m&&c.push(1);return c},toDirection:function(a,c){c=void 0===c?[0,0,0]:c;a=coerce.toList(a);if(null===a)return c;c=a.map(coerce.toReal);
3<c.length&&(console.log("Coordinate vector too long."),c=c.slice(0,3));for(;3>c.length;)c.push(0);return c},toDirectionPoint:function(a,c){c=void 0===c?[0,0,0,0]:c;a=coerce.toDirection(a,c);a!==c&&(a[3]=0);return a},toColor:function(a,c){c=void 0===c?[.5,.5,.5]:c;if("number"===a.ctype){var m=coerce.toInterval(0,1,a);if(!isNaN(m))return[m,m,m]}a=coerce.toList(a);return null===a?c:3!=a.length?(console.log("Not an RGB color vector"),c):a.map(function(a){return coerce.toInterval(0,1,a)})},toReal:function(a,
c){c=void 0===c?Number.NaN:c;if("number"!==a.ctype)return console.log("argument is not a number"),c;a=a.value;c=a.real;0!==a.imag&&console.log("complex number is not real");return c},toInt:function(a,c){c=void 0===c?Number.NaN:c;if("number"!==a.ctype)return console.log("argument is not a number"),c;c=a.value;a=c.real;c=c.imag;0!==c&&console.log("complex number is not real");c=Math.round(a);c!==a&&console.log("number is not an integer");return c},clamp:function(a,c,m){return m<a?a:m>c?c:m},toInterval:function(a,
c,m,l){l=void 0===l?Number.NaN:l;return coerce.clamp(a,c,coerce.toReal(m,l))},toString:function(a,c){c=void 0===c?null:c;if("string"===a.ctype)return a.value;console.log("argument is not a string");return c},toEnum:function(a,c,m){m=void 0===m?null:m;c=coerce.toString(c,m);if(c!==m&&-1!==a.indexOf(c))return c;console.log("argument is not one of "+a.join(", "));return m},toBool:function(a,c){if("boolean"===a.ctype)return a.value;console.log("argument is not boolean");return c}};function norm3(a){var c=a[0],m=a[1];a=a[2];return Math.sqrt(c*c+m*m+a*a)}function normalized3(a){var c=a[0],m=a[1];a=a[2];var l=1/Math.sqrt(c*c+m*m+a*a);return[l*c,l*m,l*a]}function dehom3(a){var c=1/a[3];return[c*a[0],c*a[1],c*a[2]]}function scale3(a,c){return[a*c[0],a*c[1],a*c[2]]}function transpose3(a){return[a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]]}function transpose4(a){return[a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]]}
function adj3(a){return[a[4]*a[8]-a[5]*a[7],a[2]*a[7]-a[1]*a[8],a[1]*a[5]-a[2]*a[4],a[5]*a[6]-a[3]*a[8],a[0]*a[8]-a[2]*a[6],a[2]*a[3]-a[0]*a[5],a[3]*a[7]-a[4]*a[6],a[1]*a[6]-a[0]*a[7],a[0]*a[4]-a[1]*a[3]]}function sub3(a,c){return[a[0]-c[0],a[1]-c[1],a[2]-c[2]]}function add3(a,c){return[a[0]+c[0],a[1]+c[1],a[2]+c[2]]}function add4(a,c){return[a[0]+c[0],a[1]+c[1],a[2]+c[2],a[3]+c[3]]}function cross3(a,c){return[a[1]*c[2]-a[2]*c[1],a[2]*c[0]-a[0]*c[2],a[0]*c[1]-a[1]*c[0]]}
function mul4mm(a,c){return[a[0]*c[0]+a[1]*c[4]+a[2]*c[8]+a[3]*c[12],a[0]*c[1]+a[1]*c[5]+a[2]*c[9]+a[3]*c[13],a[0]*c[2]+a[1]*c[6]+a[2]*c[10]+a[3]*c[14],a[0]*c[3]+a[1]*c[7]+a[2]*c[11]+a[3]*c[15],a[4]*c[0]+a[5]*c[4]+a[6]*c[8]+a[7]*c[12],a[4]*c[1]+a[5]*c[5]+a[6]*c[9]+a[7]*c[13],a[4]*c[2]+a[5]*c[6]+a[6]*c[10]+a[7]*c[14],a[4]*c[3]+a[5]*c[7]+a[6]*c[11]+a[7]*c[15],a[8]*c[0]+a[9]*c[4]+a[10]*c[8]+a[11]*c[12],a[8]*c[1]+a[9]*c[5]+a[10]*c[9]+a[11]*c[13],a[8]*c[2]+a[9]*c[6]+a[10]*c[10]+a[11]*c[14],a[8]*c[3]+a[9]*
c[7]+a[10]*c[11]+a[11]*c[15],a[12]*c[0]+a[13]*c[4]+a[14]*c[8]+a[15]*c[12],a[12]*c[1]+a[13]*c[5]+a[14]*c[9]+a[15]*c[13],a[12]*c[2]+a[13]*c[6]+a[14]*c[10]+a[15]*c[14],a[12]*c[3]+a[13]*c[7]+a[14]*c[11]+a[15]*c[15]]}function mul3mv(a,c){return[a[0]*c[0]+a[1]*c[1]+a[2]*c[2],a[3]*c[0]+a[4]*c[1]+a[5]*c[2],a[6]*c[0]+a[7]*c[1]+a[8]*c[2]]}
function mul4mv(a,c){return[a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3],a[4]*c[0]+a[5]*c[1]+a[6]*c[2]+a[7]*c[3],a[8]*c[0]+a[9]*c[1]+a[10]*c[2]+a[11]*c[3],a[12]*c[0]+a[13]*c[1]+a[14]*c[2]+a[15]*c[3]]}function transform4to3(a,c){var m=1/(a[12]*c[0]+a[13]*c[1]+a[14]*c[2]+a[15]*c[3]);return[(a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3])*m,(a[4]*c[0]+a[5]*c[1]+a[6]*c[2]+a[7]*c[3])*m,(a[8]*c[0]+a[9]*c[1]+a[10]*c[2]+a[11]*c[3])*m]}
function triangleNormal(a,c,m){a=dehom3(a);c=sub3(dehom3(c),a);m=sub3(dehom3(m),a);return normalized3(cross3(c,m))};function nestedArrayToCSList(a){return Array.isArray(a)?{ctype:"list",value:a.map(function(a){return nestedArrayToCSList(a)})}:{ctype:"number",value:{real:a,imag:0}}}
function convertObjectToCindyDict(a,c,m){if(a instanceof Object&&m.has(a))return m.get(a);if(Array.isArray(a)){var l=[];a.forEach(function(a){a=convertObjectToCindyDict(a,c,m);null!=a&&l.push(a)});return{ctype:"list",value:l}}if("string"===typeof a||a instanceof String)return{ctype:"string",value:a};if("number"===typeof a&&isFinite(a))return{ctype:"number",value:{real:a,imag:0}};if("boolean"===typeof a)return{ctype:"boolean",value:a};if(null===a||"undefined"===typeof a||"function"===typeof a)return null;
var e={},h=new Map(m);h.set(a,e);for(var n in a)if(!c.has(n)&&a.hasOwnProperty(n)){var u=convertObjectToCindyDict(a[n],c,h);e[n]=u}return{ctype:"JSON",value:e}};(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Leap=a()})(function(){return function(){function a(c,m,l){function e(n,v){if(!m[n]){if(!c[n]){var u="function"==typeof require&&require;if(!v&&u)return u(n,!0);if(h)return h(n,!0);v=Error("Cannot find module '"+n+"'");throw v.code="MODULE_NOT_FOUND",v;}v=
m[n]={exports:{}};c[n][0].call(v.exports,function(a){return e(c[n][1][a]||a)},v,v.exports,a,c,m,l)}return m[n].exports}for(var h="function"==typeof require&&require,n=0;n<l.length;n++)e(l[n]);return e}return a}()({1:[function(a,c,m){function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function e(b,f,a,C){var d;if("function"!==typeof a)throw new TypeError('"listener" argument must be a function');
if(d=b._events){d.newListener&&(b.emit("newListener",f,a.listener?a.listener:a),d=b._events);var g=d[f]}else d=b._events=r(null),b._eventsCount=0;g?("function"===typeof g?g=d[f]=C?[a,g]:[g,a]:C?g.unshift(a):g.push(a),g.warned||(a=void 0===b._maxListeners?l.defaultMaxListeners:b._maxListeners)&&0<a&&g.length>a&&(g.warned=!0,a=Error("Possible EventEmitter memory leak detected. "+g.length+' "'+String(f)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),a.name="MaxListenersExceededWarning",
a.emitter=b,a.type=f,a.count=g.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",a.name,a.message))):(d[f]=a,++b._eventsCount);return b}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],
arguments[1],arguments[2]);default:for(var b=Array(arguments.length),f=0;f<b.length;++f)b[f]=arguments[f];this.listener.apply(this.target,b)}}function n(b,f,a){b={fired:!1,wrapFn:void 0,target:b,type:f,listener:a};f=w.call(h,b);f.listener=a;return b.wrapFn=f}function u(b,f,a){b=b._events;if(!b)return[];f=b[f];if(!f)return[];if("function"===typeof f)return a?[f.listener||f]:[f];if(a)for(a=Array(f.length),b=0;b<a.length;++b)a[b]=f[b].listener||f[b];else a=B(f,f.length);return a}function v(b){var d=
this._events;if(d){b=d[b];if("function"===typeof b)return 1;if(b)return b.length}return 0}function B(b,f){for(var d=Array(f),g=0;g<f;++g)d[g]=b[g];return d}function A(b){var d=function(){};d.prototype=b;return new d}function p(b){var d=[],f;for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&d.push(f);return f}function q(b){var d=this;return function(){return d.apply(b,arguments)}}var r=Object.create||A,t=Object.keys||p,w=Function.prototype.bind||q;c.exports=l;l.EventEmitter=l;l.prototype._events=
void 0;l.prototype._maxListeners=void 0;var f=10;try{a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0});var b=0===a.x}catch(d){b=!1}b?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(b){if("number"!==typeof b||0>b||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');f=b}}):l.defaultMaxListeners=f;l.prototype.setMaxListeners=function(b){if("number"!==typeof b||0>b||isNaN(b))throw new TypeError('"n" argument must be a positive number');
this._maxListeners=b;return this};l.prototype.getMaxListeners=function(){return void 0===this._maxListeners?l.defaultMaxListeners:this._maxListeners};l.prototype.emit=function(b){var d,f,a;var D="error"===b;if(a=this._events)D=D&&null==a.error;else if(!D)return!1;if(D){1<arguments.length&&(d=arguments[1]);if(d instanceof Error)throw d;a=Error('Unhandled "error" event. ('+d+")");a.context=d;throw a;}d=a[b];if(!d)return!1;a="function"===typeof d;var c=arguments.length;switch(c){case 1:if(a)d.call(this);
else for(a=d.length,d=B(d,a),D=0;D<a;++D)d[D].call(this);break;case 2:D=arguments[1];if(a)d.call(this,D);else for(a=d.length,d=B(d,a),c=0;c<a;++c)d[c].call(this,D);break;case 3:D=arguments[1];c=arguments[2];if(a)d.call(this,D,c);else for(a=d.length,d=B(d,a),f=0;f<a;++f)d[f].call(this,D,c);break;case 4:D=arguments[1];c=arguments[2];f=arguments[3];if(a)d.call(this,D,c,f);else{a=d.length;d=B(d,a);for(var k=0;k<a;++k)d[k].call(this,D,c,f)}break;default:D=Array(c-1);for(f=1;f<c;f++)D[f-1]=arguments[f];
if(a)d.apply(this,D);else for(a=d.length,d=B(d,a),c=0;c<a;++c)d[c].apply(this,D)}return!0};l.prototype.addListener=function(b,f){return e(this,b,f,!1)};l.prototype.on=l.prototype.addListener;l.prototype.prependListener=function(b,f){return e(this,b,f,!0)};l.prototype.once=function(b,f){if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');this.on(b,n(this,b,f));return this};l.prototype.prependOnceListener=function(b,f){if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');
this.prependListener(b,n(this,b,f));return this};l.prototype.removeListener=function(b,f){var d;if("function"!==typeof f)throw new TypeError('"listener" argument must be a function');var g=this._events;if(!g)return this;var a=g[b];if(!a)return this;if(a===f||a.listener===f)0===--this._eventsCount?this._events=r(null):(delete g[b],g.removeListener&&this.emit("removeListener",b,a.listener||f));else if("function"!==typeof a){var c=-1;for(d=a.length-1;0<=d;d--)if(a[d]===f||a[d].listener===f){var k=a[d].listener;
c=d;break}if(0>c)return this;if(0===c)a.shift();else{d=c+1;for(var e=a.length;d<e;c+=1,d+=1)a[c]=a[d];a.pop()}1===a.length&&(g[b]=a[0]);g.removeListener&&this.emit("removeListener",b,k||f)}return this};l.prototype.removeAllListeners=function(b){var d=this._events;if(!d)return this;if(!d.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):d[b]&&(0===--this._eventsCount?this._events=r(null):delete d[b]),this;if(0===arguments.length){var f=t(d);for(d=0;d<f.length;++d){var a=
f[d];"removeListener"!==a&&this.removeAllListeners(a)}this.removeAllListeners("removeListener");this._events=r(null);this._eventsCount=0;return this}f=d[b];if("function"===typeof f)this.removeListener(b,f);else if(f)for(d=f.length-1;0<=d;d--)this.removeListener(b,f[d]);return this};l.prototype.listeners=function(b){return u(this,b,!0)};l.prototype.rawListeners=function(b){return u(this,b,!1)};l.listenerCount=function(b,f){return"function"===typeof b.listenerCount?b.listenerCount(f):v.call(b,f)};l.prototype.listenerCount=
v;l.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],2:[function(a,c,m){a("./pointable");m=a("gl-matrix");var l=m.vec3,e=m.mat3,h=m.mat4;a("underscore");a=c.exports=function(a,c){this.finger=a;this._matrix=this._center=null;this.type=c.type;this.prevJoint=c.prevJoint;this.nextJoint=c.nextJoint;this.width=c.width;a=Array(3);l.sub(a,c.nextJoint,c.prevJoint);this.length=l.length(a);this.basis=c.basis};a.prototype.left=function(){return this._left?this._left:
this._left=0>e.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))};a.prototype.matrix=function(){if(this._matrix)return this._matrix;var a=this.basis,c=this._matrix=h.create();c[0]=a[0][0];c[1]=a[0][1];c[2]=a[0][2];c[4]=a[1][0];c[5]=a[1][1];c[6]=a[1][2];c[8]=a[2][0];c[9]=a[2][1];c[10]=a[2][2];c[3]=this.center()[0];c[7]=this.center()[1];c[11]=this.center()[2];this.left()&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);return this._matrix};a.prototype.lerp=function(a,c){l.lerp(a,this.prevJoint,this.nextJoint,
c)};a.prototype.center=function(){if(this._center)return this._center;var a=l.create();this.lerp(a,.5);return this._center=a};a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],-1*this.basis[2][2]]}},{"./pointable":16,"gl-matrix":22,underscore:25}],3:[function(a,c,m){a=c.exports=function(a){this.pos=0;this._buf=[];this.size=a};a.prototype.get=function(a){void 0==a&&(a=0);if(!(a>=this.size||a>=this._buf.length))return this._buf[(this.pos-a-1)%this.size]};a.prototype.push=
function(a){this._buf[this.pos%this.size]=a;return this.pos++}},{}],4:[function(a,c,m){var l=a("../protocol").chooseProtocol;m=a("events").EventEmitter;var e=a("underscore"),h=c.exports=function(a){this.opts=e.defaults(a||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:h.defaultProtocolVersion});this.host=this.opts.host;this.port=this.opts.port;this.scheme=this.opts.scheme;this.protocolVersionVerified=!1;this.optimizeHMD=
this.background=null;this.on("ready",function(){this.enableGestures(this.opts.enableGestures);this.setBackground(this.opts.background);this.setOptimizeHMD(this.opts.optimizeHMD);this.opts.optimizeHMD?console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};h.defaultProtocolVersion=6;h.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"};h.prototype.getScheme=function(){return"ws:"};
h.prototype.getPort=function(){return 6437};h.prototype.setBackground=function(a){this.opts.background=a;this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=this.opts.background,this.protocol.sendBackground(this,this.opts.background))};h.prototype.setOptimizeHMD=function(a){this.opts.optimizeHMD=a;this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,
this.opts.optimizeHMD))};h.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))};h.prototype.enableGestures=function(a){this.gesturesEnabled=a?!0:!1;this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))};h.prototype.handleClose=function(a,c){this.connected&&(this.disconnect(),1001===a&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())};
h.prototype.startReconnection=function(){var a=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){a.reconnect()},500))};h.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)};h.prototype.disconnect=function(a){a||this.stopReconnection();if(this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),
!0};h.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())};h.prototype.handleData=function(a){a=JSON.parse(a);void 0===this.protocol?(a=this.protocol=l(a),this.protocolVersionVerified=!0,this.emit("ready")):a=this.protocol(a);this.emit(a.type,a)};h.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0};h.prototype.send=function(a){this.socket.send(a)};h.prototype.reportFocus=function(a){this.connected&&this.focusedState!==
a&&(this.focusedState=a,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))};e.extend(h.prototype,m.prototype)},{"../protocol":17,events:1,underscore:25}],5:[function(a,c,m){var l=c.exports=a("./base");a=a("underscore");c=c.exports=function(a){l.call(this,a);var c=this;this.on("ready",function(){c.startFocusLoop()});this.on("disconnect",function(){c.stopFocusLoop()})};a.extend(c.prototype,l.prototype);c.__proto__=
l;c.prototype.useSecure=function(){return"https:"===location.protocol};c.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"};c.prototype.getPort=function(){return this.useSecure()?6436:6437};c.prototype.setupSocket=function(){var a=this,c=new WebSocket(this.getUrl());c.onopen=function(){a.handleOpen()};c.onclose=function(c){a.handleClose(c.code,c.reason)};c.onmessage=function(c){a.handleData(c.data)};c.onerror=function(c){a.useSecure()&&"wss:"===a.scheme&&(a.scheme="ws:",a.port=6437,
a.disconnect(),a.connect())};return c};c.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var a=this,c=null;c="undefined"!==typeof document.hidden?"hidden":"undefined"!==typeof document.mozHidden?"mozHidden":"undefined"!==typeof document.msHidden?"msHidden":"undefined"!==typeof document.webkitHidden?"webkitHidden":void 0;void 0===a.windowVisible&&(a.windowVisible=void 0===c?!0:!1===document[c]);var n=window.addEventListener("focus",function(c){a.windowVisible=!0;v()}),l=window.addEventListener("blur",
function(c){a.windowVisible=!1;v()});this.on("disconnect",function(){window.removeEventListener("focus",n);window.removeEventListener("blur",l)});var v=function(){a.reportFocus((void 0===c?!0:!1===document[c])&&a.windowVisible)};v();this.focusDetectorTimer=setInterval(v,100)}};c.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":4,underscore:25}],6:[function(a,c,m){var l=a("ws"),e=a("./base");a=a("underscore");
c=c.exports=function(a){e.call(this,a);var c=this;this.on("ready",function(){c.reportFocus(!0)})};a.extend(c.prototype,e.prototype);c.__proto__=e;c.prototype.setupSocket=function(){var a=this,c=new l(this.getUrl());c.on("open",function(){a.handleOpen()});c.on("message",function(c){a.handleData(c)});c.on("close",function(c,e){a.handleClose(c,e)});c.on("error",function(){a.startReconnection()});return c}},{"./base":4,underscore:25,ws:23}],7:[function(a,c,m){(function(l){(function(){var e=a("./frame"),
h=a("./hand"),n=a("./pointable"),m=a("./finger"),v=a("./circular_buffer"),B=a("./pipeline"),A=a("events").EventEmitter,p=a("./gesture").gestureListener,q=a("./dialog"),r=a("underscore"),t=c.exports=function(c){var f=this;c=r.defaults(c||{},{inNode:"undefined"!==typeof l&&l.versions&&l.versions.node});this.inNode=c.inNode;c=r.defaults(c||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,
checkVersion:!0});this.animationFrameRequested=!1;this.onAnimationFrame=function(b){f.lastConnectionFrame.valid&&f.emit("animationFrame",f.lastConnectionFrame);f.emit("frameEnd",b);f.loopWhileDisconnected&&(!1!==f.connection.focusedState||f.connection.opts.background)?window.requestAnimationFrame(f.onAnimationFrame):f.animationFrameRequested=!1};this.suppressAnimationLoop=c.suppressAnimationLoop;this.loopWhileDisconnected=c.loopWhileDisconnected;this.frameEventName=c.frameEventName;this.useAllPlugins=
c.useAllPlugins;this.history=new v(200);this.lastConnectionFrame=this.lastValidFrame=this.lastFrame=e.Invalid;this.accumulatedGestures=[];this.checkVersion=c.checkVersion;this.connectionType=void 0===c.connectionType?this.inBrowser()?a("./connection/browser"):a("./connection/node"):c.connectionType;this.connection=new this.connectionType(c);this.streamingCount=0;this.devices={};this.plugins={};this._pluginPipelineSteps={};this._pluginExtendedMethods={};c.useAllPlugins&&this.useRegisteredPlugins();
this.setupFrameEvents(c);this.setupConnectionEvents();this.startAnimationLoop()};t.prototype.gesture=function(a,f){a=p(this,a);void 0!==f&&a.stop(f);return a};t.prototype.setBackground=function(a){this.connection.setBackground(a);return this};t.prototype.setOptimizeHMD=function(a){this.connection.setOptimizeHMD(a);return this};t.prototype.inBrowser=function(){return!this.inNode};t.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()};t.prototype.inBackgroundPage=
function(){return"undefined"!==typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&chrome.extension.getBackgroundPage()===window};t.prototype.connect=function(){this.connection.connect();return this};t.prototype.streaming=function(){return 0<this.streamingCount};t.prototype.connected=function(){return!!this.connection.connected};t.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))};
t.prototype.disconnect=function(){this.connection.disconnect();return this};t.prototype.frame=function(a){return this.history.get(a)||e.Invalid};t.prototype.loop=function(a){if(a)if("function"===typeof a)this.on(this.frameEventName,a);else this.setupFrameEvents(a);return this.connect()};t.prototype.addStep=function(a){this.pipeline||(this.pipeline=new B(this));this.pipeline.addStep(a)};t.prototype.processFrame=function(a){a.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(a.gestures));
this.lastConnectionFrame=a;this.startAnimationLoop();this.emit("deviceFrame",a)};t.prototype.processFinishedFrame=function(a){this.lastFrame=a;a.valid&&(this.lastValidFrame=a);a.controller=this;a.historyIdx=this.history.push(a);if(a.gestures){a.gestures=this.accumulatedGestures;this.accumulatedGestures=[];for(var f=0;f!=a.gestures.length;f++)this.emit("gesture",a.gestures[f],a)}this.pipeline&&(a=this.pipeline.run(a),a||(a=e.Invalid));this.emit("frame",a);this.emitHandEvents(a)};t.prototype.emitHandEvents=
function(a){for(var f=0;f<a.hands.length;f++)this.emit("hand",a.hands[f])};t.prototype.setupFrameEvents=function(a){if(a.frame)this.on("frame",a.frame);if(a.hand)this.on("hand",a.hand)};t.prototype.setupConnectionEvents=function(){var a=this;this.connection.on("frame",function(b){a.processFrame(b)});this.on(this.frameEventName,function(b){a.processFinishedFrame(b)});var f=function(){if(5>a.connection.opts.requestProtocolVersion&&0==a.streamingCount){a.streamingCount=1;var b={attached:!0,streaming:!0,
type:"unknown",id:"Lx00000000000"};a.devices[b.id]=b;a.emit("deviceAttached",b);a.emit("deviceStreaming",b);a.emit("streamingStarted",b);a.connection.removeListener("frame",f)}},b=function(){if(0<a.streamingCount){for(var b in a.devices)a.emit("deviceStopped",a.devices[b]),a.emit("deviceRemoved",a.devices[b]);a.emit("streamingStopped",a.devices[b]);a.streamingCount=0;for(b in a.devices)delete a.devices[b]}};this.connection.on("focus",function(){a.loopWhileDisconnected&&a.startAnimationLoop();a.emit("focus")});
this.connection.on("blur",function(){a.emit("blur")});this.connection.on("protocol",function(b){b.on("beforeFrameCreated",function(b){a.emit("beforeFrameCreated",b)});b.on("afterFrameCreated",function(b,d){a.emit("afterFrameCreated",b,d)});a.emit("protocol",b)});this.connection.on("ready",function(){a.checkVersion&&!a.inNode&&a.checkOutOfDate();a.emit("ready")});this.connection.on("connect",function(){a.emit("connect");a.connection.removeListener("frame",f);a.connection.on("frame",f)});this.connection.on("disconnect",
function(){a.emit("disconnect");b()});this.connection.on("deviceConnect",function(d){d.state?(a.emit("deviceConnected"),a.connection.removeListener("frame",f),a.connection.on("frame",f)):(a.emit("deviceDisconnected"),b())});this.connection.on("deviceEvent",function(b){b=b.state;var d=a.devices[b.id],f={},c;for(c in b)d&&d.hasOwnProperty(c)&&d[c]==b[c]||(f[c]=!0);a.devices[b.id]=b;f.attached&&a.emit(b.attached?"deviceAttached":"deviceRemoved",b);f.streaming&&(b.streaming?(a.streamingCount++,a.emit("deviceStreaming",
b),1==a.streamingCount&&a.emit("streamingStarted",b),f.attached||a.emit("deviceConnected")):f.attached&&b.attached||(a.streamingCount--,a.emit("deviceStopped",b),0==a.streamingCount&&a.emit("streamingStopped",b),a.emit("deviceDisconnected")))});this.on("newListener",function(b,f){"deviceConnected"!=b&&"deviceDisconnected"!=b||console.warn(b+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})};t.prototype.checkOutOfDate=function(){console.assert(this.connection&&
this.connection.protocol);var a=this.connection.protocol.serviceVersion,f=this.connection.protocol.version,b=this.connectionType.defaultProtocolVersion;return b>f?(console.warn("Your Protocol Version is v"+f+", this app was designed for v"+b),q.warnOutOfDate({sV:a,pV:f}),!0):!1};t._pluginFactories={};t.plugin=function(a,f){this._pluginFactories[a]&&console.warn('Plugin "'+a+'" already registered');return this._pluginFactories[a]=f};t.plugins=function(){return r.keys(this._pluginFactories)};t.prototype.use=
function(a,f){var b;var d="function"==typeof a?a:t._pluginFactories[a];if(!d)throw"Leap Plugin "+a+" not found.";f||(f={});if(this.plugins[a])return r.extend(this.plugins[a],f),this;this.plugins[a]=f;f=d.call(this,f);for(b in f)if(d=f[b],"function"===typeof d){var g=a,E=b;if(-1!=["beforeFrameCreated","afterFrameCreated"].indexOf(E))this.on(E,d);else this.pipeline||(this.pipeline=new B(this)),this._pluginPipelineSteps[g]||(this._pluginPipelineSteps[g]=[]),this._pluginPipelineSteps[g].push(this.pipeline.addWrappedStep(E,
d))}else{g=a;E=b;this._pluginExtendedMethods[g]||(this._pluginExtendedMethods[g]=[]);switch(E){case "frame":E=e;break;case "hand":E=h;break;case "pointable":E=n;r.extend(m.prototype,d);r.extend(m.Invalid,d);break;case "finger":E=m;break;default:throw g+' specifies invalid object type "'+E+'" for prototypical extension';}r.extend(E.prototype,d);r.extend(E.Invalid,d);this._pluginExtendedMethods[g].push([E,d])}return this};t.prototype.stopUsing=function(a){var f=this._pluginPipelineSteps[a],b=this._pluginExtendedMethods[a],
d;if(this.plugins[a]){if(f)for(d=0;d<f.length;d++)this.pipeline.removeStep(f[d]);if(b)for(d=0;d<b.length;d++){f=b[d][0];var g=b[d][1];for(var E in g)delete f.prototype[E],delete f.Invalid[E]}delete this.plugins[a];return this}};t.prototype.useRegisteredPlugins=function(){for(var a in t._pluginFactories)this.use(a)};r.extend(t.prototype,A.prototype)}).call(this)}).call(this,a("_process"))},{"./circular_buffer":3,"./connection/browser":5,"./connection/node":6,"./dialog":8,"./finger":9,"./frame":10,
"./gesture":11,"./hand":12,"./pipeline":15,"./pointable":16,_process:24,events:1,underscore:25}],8:[function(a,c,m){(function(a){(function(){var e=c.exports=function(a,c){this.options=c||{};this.message=a;this.createElement()};e.prototype.createElement=function(){this.element=document.createElement("div");this.element.className="leapjs-dialog";this.element.style.position="fixed";this.element.style.top="8px";this.element.style.left=0;this.element.style.right=0;this.element.style.textAlign="center";
this.element.style.zIndex=1E3;var a=document.createElement("div");this.element.appendChild(a);a.style.className="leapjs-dialog";a.style.display="inline-block";a.style.margin="auto";a.style.padding="8px";a.style.color="#222";a.style.background="#eee";a.style.borderRadius="4px";a.style.border="1px solid #999";a.style.textAlign="left";a.style.cursor="pointer";a.style.whiteSpace="nowrap";a.style.transition="box-shadow 1s linear";a.innerHTML=this.message;this.options.onclick&&a.addEventListener("click",
this.options.onclick);this.options.onmouseover&&a.addEventListener("mouseover",this.options.onmouseover);this.options.onmouseout&&a.addEventListener("mouseout",this.options.onmouseout);this.options.onmousemove&&a.addEventListener("mousemove",this.options.onmousemove)};e.prototype.show=function(){document.body.appendChild(this.element);return this};e.prototype.hide=function(){document.body.removeChild(this.element);return this};e.warnOutOfDate=function(a){a||(a={});var c="http://developer.leapmotion.com?";
a.returnTo=window.location.href;for(var h in a)c+=h+"="+encodeURIComponent(a[h])+"&";var l=new e("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(a){"leapjs-decline-upgrade"!=
a.target.id&&(a=window.open(c,"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1"),window.focus&&a.focus());l.hide();return!0},onmousemove:function(a){a.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow=
"none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none";document.getElementById("leapjs-accept-upgrade").style.color=
"#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}});return l.show()};e.hasWarnedBones=!1;e.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!==typeof a&&a.versions&&a.versions.node||this.warnOutOfDate({reason:"bones"}))}}).call(this)}).call(this,a("_process"))},{_process:24}],9:[function(a,c,m){var l=a("./pointable"),e=a("./bone"),h=a("./dialog");a=a("underscore");c=c.exports=function(a){l.call(this,
a);this.dipPosition=a.dipPosition;this.pipPosition=a.pipPosition;this.mcpPosition=a.mcpPosition;this.carpPosition=a.carpPosition;this.extended=a.extended;this.type=a.type;this.finger=!0;this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition];a.bases?this.addBones(a):h.warnBones()};a.extend(c.prototype,l.prototype);c.prototype.addBones=function(a){this.metacarpal=new e(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,
basis:a.bases[0]});this.proximal=new e(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:a.bases[1]});this.medial=new e(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:a.bases[2]});this.distal=new e(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:a.btipPosition,basis:a.bases[3]});this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]};c.prototype.toString=function(){return"Finger [ id:"+
this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};c.Invalid={valid:!1}},{"./bone":2,"./dialog":8,"./pointable":16,underscore:25}],10:[function(a,c,m){var l=a("./hand"),e=a("./pointable"),h=a("./gesture").createGesture;m=a("gl-matrix");var n=m.mat3,u=m.vec3,v=a("./interaction_box"),B=a("./finger"),A=a("underscore");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.timestamp=a.timestamp;this.hands=[];this.handsMap={};this.pointables=[];this.tools=[];this.fingers=
[];a.interactionBox&&(this.interactionBox=new v(a.interactionBox));this.gestures=[];this.pointablesMap={};this._translation=a.t;this._rotation=A.flatten(a.r);this._scaleFactor=a.s;this.data=a;this.type="frame";this.currentFrameRate=a.currentFrameRate;if(a.gestures)for(var c=0,e=a.gestures.length;c!=e;c++)this.gestures.push(h(a.gestures[c]));this.postprocessData(a)};a.prototype.postprocessData=function(a){a||(a=this.data);for(var c=0,h=a.hands.length;c!=h;c++){var n=new l(a.hands[c]);n.frame=this;
this.hands.push(n);this.handsMap[n.id]=n}a.pointables=A.sortBy(a.pointables,function(a){return a.id});c=0;for(h=a.pointables.length;c!=h;c++)n=a.pointables[c],n=n.dipPosition?new B(n):new e(n),n.frame=this,this.addPointable(n)};a.prototype.addPointable=function(a){this.pointables.push(a);this.pointablesMap[a.id]=a;(a.tool?this.tools:this.fingers).push(a);if(void 0!==a.handId&&this.handsMap.hasOwnProperty(a.handId)){var c=this.handsMap[a.handId];c.pointables.push(a);(a.tool?c.tools:c.fingers).push(a);
switch(a.type){case 0:c.thumb=a;break;case 1:c.indexFinger=a;break;case 2:c.middleFinger=a;break;case 3:c.ringFinger=a;break;case 4:c.pinky=a}}};a.prototype.tool=function(a){a=this.pointable(a);return a.tool?a:e.Invalid};a.prototype.pointable=function(a){return this.pointablesMap[a]||e.Invalid};a.prototype.finger=function(a){a=this.pointable(a);return a.tool?e.Invalid:a};a.prototype.hand=function(a){return this.handsMap[a]||l.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=u.dot(a,u.normalize(u.create(),c)));return e};a.prototype.rotationAxis=function(a){return this.valid&&a.valid?u.normalize(u.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):u.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return n.create();var c=n.transpose(n.create(),this._rotation);return n.multiply(n.create(),
a._rotation,c)};a.prototype.scaleFactor=function(a){return this.valid&&a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){return this.valid&&a.valid?u.subtract(u.create(),this._translation,a._translation):u.create()};a.prototype.toString=function(){var a="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";this.gestures&&(a+=" | Gesture count:("+this.gestures.length+")");return a+
" ]"};a.prototype.dump=function(){var a="Frame Info:<br/>"+this.toString();a+="<br/><br/>Hands:<br/>";for(var c=0,e=this.hands.length;c!=e;c++)a+="  "+this.hands[c].toString()+"<br/>";a+="<br/><br/>Pointables:<br/>";c=0;for(e=this.pointables.length;c!=e;c++)a+="  "+this.pointables[c].toString()+"<br/>";if(this.gestures)for(a+="<br/><br/>Gestures:<br/>",c=0,e=this.gestures.length;c!=e;c++)a+="  "+this.gestures[c].toString()+"<br/>";return a=a+"<br/><br/>Raw JSON:<br/>"+JSON.stringify(this.data)};a.Invalid=
{valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return e.Invalid},finger:function(){return e.Invalid},hand:function(){return l.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return n.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{"./finger":9,"./gesture":11,"./hand":12,"./interaction_box":14,
"./pointable":16,"gl-matrix":22,underscore:25}],11:[function(a,c,m){var l=a("gl-matrix").vec3;c=a("events").EventEmitter;var e=a("underscore");m.createGesture=function(a){switch(a.type){case "circle":var c=new n(a);break;case "swipe":c=new u(a);break;case "screenTap":c=new v(a);break;case "keyTap":c=new B(a);break;default:throw"unknown gesture type";}c.id=a.id;c.handIds=a.handIds.slice();c.pointableIds=a.pointableIds.slice();c.duration=a.duration;c.state=a.state;c.type=a.type;return c};m.gestureListener=
function(a,c){var n={},l={};a.on("gesture",function(a,f){if(a.type==c){if(("start"==a.state||"stop"==a.state)&&void 0===l[a.id]){var b=new h(a,f);l[a.id]=b;e.each(n,function(d,f){b.on(f,d)})}l[a.id].update(a,f);"stop"==a.state&&delete l[a.id]}});var v={start:function(a){n.start=a;return v},stop:function(a){n.stop=a;return v},complete:function(a){n.stop=a;return v},update:function(a){n.update=a;return v}};return v};var h=m.Gesture=function(a,c){this.gestures=[a];this.frames=[c]};h.prototype.update=
function(a,c){this.lastGesture=a;this.lastFrame=c;this.gestures.push(a);this.frames.push(c);this.emit(a.state,this)};h.prototype.translation=function(){return l.subtract(l.create(),this.lastGesture.startPosition,this.lastGesture.position)};e.extend(h.prototype,c.prototype);var n=function(a){this.center=a.center;this.normal=a.normal;this.progress=a.progress;this.radius=a.radius};n.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var u=function(a){this.startPosition=a.startPosition;
this.position=a.position;this.direction=a.direction;this.speed=a.speed};u.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var v=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};v.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var B=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};B.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+
"]"}},{events:1,"gl-matrix":22,underscore:25}],12:[function(a,c,m){var l=a("./pointable"),e=a("./bone");m=a("gl-matrix");var h=m.mat3,n=m.vec3,u=a("underscore");a=c.exports=function(a){this.id=a.id;this.palmPosition=a.palmPosition;this.direction=a.direction;this.palmVelocity=a.palmVelocity;this.palmNormal=a.palmNormal;this.sphereCenter=a.sphereCenter;this.sphereRadius=a.sphereRadius;this.valid=!0;this.pointables=[];this.fingers=[];this.arm=a.armBasis?new e(this,{type:4,width:a.armWidth,prevJoint:a.elbow,
nextJoint:a.wrist,basis:a.armBasis}):null;this.tools=[];this._translation=a.t;this._rotation=u.flatten(a.r);this._scaleFactor=a.s;this.timeVisible=a.timeVisible;this.stabilizedPalmPosition=a.stabilizedPalmPosition;this.type=a.type;this.grabStrength=a.grabStrength;this.pinchStrength=a.pinchStrength;this.confidence=a.confidence};a.prototype.finger=function(a){return(a=this.frame.finger(a))&&a.handId==this.id?a:l.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid||!a.hand(this.id).valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=n.dot(a,n.normalize(n.create(),c)));return e};a.prototype.rotationAxis=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?n.normalize(n.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):n.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return h.create();a=a.hand(this.id);
if(!a.valid)return h.create();var c=h.transpose(h.create(),this._rotation);return h.multiply(h.create(),a._rotation,c)};a.prototype.scaleFactor=function(a){if(!this.valid||!a.valid)return 1;a=a.hand(this.id);return a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?[this._translation[0]-a._translation[0],this._translation[1]-a._translation[1],this._translation[2]-a._translation[2]]:n.create()};
a.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "};a.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])};a.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])};a.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])};a.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return l.Invalid},
finger:function(){return l.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return h.create()},rotationAxis:function(){return n.create()},scaleFactor:function(){return 1},translation:function(){return n.create()}}},{"./bone":2,"./pointable":16,"gl-matrix":22,underscore:25}],13:[function(a,c,m){c.exports={Controller:a("./controller"),Frame:a("./frame"),Gesture:a("./gesture"),Hand:a("./hand"),Pointable:a("./pointable"),
Finger:a("./finger"),InteractionBox:a("./interaction_box"),CircularBuffer:a("./circular_buffer"),UI:a("./ui"),JSONProtocol:a("./protocol").JSONProtocol,glMatrix:a("gl-matrix"),mat3:a("gl-matrix").mat3,vec3:a("gl-matrix").vec3,loopController:void 0,version:a("./version.js"),_:a("underscore"),EventEmitter:a("events").EventEmitter,loop:function(a,c){a&&void 0===c&&"[object Function]"==={}.toString.call(a)&&(c=a,a={});this.loopController?a&&this.loopController.setupFrameEvents(a):this.loopController=
new this.Controller(a);this.loopController.loop(c);return this.loopController},plugin:function(a,c){this.Controller.plugin(a,c)}}},{"./circular_buffer":3,"./controller":7,"./finger":9,"./frame":10,"./gesture":11,"./hand":12,"./interaction_box":14,"./pointable":16,"./protocol":17,"./ui":18,"./version.js":21,events:1,"gl-matrix":22,underscore:25}],14:[function(a,c,m){var l=a("gl-matrix").vec3;a=c.exports=function(a){this.valid=!0;this.center=a.center;this.size=a.size;this.width=a.size[0];this.height=
a.size[1];this.depth=a.size[2]};a.prototype.denormalizePoint=function(a){return l.fromValues((a[0]-.5)*this.size[0]+this.center[0],(a[1]-.5)*this.size[1]+this.center[1],(a[2]-.5)*this.size[2]+this.center[2])};a.prototype.normalizePoint=function(a,c){a=l.fromValues((a[0]-this.center[0])/this.size[0]+.5,(a[1]-this.center[1])/this.size[1]+.5,(a[2]-this.center[2])/this.size[2]+.5);c&&(a[0]=Math.min(Math.max(a[0],0),1),a[1]=Math.min(Math.max(a[1],0),1),a[2]=Math.min(Math.max(a[2],0),1));return a};a.prototype.toString=
function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"};a.Invalid={valid:!1}},{"gl-matrix":22}],15:[function(a,c,m){a=c.exports=function(a){this.steps=[];this.controller=a};a.prototype.addStep=function(a){this.steps.push(a)};a.prototype.run=function(a){for(var c=this.steps.length,h=0;h!=c&&a;h++)a=this.steps[h](a);return a};a.prototype.removeStep=function(a){a=this.steps.indexOf(a);if(-1===a)throw"Step not found in pipeline";this.steps.splice(a,
1)};a.prototype.addWrappedStep=function(a,c){var e=this.controller,n=function(h){var n;var l="frame"==a?[h]:h[a+"s"]||[];var m=0;for(n=l.length;m<n;m++)c.call(e,l[m]);return h};this.addStep(n);return n}},{}],16:[function(a,c,m){a("gl-matrix");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.handId=a.handId;this.length=a.length;this.tool=a.tool;this.width=a.width;this.direction=a.direction;this.stabilizedTipPosition=a.stabilizedTipPosition;this.tipPosition=a.tipPosition;this.tipVelocity=a.tipVelocity;
this.touchZone=a.touchZone;this.touchDistance=a.touchDistance;this.timeVisible=a.timeVisible};a.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};a.prototype.hand=function(){return this.frame.hand(this.handId)};a.Invalid={valid:!1}},{"gl-matrix":22}],17:[function(a,c,m){var l=a("./frame");a("./hand");a("./pointable");a("./finger");var e=a("underscore"),h=a("events").EventEmitter,n=function(a){this.type=a.type;
this.state=a.state};m.chooseProtocol=function(a){switch(a.version){case 1:case 2:case 3:case 4:case 5:case 6:var c=u(a);c.sendBackground=function(a,e){a.send(c.encode({background:e}))};c.sendFocused=function(a,e){a.send(c.encode({focused:e}))};c.sendOptimizeHMD=function(a,e){a.send(c.encode({optimizeHMD:e}))};break;default:throw"unrecognized version";}return c};var u=m.JSONProtocol=function(a){var c=function(a){if(a.event)return new n(a.event);c.emit("beforeFrameCreated",a);var e=new l(a);c.emit("afterFrameCreated",
e,a);return e};c.encode=function(a){return JSON.stringify(a)};c.version=a.version;c.serviceVersion=a.serviceVersion;c.versionLong="Version "+a.version;c.type="protocol";e.extend(c,h.prototype);return c}},{"./finger":9,"./frame":10,"./hand":12,"./pointable":16,events:1,underscore:25}],18:[function(a,c,m){m.UI={Region:a("./ui/region"),Cursor:a("./ui/cursor")}},{"./ui/cursor":19,"./ui/region":20}],19:[function(a,c,m){c.exports=function(){return function(a){var c=a.pointables.sort(function(a,c){return a.z-
c.z})[0];c&&c.valid&&(a.cursorPosition=c.tipPosition);return a}}},{}],20:[function(a,c,m){m=a("events").EventEmitter;a=a("underscore");var l=c.exports=function(a,c){this.start=new Vector(a);this.end=new Vector(c);this.enteredFrame=null};l.prototype.hasPointables=function(a){for(var c=0;c!=a.pointables.length;c++){var e=a.pointables[c].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1};l.prototype.listener=function(a){var c=
this;a&&a.nearThreshold&&this.setupNearRegion(a.nearThreshold);return function(a){return c.updatePosition(a)}};l.prototype.clipper=function(){var a=this;return function(c){a.updatePosition(c);return a.enteredFrame?c:null}};l.prototype.setupNearRegion=function(a){a=this.nearRegion=new l([this.start.x-a,this.start.y-a,this.start.z-a],[this.end.x+a,this.end.y+a,this.end.z+a]);var c=this;a.on("enter",function(a){c.emit("near",a)});a.on("exit",function(a){c.emit("far",a)});c.on("exit",function(a){c.emit("near",
a)})};l.prototype.updatePosition=function(a){this.nearRegion&&this.nearRegion.updatePosition(a);this.hasPointables(a)&&null==this.enteredFrame?(this.enteredFrame=a,this.emit("enter",this.enteredFrame)):this.hasPointables(a)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame));return a};l.prototype.normalize=function(a){return new Vector([(a.x-this.start.x)/(this.end.x-this.start.x),(a.y-this.start.y)/(this.end.y-this.start.y),(a.z-this.start.z)/(this.end.z-this.start.z)])};
l.prototype.mapToXY=function(a,c,n){a=this.normalize(a);var e=a.x,h=a.y;1<e?e=1:-1>e&&(e=-1);1<h?h=1:-1>h&&(h=-1);return[(e+1)/2*c,(1-h)/2*n,a.z]};a.extend(l.prototype,m.prototype)},{events:1,underscore:25}],21:[function(a,c,m){c.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],22:[function(a,c,m){(function(a){(function(a){if(!c)var c=1E-6;if(!e)var e="undefined"!==typeof Float32Array?Float32Array:Array;if(!l)var l=Math.random;var m={setMatrixArrayType:function(a){e=a}};"undefined"!==typeof a&&(a.glMatrix=
m);var B=Math.PI/180;m.toRadian=function(a){return a*B};var A={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new e(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new e(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};A.sub=A.subtract;A.multiply=function(a,
b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a};A.mul=A.multiply;A.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];return a};A.div=A.divide;A.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};A.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};A.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};A.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;return a};A.distance=function(a,b){var d=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(d*
d+a*a)};A.dist=A.distance;A.squaredDistance=function(a,b){var d=b[0]-a[0];a=b[1]-a[1];return d*d+a*a};A.sqrDist=A.squaredDistance;A.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};A.len=A.length;A.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};A.sqrLen=A.squaredLength;A.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};A.normalize=function(a,b){var d=b[0],f=b[1];d=d*d+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};A.dot=function(a,b){return a[0]*b[0]+
a[1]*b[1]};A.cross=function(a,b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};A.lerp=function(a,b,d,g){var f=b[0];b=b[1];a[0]=f+g*(d[0]-f);a[1]=b+g*(d[1]-b);return a};A.random=function(a,b){b=b||1;var d=2*l()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};A.transformMat2=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[2]*b;a[1]=d[1]*f+d[3]*b;return a};A.transformMat2d=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[2]*b+d[4];a[1]=d[1]*f+d[3]*b+d[5];return a};A.transformMat3=function(a,
b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[3]*b+d[6];a[1]=d[1]*f+d[4]*b+d[7];return a};A.transformMat4=function(a,b,d){var f=b[0];b=b[1];a[0]=d[0]*f+d[4]*b+d[12];a[1]=d[1]*f+d[5]*b+d[13];return a};A.forEach=function(){var a=A.create();return function(b,d,f,E,c,D){d||(d=2);f||(f=0);for(E=E?Math.min(E*d+f,b.length):b.length;f<E;f+=d)a[0]=b[f],a[1]=b[f+1],c(a,a,D),b[f]=a[0],b[f+1]=a[1];return b}}();A.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof a&&(a.vec2=A);var p={create:function(){var a=
new e(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new e(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,d){var f=new e(3);f[0]=a;f[1]=b;f[2]=d;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,g){a[0]=b;a[1]=d;a[2]=g;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};p.sub=p.subtract;p.multiply=function(a,b,d){a[0]=
b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a};p.mul=p.multiply;p.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};p.div=p.divide;p.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};p.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};p.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};p.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+
d[1]*g;a[2]=b[2]+d[2]*g;return a};p.distance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(d*d+f*f+a*a)};p.dist=p.distance;p.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1];a=b[2]-a[2];return d*d+f*f+a*a};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];
a[2]=-b[2];return a};p.normalize=function(a,b){var d=b[0],f=b[1],E=b[2];d=d*d+f*f+E*E;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};p.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};p.cross=function(a,b,d){var f=b[0],E=b[1];b=b[2];var c=d[0],D=d[1];d=d[2];a[0]=E*d-b*D;a[1]=b*c-f*d;a[2]=f*D-E*c;return a};p.lerp=function(a,b,d,g){var f=b[0],c=b[1];b=b[2];a[0]=f+g*(d[0]-f);a[1]=c+g*(d[1]-c);a[2]=b+g*(d[2]-b);return a};p.random=function(a,b){b=b||1;var d=2*l()*Math.PI,
f=2*l()-1,E=Math.sqrt(1-f*f)*b;a[0]=Math.cos(d)*E;a[1]=Math.sin(d)*E;a[2]=f*b;return a};p.transformMat4=function(a,b,d){var f=b[0],E=b[1];b=b[2];a[0]=d[0]*f+d[4]*E+d[8]*b+d[12];a[1]=d[1]*f+d[5]*E+d[9]*b+d[13];a[2]=d[2]*f+d[6]*E+d[10]*b+d[14];return a};p.transformMat3=function(a,b,d){var f=b[0],E=b[1];b=b[2];a[0]=f*d[0]+E*d[3]+b*d[6];a[1]=f*d[1]+E*d[4]+b*d[7];a[2]=f*d[2]+E*d[5]+b*d[8];return a};p.transformQuat=function(a,b,d){var f=b[0],E=b[1],c=b[2];b=d[0];var D=d[1],e=d[2];d=d[3];var k=d*f+D*c-e*
E,h=d*E+e*f-b*c,n=d*c+b*E-D*f;f=-b*f-D*E-e*c;a[0]=k*d+f*-b+h*-e-n*-D;a[1]=h*d+f*-D+n*-b-k*-e;a[2]=n*d+f*-e+k*-D-h*-b;return a};p.rotateX=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];c[0]=f[0];c[1]=f[1]*Math.cos(g)-f[2]*Math.sin(g);c[2]=f[1]*Math.sin(g)+f[2]*Math.cos(g);a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.rotateY=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];c[0]=f[2]*Math.sin(g)+f[0]*Math.cos(g);c[1]=f[1];c[2]=f[2]*
Math.cos(g)-f[0]*Math.sin(g);a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.rotateZ=function(a,b,d,g){var f=[],c=[];f[0]=b[0]-d[0];f[1]=b[1]-d[1];f[2]=b[2]-d[2];c[0]=f[0]*Math.cos(g)-f[1]*Math.sin(g);c[1]=f[0]*Math.sin(g)+f[1]*Math.cos(g);c[2]=f[2];a[0]=c[0]+d[0];a[1]=c[1]+d[1];a[2]=c[2]+d[2];return a};p.forEach=function(){var a=p.create();return function(b,d,f,c,C,D){d||(d=3);f||(f=0);for(c=c?Math.min(c*d+f,b.length):b.length;f<c;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],C(a,a,D),b[f]=a[0],
b[f+1]=a[1],b[f+2]=a[2];return b}}();p.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof a&&(a.vec3=p);var q={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,g){var f=new e(4);f[0]=a;f[1]=b;f[2]=d;f[3]=g;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,d,g,c){a[0]=b;a[1]=d;a[2]=g;a[3]=c;return a},
add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};q.mul=q.multiply;q.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};q.div=q.divide;q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=
Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};q.scaleAndAdd=function(a,b,d,g){a[0]=b[0]+d[0]*g;a[1]=b[1]+d[1]*g;a[2]=b[2]+d[2]*g;a[3]=b[3]+d[3]*g;return a};q.distance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],c=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(d*d+f*f+c*c+a*a)};q.dist=q.distance;
q.squaredDistance=function(a,b){var d=b[0]-a[0],f=b[1]-a[1],c=b[2]-a[2];a=b[3]-a[3];return d*d+f*f+c*c+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],d=a[1],f=a[2];a=a[3];return Math.sqrt(b*b+d*d+f*f+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],d=a[1],f=a[2];a=a[3];return b*b+d*d+f*f+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};q.normalize=function(a,b){var d=b[0],f=b[1],c=b[2],C=b[3];d=d*d+f*f+c*c+C*C;
0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,b,d,g){var f=b[0],c=b[1],D=b[2];b=b[3];a[0]=f+g*(d[0]-f);a[1]=c+g*(d[1]-c);a[2]=D+g*(d[2]-D);a[3]=b+g*(d[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=l();a[1]=l();a[2]=l();a[3]=l();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,d){var f=b[0],c=b[1],C=b[2];b=b[3];a[0]=d[0]*f+d[4]*c+d[8]*C+d[12]*b;a[1]=d[1]*
f+d[5]*c+d[9]*C+d[13]*b;a[2]=d[2]*f+d[6]*c+d[10]*C+d[14]*b;a[3]=d[3]*f+d[7]*c+d[11]*C+d[15]*b;return a};q.transformQuat=function(a,b,d){var f=b[0],c=b[1],C=b[2];b=d[0];var D=d[1],e=d[2];d=d[3];var k=d*f+D*C-e*c,h=d*c+e*f-b*C,n=d*C+b*c-D*f;f=-b*f-D*c-e*C;a[0]=k*d+f*-b+h*-e-n*-D;a[1]=h*d+f*-D+n*-b-k*-e;a[2]=n*d+f*-e+k*-D-h*-b;return a};q.forEach=function(){var a=q.create();return function(b,d,f,c,C,D){d||(d=4);f||(f=0);for(c=c?Math.min(c*d+f,b.length):b.length;f<c;f+=d)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+
2],a[3]=b[f+3],C(a,a,D),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2],b[f+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.vec4=q);m={create:function(){var a=new e(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===
b){var d=b[1];a[1]=b[2];a[2]=d}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var d=b[0],f=b[1],c=b[2];b=b[3];var C=d*b-c*f;if(!C)return null;C=1/C;a[0]=b*C;a[1]=-f*C;a[2]=-c*C;a[3]=d*C;return a},adjoint:function(a,b){var d=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=d;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,d){var f=b[0],c=b[1],C=b[2];b=b[3];var D=d[0],e=d[1],k=d[2];d=d[3];a[0]=f*D+C*e;a[1]=c*D+b*e;a[2]=f*k+C*d;a[3]=c*k+b*d;return a}};
m.mul=m.multiply;m.rotate=function(a,b,d){var f=b[0],c=b[1],C=b[2];b=b[3];var D=Math.sin(d);d=Math.cos(d);a[0]=f*d+C*D;a[1]=c*d+b*D;a[2]=f*-D+C*d;a[3]=c*-D+b*d;return a};m.scale=function(a,b,d){var f=b[1],c=b[2],C=b[3],D=d[0];d=d[1];a[0]=b[0]*D;a[1]=f*D;a[2]=c*d;a[3]=C*d;return a};m.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};m.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};m.LDU=function(a,b,d,g){a[2]=g[2]/g[0];d[0]=
g[0];d[1]=g[1];d[3]=g[3]-a[2]*d[1];return[a,b,d]};"undefined"!==typeof a&&(a.mat2=m);m={create:function(){var a=new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new e(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var d=b[0],f=b[1],c=b[2],C=b[3],D=b[4];b=b[5];
var e=d*C-f*c;if(!e)return null;e=1/e;a[0]=C*e;a[1]=-f*e;a[2]=-c*e;a[3]=d*e;a[4]=(c*b-C*D)*e;a[5]=(f*D-d*b)*e;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,d){var f=b[0],c=b[1],C=b[2],D=b[3],e=b[4];b=b[5];var k=d[0],h=d[1],n=d[2],l=d[3],m=d[4];d=d[5];a[0]=f*k+C*h;a[1]=c*k+D*h;a[2]=f*n+C*l;a[3]=c*n+D*l;a[4]=f*m+C*d+e;a[5]=c*m+D*d+b;return a}};m.mul=m.multiply;m.rotate=function(a,b,d){var f=b[0],c=b[1],C=b[2],D=b[3],e=b[4];b=b[5];var k=Math.sin(d);d=Math.cos(d);
a[0]=f*d+C*k;a[1]=c*d+D*k;a[2]=f*-k+C*d;a[3]=c*-k+D*d;a[4]=e;a[5]=b;return a};m.scale=function(a,b,d){var f=b[1],c=b[2],C=b[3],D=b[4],e=b[5],k=d[0];d=d[1];a[0]=b[0]*k;a[1]=f*k;a[2]=c*d;a[3]=C*d;a[4]=D;a[5]=e;return a};m.translate=function(a,b,d){var f=b[0],c=b[1],C=b[2],D=b[3],e=b[4];b=b[5];var k=d[0];d=d[1];a[0]=f;a[1]=c;a[2]=C;a[3]=D;a[4]=f*k+C*d+e;a[5]=c*k+D*d+b;return a};m.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};m.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof a&&(a.mat2d=m);var r={create:function(){var a=new e(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new e(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,
b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],f=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=f;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var d=b[0],f=b[1],c=b[2],C=b[3],D=b[4],e=b[5],k=b[6],h=b[7];b=b[8];var n=
b*D-e*h,l=-b*C+e*k,m=h*C-D*k,t=d*n+f*l+c*m;if(!t)return null;t=1/t;a[0]=n*t;a[1]=(-b*f+c*h)*t;a[2]=(e*f-c*D)*t;a[3]=l*t;a[4]=(b*d-c*k)*t;a[5]=(-e*d+c*C)*t;a[6]=m*t;a[7]=(-h*d+f*k)*t;a[8]=(D*d-f*C)*t;return a},adjoint:function(a,b){var d=b[0],f=b[1],c=b[2],C=b[3],e=b[4],h=b[5],k=b[6],n=b[7];b=b[8];a[0]=e*b-h*n;a[1]=c*n-f*b;a[2]=f*h-c*e;a[3]=h*k-C*b;a[4]=d*b-c*k;a[5]=c*C-d*h;a[6]=C*n-e*k;a[7]=f*k-d*n;a[8]=d*e-f*C;return a},determinant:function(a){var b=a[3],d=a[4],f=a[5],c=a[6],C=a[7],e=a[8];return a[0]*
(e*d-f*C)+a[1]*(-e*b+f*c)+a[2]*(C*b-d*c)},multiply:function(a,b,d){var f=b[0],c=b[1],C=b[2],e=b[3],h=b[4],k=b[5],n=b[6],l=b[7];b=b[8];var m=d[0],t=d[1],p=d[2],q=d[3],u=d[4],v=d[5],r=d[6],w=d[7];d=d[8];a[0]=m*f+t*e+p*n;a[1]=m*c+t*h+p*l;a[2]=m*C+t*k+p*b;a[3]=q*f+u*e+v*n;a[4]=q*c+u*h+v*l;a[5]=q*C+u*k+v*b;a[6]=r*f+w*e+d*n;a[7]=r*c+w*h+d*l;a[8]=r*C+w*k+d*b;return a}};r.mul=r.multiply;r.translate=function(a,b,d){var f=b[0],c=b[1],C=b[2],e=b[3],h=b[4],k=b[5],n=b[6],l=b[7];b=b[8];var m=d[0];d=d[1];a[0]=f;
a[1]=c;a[2]=C;a[3]=e;a[4]=h;a[5]=k;a[6]=m*f+d*e+n;a[7]=m*c+d*h+l;a[8]=m*C+d*k+b;return a};r.rotate=function(a,b,d){var f=b[0],c=b[1],C=b[2],e=b[3],h=b[4],k=b[5],n=b[6],l=b[7];b=b[8];var m=Math.sin(d);d=Math.cos(d);a[0]=d*f+m*e;a[1]=d*c+m*h;a[2]=d*C+m*k;a[3]=d*e-m*f;a[4]=d*h-m*c;a[5]=d*k-m*C;a[6]=n;a[7]=l;a[8]=b;return a};r.scale=function(a,b,d){var f=d[0];d=d[1];a[0]=f*b[0];a[1]=f*b[1];a[2]=f*b[2];a[3]=d*b[3];a[4]=d*b[4];a[5]=d*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};r.fromMat2d=function(a,b){a[0]=
b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};r.fromQuat=function(a,b){var d=b[0],f=b[1],c=b[2];b=b[3];var C=d+d,e=f+f,h=c+c;d*=C;var k=f*C;f*=e;var n=c*C,l=c*e;c*=h;C*=b;e*=b;b*=h;a[0]=1-f-c;a[3]=k-b;a[6]=n+e;a[1]=k+b;a[4]=1-d-c;a[7]=l-C;a[2]=n-e;a[5]=l+C;a[8]=1-d-f;return a};r.normalFromMat4=function(a,b){var d=b[0],f=b[1],c=b[2],C=b[3],e=b[4],h=b[5],k=b[6],n=b[7],l=b[8],m=b[9],t=b[10],p=b[11],q=b[12],u=b[13],v=b[14];b=b[15];var r=d*h-f*e,w=d*k-c*e,A=d*n-
C*e,B=f*k-c*h,G=f*n-C*h,F=c*n-C*k,J=l*u-m*q,I=l*v-t*q;l=l*b-p*q;var H=m*v-t*u;m=m*b-p*u;t=t*b-p*v;p=r*t-w*m+A*H+B*l-G*I+F*J;if(!p)return null;p=1/p;a[0]=(h*t-k*m+n*H)*p;a[1]=(k*l-e*t-n*I)*p;a[2]=(e*m-h*l+n*J)*p;a[3]=(c*m-f*t-C*H)*p;a[4]=(d*t-c*l+C*I)*p;a[5]=(f*l-d*m-C*J)*p;a[6]=(u*F-v*G+b*B)*p;a[7]=(v*A-q*F-b*w)*p;a[8]=(q*G-u*A+b*r)*p;return a};r.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof a&&(a.mat3=r);var t={create:function(){var a=new e(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];
b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],g=b[2],f=b[3],c=b[6],e=b[7],h=b[11];a[1]=b[4];a[2]=
b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=g;a[9]=c;a[11]=b[14];a[12]=f;a[13]=e;a[14]=h}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var d=b[0],g=b[1],f=b[2],c=b[3],e=b[4],h=b[5],k=b[6],n=b[7],l=b[8],m=b[9],t=b[10],p=b[11],q=b[12],u=b[13],v=b[14];b=b[15];var r=d*h-g*e,w=d*k-f*e,A=d*n-c*e,B=g*k-f*h,G=g*n-c*h,F=f*n-c*k,J=l*u-m*q,I=l*
v-t*q,H=l*b-p*q,L=m*v-t*u,P=m*b-p*u,R=t*b-p*v,K=r*R-w*P+A*L+B*H-G*I+F*J;if(!K)return null;K=1/K;a[0]=(h*R-k*P+n*L)*K;a[1]=(f*P-g*R-c*L)*K;a[2]=(u*F-v*G+b*B)*K;a[3]=(t*G-m*F-p*B)*K;a[4]=(k*H-e*R-n*I)*K;a[5]=(d*R-f*H+c*I)*K;a[6]=(v*A-q*F-b*w)*K;a[7]=(l*F-t*A+p*w)*K;a[8]=(e*P-h*H+n*J)*K;a[9]=(g*H-d*P-c*J)*K;a[10]=(q*G-u*A+b*r)*K;a[11]=(m*A-l*G-p*r)*K;a[12]=(h*I-e*L-k*J)*K;a[13]=(d*L-g*I+f*J)*K;a[14]=(u*w-q*B-v*r)*K;a[15]=(l*B-m*w+t*r)*K;return a},adjoint:function(a,b){var d=b[0],g=b[1],c=b[2],f=b[3],
e=b[4],h=b[5],k=b[6],n=b[7],l=b[8],m=b[9],t=b[10],p=b[11],q=b[12],u=b[13],v=b[14];b=b[15];a[0]=h*(t*b-p*v)-m*(k*b-n*v)+u*(k*p-n*t);a[1]=-(g*(t*b-p*v)-m*(c*b-f*v)+u*(c*p-f*t));a[2]=g*(k*b-n*v)-h*(c*b-f*v)+u*(c*n-f*k);a[3]=-(g*(k*p-n*t)-h*(c*p-f*t)+m*(c*n-f*k));a[4]=-(e*(t*b-p*v)-l*(k*b-n*v)+q*(k*p-n*t));a[5]=d*(t*b-p*v)-l*(c*b-f*v)+q*(c*p-f*t);a[6]=-(d*(k*b-n*v)-e*(c*b-f*v)+q*(c*n-f*k));a[7]=d*(k*p-n*t)-e*(c*p-f*t)+l*(c*n-f*k);a[8]=e*(m*b-p*u)-l*(h*b-n*u)+q*(h*p-n*m);a[9]=-(d*(m*b-p*u)-l*(g*b-f*u)+
q*(g*p-f*m));a[10]=d*(h*b-n*u)-e*(g*b-f*u)+q*(g*n-f*h);a[11]=-(d*(h*p-n*m)-e*(g*p-f*m)+l*(g*n-f*h));a[12]=-(e*(m*v-t*u)-l*(h*v-k*u)+q*(h*t-k*m));a[13]=d*(m*v-t*u)-l*(g*v-c*u)+q*(g*t-c*m);a[14]=-(d*(h*v-k*u)-e*(g*v-c*u)+q*(g*k-c*h));a[15]=d*(h*t-k*m)-e*(g*t-c*m)+l*(g*k-c*h);return a},determinant:function(a){var b=a[0],d=a[1],g=a[2],c=a[3],f=a[4],e=a[5],h=a[6],k=a[7],n=a[8],l=a[9],m=a[10],t=a[11],p=a[12],v=a[13],u=a[14];a=a[15];return(b*e-d*f)*(m*a-t*u)-(b*h-g*f)*(l*a-t*v)+(b*k-c*f)*(l*u-m*v)+(d*h-
g*e)*(n*a-t*p)-(d*k-c*e)*(n*u-m*p)+(g*k-c*h)*(n*v-l*p)},multiply:function(a,b,d){var g=b[0],c=b[1],f=b[2],e=b[3],h=b[4],k=b[5],n=b[6],l=b[7],m=b[8],t=b[9],p=b[10],v=b[11],u=b[12],q=b[13],r=b[14];b=b[15];var w=d[0],A=d[1],B=d[2],G=d[3];a[0]=w*g+A*h+B*m+G*u;a[1]=w*c+A*k+B*t+G*q;a[2]=w*f+A*n+B*p+G*r;a[3]=w*e+A*l+B*v+G*b;w=d[4];A=d[5];B=d[6];G=d[7];a[4]=w*g+A*h+B*m+G*u;a[5]=w*c+A*k+B*t+G*q;a[6]=w*f+A*n+B*p+G*r;a[7]=w*e+A*l+B*v+G*b;w=d[8];A=d[9];B=d[10];G=d[11];a[8]=w*g+A*h+B*m+G*u;a[9]=w*c+A*k+B*t+G*
q;a[10]=w*f+A*n+B*p+G*r;a[11]=w*e+A*l+B*v+G*b;w=d[12];A=d[13];B=d[14];G=d[15];a[12]=w*g+A*h+B*m+G*u;a[13]=w*c+A*k+B*t+G*q;a[14]=w*f+A*n+B*p+G*r;a[15]=w*e+A*l+B*v+G*b;return a}};t.mul=t.multiply;t.translate=function(a,b,d){var g=d[0],c=d[1];d=d[2];if(b===a)a[12]=b[0]*g+b[4]*c+b[8]*d+b[12],a[13]=b[1]*g+b[5]*c+b[9]*d+b[13],a[14]=b[2]*g+b[6]*c+b[10]*d+b[14],a[15]=b[3]*g+b[7]*c+b[11]*d+b[15];else{var f=b[0];var e=b[1];var h=b[2];var k=b[3];var n=b[4];var l=b[5];var m=b[6];var t=b[7];var p=b[8];var v=b[9];
var u=b[10];var q=b[11];a[0]=f;a[1]=e;a[2]=h;a[3]=k;a[4]=n;a[5]=l;a[6]=m;a[7]=t;a[8]=p;a[9]=v;a[10]=u;a[11]=q;a[12]=f*g+n*c+p*d+b[12];a[13]=e*g+l*c+v*d+b[13];a[14]=h*g+m*c+u*d+b[14];a[15]=k*g+t*c+q*d+b[15]}return a};t.scale=function(a,b,d){var g=d[0],c=d[1];d=d[2];a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};t.rotate=function(a,b,d,g){var f=
g[0],e=g[1];g=g[2];var h=Math.sqrt(f*f+e*e+g*g);if(Math.abs(h)<c)return null;h=1/h;f*=h;e*=h;g*=h;var n=Math.sin(d);var k=Math.cos(d);var l=1-k;d=b[0];h=b[1];var m=b[2];var t=b[3];var p=b[4];var v=b[5];var u=b[6];var q=b[7];var w=b[8];var A=b[9];var r=b[10];var B=b[11];var O=f*f*l+k;var G=e*f*l+g*n;var F=g*f*l-e*n;var J=f*e*l-g*n;var I=e*e*l+k;var H=g*e*l+f*n;var L=f*g*l+e*n;f=e*g*l-f*n;e=g*g*l+k;a[0]=d*O+p*G+w*F;a[1]=h*O+v*G+A*F;a[2]=m*O+u*G+r*F;a[3]=t*O+q*G+B*F;a[4]=d*J+p*I+w*H;a[5]=h*J+v*I+A*H;
a[6]=m*J+u*I+r*H;a[7]=t*J+q*I+B*H;a[8]=d*L+p*f+w*e;a[9]=h*L+v*f+A*e;a[10]=m*L+u*f+r*e;a[11]=t*L+q*f+B*e;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};t.rotateX=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[4],f=b[5],e=b[6],h=b[7],k=b[8],n=b[9],l=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=c*d+k*g;a[5]=f*d+n*g;a[6]=e*d+l*g;a[7]=h*d+m*g;a[8]=k*d-c*g;a[9]=n*d-f*g;a[10]=l*d-e*g;a[11]=m*d-h*g;return a};
t.rotateY=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[0],f=b[1],e=b[2],h=b[3],k=b[8],n=b[9],l=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=c*d-k*g;a[1]=f*d-n*g;a[2]=e*d-l*g;a[3]=h*d-m*g;a[8]=c*g+k*d;a[9]=f*g+n*d;a[10]=e*g+l*d;a[11]=h*g+m*d;return a};t.rotateZ=function(a,b,d){var g=Math.sin(d);d=Math.cos(d);var c=b[0],f=b[1],e=b[2],h=b[3],k=b[4],n=b[5],l=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],
a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=c*d+k*g;a[1]=f*d+n*g;a[2]=e*d+l*g;a[3]=h*d+m*g;a[4]=k*d-c*g;a[5]=n*d-f*g;a[6]=l*d-e*g;a[7]=m*d-h*g;return a};t.fromRotationTranslation=function(a,b,d){var g=b[0],c=b[1],f=b[2],e=b[3],h=g+g,k=c+c,n=f+f;b=g*h;var l=g*k;g*=n;var m=c*k;c*=n;f*=n;h*=e;k*=e;e*=n;a[0]=1-(m+f);a[1]=l+e;a[2]=g-k;a[3]=0;a[4]=l-e;a[5]=1-(b+f);a[6]=c+h;a[7]=0;a[8]=g+k;a[9]=c-h;a[10]=1-(b+m);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};t.fromQuat=function(a,b){var d=
b[0],g=b[1],c=b[2];b=b[3];var f=d+d,e=g+g,h=c+c;d*=f;var k=g*f;g*=e;var n=c*f,l=c*e;c*=h;f*=b;e*=b;b*=h;a[0]=1-g-c;a[1]=k+b;a[2]=n-e;a[3]=0;a[4]=k-b;a[5]=1-d-c;a[6]=l+f;a[7]=0;a[8]=n+e;a[9]=l-f;a[10]=1-d-g;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};t.frustum=function(a,b,d,g,c,e,h){var f=1/(d-b),E=1/(c-g),C=1/(e-h);a[0]=2*e*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*e*E;a[6]=0;a[7]=0;a[8]=(d+b)*f;a[9]=(c+g)*E;a[10]=(h+e)*C;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*e*2*C;a[15]=0;return a};t.perspective=function(a,
b,d,g,c){b=1/Math.tan(b/2);var f=1/(g-c);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(c+g)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*c*g*f;a[15]=0;return a};t.ortho=function(a,b,d,g,c,e,h){var f=1/(b-d),E=1/(g-c),C=1/(e-h);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*E;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*C;a[11]=0;a[12]=(b+d)*f;a[13]=(c+g)*E;a[14]=(h+e)*C;a[15]=1;return a};t.lookAt=function(a,b,d,g){var f=b[0],e=b[1];b=b[2];var h=g[0];var n=g[1];var k=g[2];var l=d[0];g=
d[1];var m=d[2];if(Math.abs(f-l)<c&&Math.abs(e-g)<c&&Math.abs(b-m)<c)return t.identity(a);d=f-l;g=e-g;l=b-m;var p=1/Math.sqrt(d*d+g*g+l*l);d*=p;g*=p;l*=p;m=n*l-k*g;k=k*d-h*l;h=h*g-n*d;(p=Math.sqrt(m*m+k*k+h*h))?(p=1/p,m*=p,k*=p,h*=p):h=k=m=0;n=g*h-l*k;var v=l*m-d*h;var u=d*k-g*m;(p=Math.sqrt(n*n+v*v+u*u))?(p=1/p,n*=p,v*=p,u*=p):u=v=n=0;a[0]=m;a[1]=n;a[2]=d;a[3]=0;a[4]=k;a[5]=v;a[6]=g;a[7]=0;a[8]=h;a[9]=u;a[10]=l;a[11]=0;a[12]=-(m*f+k*e+h*b);a[13]=-(n*f+v*e+u*b);a[14]=-(d*f+g*e+l*b);a[15]=1;return a};
t.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],
2)+Math.pow(a[15],2))};"undefined"!==typeof a&&(a.mat4=t);var w={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};w.rotationTo=function(){var a=p.create(),b=p.fromValues(1,0,0),d=p.fromValues(0,1,0);return function(g,c,f){var e=p.dot(c,f);if(-.999999>e)return p.cross(a,b,c),1E-6>p.length(a)&&p.cross(a,d,c),p.normalize(a,a),w.setAxisAngle(g,a,Math.PI),g;if(.999999<e)return g[0]=0,g[1]=0,g[2]=0,g[3]=1,g;p.cross(a,c,f);g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=1+e;return w.normalize(g,
g)}}();w.setAxes=function(){var a=r.create();return function(b,d,g,c){a[0]=g[0];a[3]=g[1];a[6]=g[2];a[1]=c[0];a[4]=c[1];a[7]=c[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return w.normalize(b,w.fromMat3(b,a))}}();w.clone=q.clone;w.fromValues=q.fromValues;w.copy=q.copy;w.set=q.set;w.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};w.setAxisAngle=function(a,b,d){d*=.5;var g=Math.sin(d);a[0]=g*b[0];a[1]=g*b[1];a[2]=g*b[2];a[3]=Math.cos(d);return a};w.add=q.add;w.multiply=function(a,b,d){var g=b[0],
c=b[1],f=b[2];b=b[3];var e=d[0],h=d[1],k=d[2];d=d[3];a[0]=g*d+b*e+c*k-f*h;a[1]=c*d+b*h+f*e-g*k;a[2]=f*d+b*k+g*h-c*e;a[3]=b*d-g*e-c*h-f*k;return a};w.mul=w.multiply;w.scale=q.scale;w.rotateX=function(a,b,d){d*=.5;var g=b[0],c=b[1],f=b[2];b=b[3];var e=Math.sin(d);d=Math.cos(d);a[0]=g*d+b*e;a[1]=c*d+f*e;a[2]=f*d-c*e;a[3]=b*d-g*e;return a};w.rotateY=function(a,b,d){d*=.5;var g=b[0],c=b[1],e=b[2];b=b[3];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d-e*f;a[1]=c*d+b*f;a[2]=e*d+g*f;a[3]=b*d-c*f;return a};w.rotateZ=
function(a,b,d){d*=.5;var g=b[0],c=b[1],e=b[2];b=b[3];var f=Math.sin(d);d=Math.cos(d);a[0]=g*d+c*f;a[1]=c*d-g*f;a[2]=e*d+b*f;a[3]=b*d-e*f;return a};w.calculateW=function(a,b){var d=b[0],g=b[1];b=b[2];a[0]=d;a[1]=g;a[2]=b;a[3]=-Math.sqrt(Math.abs(1-d*d-g*g-b*b));return a};w.dot=q.dot;w.lerp=q.lerp;w.slerp=function(a,b,d,g){var c=b[0],e=b[1],f=b[2];b=b[3];var h=d[0],k=d[1],n=d[2];d=d[3];var l=c*h+e*k+f*n+b*d;0>l&&(l=-l,h=-h,k=-k,n=-n,d=-d);if(1E-6<1-l){var m=Math.acos(l);var p=Math.sin(m);l=Math.sin((1-
g)*m)/p;g=Math.sin(g*m)/p}else l=1-g;a[0]=l*c+g*h;a[1]=l*e+g*k;a[2]=l*f+g*n;a[3]=l*b+g*d;return a};w.invert=function(a,b){var d=b[0],g=b[1],c=b[2];b=b[3];var e=d*d+g*g+c*c+b*b;e=e?1/e:0;a[0]=-d*e;a[1]=-g*e;a[2]=-c*e;a[3]=b*e;return a};w.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};w.length=q.length;w.len=w.length;w.squaredLength=q.squaredLength;w.sqrLen=w.squaredLength;w.normalize=q.normalize;w.fromMat3=function(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=
.5*d,d=.5/d,a[0]=(b[7]-b[5])*d,a[1]=(b[2]-b[6])*d,a[2]=(b[3]-b[1])*d;else{var g=0;b[4]>b[0]&&(g=1);b[8]>b[3*g+g]&&(g=2);var c=(g+1)%3,e=(g+2)%3;d=Math.sqrt(b[3*g+g]-b[3*c+c]-b[3*e+e]+1);a[g]=.5*d;d=.5/d;a[3]=(b[3*e+c]-b[3*c+e])*d;a[c]=(b[3*c+g]+b[3*g+c])*d;a[e]=(b[3*e+g]+b[3*g+e])*d}return a};w.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.quat=w)})("undefined"===typeof m?"undefined"!==typeof window?window:a:m)})(this)},{}],23:[function(a,c,m){c.exports=
function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object");}},{}],24:[function(a,c,m){function l(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");}function h(a){if(p===setTimeout)return setTimeout(a,0);if((p===l||!p)&&setTimeout)return p=setTimeout,setTimeout(a,0);try{return p(a,0)}catch(d){try{return p.call(null,a,0)}catch(g){return p.call(this,a,0)}}}function n(a){if(q===clearTimeout)return clearTimeout(a);
if((q===e||!q)&&clearTimeout)return q=clearTimeout,clearTimeout(a);try{return q(a)}catch(d){try{return q.call(null,a)}catch(g){return q.call(this,a)}}}function u(){t&&w&&(t=!1,w.length?r=w.concat(r):f=-1,r.length&&v())}function v(){if(!t){var a=h(u);t=!0;for(var d=r.length;d;){w=r;for(r=[];++f<d;)w&&w[f].run();f=-1;d=r.length}w=null;t=!1;n(a)}}function B(a,d){this.fun=a;this.array=d}function A(){}a=c.exports={};try{var p="function"===typeof setTimeout?setTimeout:l}catch(b){p=l}try{var q="function"===
typeof clearTimeout?clearTimeout:e}catch(b){q=e}var r=[],t=!1,w,f=-1;a.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var g=1;g<arguments.length;g++)b[g-1]=arguments[g];r.push(new B(a,b));1!==r.length||t||h(v)};B.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=!0;a.env={};a.argv=[];a.version="";a.versions={};a.on=A;a.addListener=A;a.once=A;a.off=A;a.removeListener=A;a.removeAllListeners=A;a.emit=A;a.prependListener=A;a.prependOnceListener=
A;a.listeners=function(a){return[]};a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");};a.umask=function(){return 0}},{}],25:[function(a,c,m){(function(a){(function(){(function(a,h){"object"===typeof m&&"undefined"!==typeof c?c.exports=h():(a=a||self,function(){var c=a._,e=a._=h();e.noConflict=function(){a._=c;return e}}())})(this,function(){function c(a,b){b=null==b?a.length-1:+b;return function(){for(var d=
Math.max(arguments.length-b,0),c=Array(d),g=0;g<d;g++)c[g]=arguments[g+b];switch(b){case 0:return a.call(this,c);case 1:return a.call(this,arguments[0],c);case 2:return a.call(this,arguments[0],arguments[1],c)}d=Array(b+1);for(g=0;g<b;g++)d[g]=arguments[g];d[b]=c;return a.apply(this,d)}}function h(a){var b=typeof a;return"function"===b||"object"===b&&!!a}function n(a){return!0===a||!1===a||"[object Boolean]"===la.call(a)}function l(a){return function(b){return la.call(b)==="[object "+a+"]"}}function m(a,
b){return null!=a&&Ia.call(a,b)}function B(a){return Ja(a)&&ob(a)}function A(a){return function(){return a}}function p(a){return function(b){b=a(b);return"number"==typeof b&&0<=b&&b<=pb}}function q(a){return function(b){return null==b?void 0:b[a]}}function r(a){return Ka?Ka(a)&&!La(a):qb(a)&&rb.test(la.call(a))}function t(a){for(var b={},d=a.length,c=0;c<d;++c)b[a[c]]=!0;return{contains:function(a){return b[a]},push:function(d){b[d]=!0;return a.push(d)}}}function w(a,b){b=t(b);var d=Ma.length,c=a.constructor;
c=S(c)&&c.prototype||sa;var g="constructor";for(m(a,g)&&!b.contains(g)&&b.push(g);d--;)g=Ma[d],g in a&&a[g]!==c[g]&&!b.contains(g)&&b.push(g)}function f(a){if(!h(a))return[];if(Na)return Na(a);var b=[],d;for(d in a)m(a,d)&&b.push(d);Oa&&w(a,b);return b}function b(a,b){var d=f(b),c=d.length;if(null==a)return!c;a=Object(a);for(var g=0;g<c;g++){var e=d[g];if(b[e]!==a[e]||!(e in a))return!1}return!0}function d(a){if(a instanceof d)return a;if(!(this instanceof d))return new d(a);this._wrapped=a}function g(a,
b,d,c){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return!1;if(a!==a)return b!==b;var g=typeof a;return"function"!==g&&"object"!==g&&"object"!=typeof b?!1:E(a,b,d,c)}function E(a,b,c,e){a instanceof d&&(a=a._wrapped);b instanceof d&&(b=b._wrapped);var h=la.call(a);if(h!==la.call(b))return!1;switch(h){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===
+b;case "[object Symbol]":return Pa.valueOf.call(a)===Pa.valueOf.call(b);case "[object ArrayBuffer]":return E(new DataView(a),new DataView(b),c,e);case "[object DataView]":c=ta(a);if(c!==ta(b))return!1;for(;c--;)if(a.getUint8(c)!==b.getUint8(c))return!1;return!0}if(Qa(a))return E(new DataView(a.buffer),new DataView(b.buffer),c,e);h="[object Array]"===h;if(!h){if("object"!=typeof a||"object"!=typeof b)return!1;var k=a.constructor,l=b.constructor;if(k!==l&&!(S(k)&&k instanceof k&&S(l)&&l instanceof
l)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];e=e||[];for(k=c.length;k--;)if(c[k]===a)return e[k]===b;c.push(a);e.push(b);if(h){k=a.length;if(k!==b.length)return!1;for(;k--;)if(!g(a[k],b[k],c,e))return!1}else{h=f(a);k=h.length;if(f(b).length!==k)return!1;for(;k--;)if(l=h[k],!m(b,l)||!g(a[l],b[l],c,e))return!1}c.pop();e.pop();return!0}function C(a){if(!h(a))return[];var b=[],d;for(d in a)b.push(d);Oa&&w(a,b);return b}function D(a){for(var b=f(a),d=b.length,c=Array(d),g=0;g<d;g++)c[g]=a[b[g]];
return c}function ba(a){for(var b={},d=f(a),c=0,g=d.length;c<g;c++)b[a[d[c]]]=d[c];return b}function k(a){var b=[],d;for(d in a)S(a[d])&&b.push(d);return b.sort()}function M(a,b){return function(d){var c=arguments.length;b&&(d=Object(d));if(2>c||null==d)return d;for(var g=1;g<c;g++)for(var e=arguments[g],f=a(e),k=f.length,h=0;h<k;h++){var E=f[h];b&&void 0!==d[E]||(d[E]=e[E])}return d}}function na(){return function(){}}function ca(a){if(!h(a))return{};if(Sa)return Sa(a);var b=na();b.prototype=a;a=
new b;b.prototype=null;return a}function ia(a){return h(a)?T(a)?a.slice():Ta({},a):a}function da(a){return a}function V(a){a=oa({},a);return function(d){return b(d,a)}}function W(a,b){for(var d=b.length,c=0;c<d;c++){if(null==a)return;a=a[b[c]]}return d?a:void 0}function ja(a){return T(a)?function(b){return W(b,a)}:q(a)}function Z(a,b,d){if(void 0===b)return a;switch(null==d?3:d){case 1:return function(d){return a.call(b,d)};case 3:return function(d,c,g){return a.call(b,d,c,g)};case 4:return function(d,
c,g,e){return a.call(b,d,c,g,e)}}return function(){return a.apply(b,arguments)}}function ea(a,b,d){return null==a?da:S(a)?Z(a,b,d):h(a)&&!T(a)?V(a):ja(a)}function ka(a,b){return ea(a,b,Infinity)}function O(a,b,c){return d.iteratee!==ka?d.iteratee(a,b):ea(a,b,c)}function G(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))}function F(a){var b=function(b){return a[b]},d="(?:"+f(a).join("|")+")",c=RegExp(d),g=RegExp(d,"g");return function(a){a=null==a?"":""+a;return c.test(a)?a.replace(g,
b):a}}function J(a){return"\\"+sb[a]}function I(a,b,d,c,g){if(!(c instanceof b))return a.apply(d,g);b=ca(a.prototype);a=a.apply(b,g);return h(a)?a:b}function H(a,b,d,c){c=c||[];if(!b&&0!==b)b=Infinity;else if(0>=b)return c.concat(a);for(var g=c.length,e=0,f=U(a);e<f;e++){var k=a[e];if(Q(k)&&(T(k)||ua(k)))if(1<b)H(k,b-1,d,c),g=c.length;else for(var h=0,E=k.length;h<E;)c[g++]=k[h++];else d||(c[g++]=k)}return c}function L(a){return function(){return!a.apply(this,arguments)}}function P(a,b){var d;return function(){0<
--a&&(d=b.apply(this,arguments));1>=a&&(b=null);return d}}function R(a,b,d){b=O(b,d);d=f(a);for(var c,g=0,e=d.length;g<e;g++)if(c=d[g],b(a[c],c,a))return c}function K(a){return function(b,d,c){d=O(d,c);c=U(b);for(var g=0<a?0:c-1;0<=g&&g<c;g+=a)if(d(b[g],g,b))return g;return-1}}function N(a,b,d,c){d=O(d,c,1);b=d(b);c=0;for(var g=U(a);c<g;){var e=Math.floor((c+g)/2);d(a[e])<b?c=e+1:g=e}return c}function Ua(a,b,d){return function(c,g,e){var f=0,k=U(c);if("number"==typeof e)0<a?f=0<=e?e:Math.max(e+k,
f):k=0<=e?Math.min(e+1,k):e+k+1;else if(d&&e&&k)return e=d(c,g),c[e]===g?e:-1;if(g!==g)return e=b(ma.call(c,f,k),B),0<=e?e+f:-1;for(e=0<a?f:k-1;0<=e&&e<k;e+=a)if(c[e]===g)return e;return-1}}function va(a,b,d){b=(Q(a)?wa:R)(a,b,d);if(void 0!==b&&-1!==b)return a[b]}function X(a,b,d){b=Z(b,d);var c;if(Q(a))for(d=0,c=a.length;d<c;d++)b(a[d],d,a);else{var g=f(a);d=0;for(c=g.length;d<c;d++)b(a[g[d]],g[d],a)}return a}function aa(a,b,d){b=O(b,d);d=!Q(a)&&f(a);for(var c=(d||a).length,g=Array(c),e=0;e<c;e++){var k=
d?d[e]:e;g[e]=b(a[k],k,a)}return g}function Va(a){return function(b,d,c,g){var e=3<=arguments.length,k=Z(d,g,4),h=c,E=!Q(b)&&f(b),l=(E||b).length,n=0<a?0:l-1;e||(h=b[E?E[n]:n],n+=a);for(;0<=n&&n<l;n+=a)e=E?E[n]:n,h=k(h,b[e],e,b);return h}}function fa(a,b,d){var c=[];b=O(b,d);X(a,function(a,d,g){b(a,d,g)&&c.push(a)});return c}function Wa(a,b,d){b=O(b,d);d=!Q(a)&&f(a);for(var c=(d||a).length,g=0;g<c;g++){var e=d?d[g]:g;if(!b(a[e],e,a))return!1}return!0}function Xa(a,b,d){b=O(b,d);d=!Q(a)&&f(a);for(var c=
(d||a).length,g=0;g<c;g++){var e=d?d[g]:g;if(b(a[e],e,a))return!0}return!1}function Y(a,b,d,c){Q(a)||(a=D(a));if("number"!=typeof d||c)d=0;return 0<=Ya(a,b,d)}function xa(a,b){return aa(a,ja(b))}function Za(a,b,d){var c=-Infinity,g=-Infinity,e;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=Q(a)?a:D(a);for(var f=0,k=a.length;f<k;f++)d=a[f],null!=d&&d>c&&(c=d)}else b=O(b,d),X(a,function(a,d,f){e=b(a,d,f);if(e>g||-Infinity===e&&-Infinity===c)c=a,g=e});return c}function $a(a,b,d){if(null==
b||d)return Q(a)||(a=D(a)),a[G(a.length-1)];a=Q(a)?ia(a):D(a);d=U(a);b=Math.max(Math.min(b,d),0);--d;for(var c=0;c<b;c++){var g=G(c,d),e=a[c];a[c]=a[g];a[g]=e}return a.slice(0,b)}function pa(a,b){return function(d,c,g){var e=b?[[],[]]:{};c=O(c,g);X(d,function(b,g){g=c(b,g,d);a(e,b,g)});return e}}function tb(a,b,d){return b in d}function ab(a,b,d){return ma.call(a,0,Math.max(0,a.length-(null==b||d?1:b)))}function ya(a,b,d){return null==a||1>a.length?null==b||d?void 0:[]:null==b||d?a[0]:ab(a,a.length-
b)}function qa(a,b,d){return ma.call(a,null==b||d?1:b)}function za(a,b,d,c){n(b)||(c=d,d=b,b=!1);null!=d&&(d=O(d,c));c=[];for(var g=[],e=0,f=U(a);e<f;e++){var k=a[e],h=d?d(k,e,a):k;b&&!d?(e&&g===h||c.push(k),g=h):d?Y(g,h)||(g.push(h),c.push(k)):Y(c,k)||c.push(k)}return c}function Aa(a){for(var b=a&&Za(a,U).length||0,d=Array(b),c=0;c<b;c++)d[c]=xa(a,c);return d}function Ba(a,b){return a._chain?d(b).chain():b}function bb(a){X(k(a),function(b){var c=d[b]=a[b];d.prototype[b]=function(){var a=[this._wrapped];
ub.apply(a,arguments);return Ba(this,c.apply(d,a))}});return d}var cb="object"==typeof self&&self.self===self&&self||"object"==typeof a&&a.global===a&&a||Function("return this")()||{},ra=Array.prototype,sa=Object.prototype,Pa="undefined"!==typeof Symbol?Symbol.prototype:null,ub=ra.push,ma=ra.slice,la=sa.toString,Ia=sa.hasOwnProperty,db="undefined"!==typeof ArrayBuffer,vb=Array.isArray,Na=Object.keys,Sa=Object.create,Ka=db&&ArrayBuffer.isView,ob=isNaN,wb=isFinite,Oa=!{toString:null}.propertyIsEnumerable("toString"),
Ma="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" "),pb=Math.pow(2,53)-1,Ca=l("String"),Ja=l("Number"),xb=l("Date"),yb=l("RegExp"),zb=l("Error"),eb=l("Symbol"),Ab=l("Map"),Bb=l("WeakMap"),Cb=l("Set"),Db=l("WeakSet"),Eb=l("ArrayBuffer"),La=l("DataView"),T=vb||l("Array"),fb=l("Function"),Fb=cb.document&&cb.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof Fb&&(fb=function(a){return"function"==typeof a||!1});var S=fb,
Da=l("Arguments");(function(){Da(arguments)||(Da=function(a){return m(a,"callee")})})();var ua=Da,ta=q("byteLength"),qb=p(ta),rb=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,Qa=db?r:A(!1),U=q("length"),Q=p(U);d.VERSION="1.11.0";d.prototype.value=function(){return this._wrapped};d.prototype.valueOf=d.prototype.toJSON=d.prototype.value;d.prototype.toString=function(){return String(this._wrapped)};var Ta=M(C),oa=M(f),gb=M(C,!0);d.iteratee=ka;var Ea=Date.now||function(){return(new Date).getTime()},
hb={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Gb=F(hb),Hb=ba(hb),Ib=F(Hb),Jb=d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Fa=/(.)^/,sb={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Kb=/\\|'|\r|\n|\u2028|\u2029/g,Lb=0,ha=c(function(a,b){var d=ha.placeholder,c=function(){for(var g=0,e=b.length,f=Array(e),k=0;k<e;k++)f[k]=b[k]===d?arguments[g++]:b[k];for(;g<arguments.length;)f.push(arguments[g++]);
return I(a,c,this,this,f)};return c});ha.placeholder=d;var ib=c(function(a,b,d){if(!S(a))throw new TypeError("Bind must be called on a function");var g=c(function(c){return I(a,g,b,this,d.concat(c))});return g}),Mb=c(function(a,b){b=H(b,!1,!1);var d=b.length;if(1>d)throw Error("bindAll must be passed function names");for(;d--;){var c=b[d];a[c]=ib(a[c],a)}return a}),Ga=c(function(a,b,d){return setTimeout(function(){return a.apply(null,d)},b)}),Nb=ha(Ga,d,1),Ob=ha(P,2),wa=K(1),jb=K(-1),Ya=Ua(1,wa,N),
Pb=Ua(-1,jb),Ha=Va(1),kb=Va(-1),Qb=c(function(a,b,d){if(S(b))var c=b;else if(T(b)){var g=b.slice(0,-1);b=b[b.length-1]}return aa(a,function(a){var e=c;if(!e){g&&g.length&&(a=W(a,g));if(null==a)return;e=a[b]}return null==e?e:e.apply(a,d)})}),Rb=pa(function(a,b,d){m(a,d)?a[d].push(b):a[d]=[b]}),Sb=pa(function(a,b,d){a[d]=b}),Tb=pa(function(a,b,d){m(a,d)?a[d]++:a[d]=1}),Ub=pa(function(a,b,d){a[d?0:1].push(b)},!0),Vb=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,lb=c(function(a,b){var d=
{},c=b[0];if(null==a)return d;S(c)?(1<b.length&&(c=Z(c,b[1])),b=C(a)):(c=tb,b=H(b,!1,!1),a=Object(a));for(var g=0,e=b.length;g<e;g++){var f=b[g],k=a[f];c(k,f,a)&&(d[f]=k)}return d}),Wb=c(function(a,b){var d=b[0],c;S(d)?(d=L(d),1<b.length&&(c=b[1])):(b=aa(H(b,!1,!1),String),d=function(a,d){return!Y(b,d)});return lb(a,d,c)}),mb=c(function(a,b){b=H(b,!0,!0);return fa(a,function(a){return!Y(b,a)})}),Xb=c(function(a,b){return mb(a,b)}),Yb=c(function(a){return za(H(a,!0,!0))}),Zb=c(Aa);X("pop push reverse shift sort splice unshift".split(" "),
function(a){var b=ra[a];d.prototype[a]=function(){var d=this._wrapped;null!=d&&(b.apply(d,arguments),"shift"!==a&&"splice"!==a||0!==d.length||delete d[0]);return Ba(this,d)}});X(["concat","join","slice"],function(a){var b=ra[a];d.prototype[a]=function(){var a=this._wrapped;null!=a&&(a=b.apply(a,arguments));return Ba(this,a)}});var nb=bb({__proto__:null,VERSION:"1.11.0",restArguments:c,isObject:h,isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:n,isElement:function(a){return!(!a||
1!==a.nodeType)},isString:Ca,isNumber:Ja,isDate:xb,isRegExp:yb,isError:zb,isSymbol:eb,isMap:Ab,isWeakMap:Bb,isSet:Cb,isWeakSet:Db,isArrayBuffer:Eb,isDataView:La,isArray:T,isFunction:S,isArguments:ua,isFinite:function(a){return!eb(a)&&wb(a)&&!isNaN(parseFloat(a))},isNaN:B,isTypedArray:Qa,isEmpty:function(a){return null==a?!0:Q(a)&&(T(a)||Ca(a)||ua(a))?0===a.length:0===f(a).length},isMatch:b,isEqual:function(a,b){return g(a,b)},keys:f,allKeys:C,values:D,pairs:function(a){for(var b=f(a),d=b.length,c=
Array(d),g=0;g<d;g++)c[g]=[b[g],a[b[g]]];return c},invert:ba,functions:k,methods:k,extend:Ta,extendOwn:oa,assign:oa,defaults:gb,create:function(a,b){a=ca(a);b&&oa(a,b);return a},clone:ia,tap:function(a,b){b(a);return a},has:function(a,b){if(!T(b))return m(a,b);for(var d=b.length,c=0;c<d;c++){var g=b[c];if(null==a||!Ia.call(a,g))return!1;a=a[g]}return!!d},mapObject:function(a,b,d){b=O(b,d);d=f(a);for(var c=d.length,g={},e=0;e<c;e++){var k=d[e];g[k]=b(a[k],k,a)}return g},identity:da,constant:A,noop:function(){},
property:ja,propertyOf:function(a){return null==a?function(){}:function(b){return T(b)?W(a,b):a[b]}},matcher:V,matches:V,times:function(a,b,d){var c=Array(Math.max(0,a));b=Z(b,d,1);for(d=0;d<a;d++)c[d]=b(d);return c},random:G,now:Ea,escape:Gb,unescape:Ib,templateSettings:Jb,template:function(a,b,c){!b&&c&&(b=c);b=gb({},b,d.templateSettings);c=RegExp([(b.escape||Fa).source,(b.interpolate||Fa).source,(b.evaluate||Fa).source].join("|")+"|$","g");var g=0,e="__p+='";a.replace(c,function(b,d,c,f,k){e+=
a.slice(g,k).replace(Kb,J);g=k+b.length;d?e+="'+\n((__t=("+d+"))==null?'':_.escape(__t))+\n'":c?e+="'+\n((__t=("+c+"))==null?'':__t)+\n'":f&&(e+="';\n"+f+"\n__p+='");return b});e+="';\n";b.variable||(e="with(obj||{}){\n"+e+"}\n");e="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+e+"return __p;\n";try{var f=new Function(b.variable||"obj","_",e)}catch(Ra){throw Ra.source=e,Ra;}c=function(a){return f.call(this,a,d)};c.source="function("+(b.variable||"obj")+
"){\n"+e+"}";return c},result:function(a,b,d){T(b)||(b=[b]);var c=b.length;if(!c)return S(d)?d.call(a):d;for(var g=0;g<c;g++){var e=null==a?void 0:a[b[g]];void 0===e&&(e=d,g=c);a=S(e)?e.call(a):e}return a},uniqueId:function(a){var b=++Lb+"";return a?a+b:b},chain:function(a){a=d(a);a._chain=!0;return a},iteratee:ka,partial:ha,bind:ib,bindAll:Mb,memoize:function(a,b){var d=function(c){var g=d.cache,e=""+(b?b.apply(this,arguments):c);m(g,e)||(g[e]=a.apply(this,arguments));return g[e]};d.cache={};return d},
delay:Ga,defer:Nb,throttle:function(a,b,d){var c,g,e,f,k=0;d||(d={});var h=function(){k=!1===d.leading?0:Ea();c=null;f=a.apply(g,e);c||(g=e=null)},E=function(){var E=Ea();k||!1!==d.leading||(k=E);var l=b-(E-k);g=this;e=arguments;0>=l||l>b?(c&&(clearTimeout(c),c=null),k=E,f=a.apply(g,e),c||(g=e=null)):c||!1===d.trailing||(c=setTimeout(h,l));return f};E.cancel=function(){clearTimeout(c);k=0;c=g=e=null};return E},debounce:function(a,b,d){var g,e,f=function(b,d){g=null;d&&(e=a.apply(b,d))},k=c(function(c){g&&
clearTimeout(g);if(d){var k=!g;g=setTimeout(f,b);k&&(e=a.apply(this,c))}else g=Ga(f,b,this,c);return e});k.cancel=function(){clearTimeout(g);g=null};return k},wrap:function(a,b){return ha(b,a)},negate:L,compose:function(){var a=arguments,b=a.length-1;return function(){for(var d=b,c=a[b].apply(this,arguments);d--;)c=a[d].call(this,c);return c}},after:function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}},before:P,once:Ob,findKey:R,findIndex:wa,findLastIndex:jb,sortedIndex:N,indexOf:Ya,
lastIndexOf:Pb,find:va,detect:va,findWhere:function(a,b){return va(a,V(b))},each:X,forEach:X,map:aa,collect:aa,reduce:Ha,foldl:Ha,inject:Ha,reduceRight:kb,foldr:kb,filter:fa,select:fa,reject:function(a,b,d){return fa(a,L(O(b)),d)},every:Wa,all:Wa,some:Xa,any:Xa,contains:Y,includes:Y,include:Y,invoke:Qb,pluck:xa,where:function(a,b){return fa(a,V(b))},max:Za,min:function(a,b,d){var c=Infinity,g=Infinity,e;if(null==b||"number"==typeof b&&"object"!=typeof a[0]&&null!=a){a=Q(a)?a:D(a);for(var f=0,k=a.length;f<
k;f++)d=a[f],null!=d&&d<c&&(c=d)}else b=O(b,d),X(a,function(a,d,f){e=b(a,d,f);if(e<g||Infinity===e&&Infinity===c)c=a,g=e});return c},shuffle:function(a){return $a(a,Infinity)},sample:$a,sortBy:function(a,b,d){var c=0;b=O(b,d);return xa(aa(a,function(a,d,g){return{value:a,index:c++,criteria:b(a,d,g)}}).sort(function(a,b){var d=a.criteria,c=b.criteria;if(d!==c){if(d>c||void 0===d)return 1;if(d<c||void 0===c)return-1}return a.index-b.index}),"value")},groupBy:Rb,indexBy:Sb,countBy:Tb,partition:Ub,toArray:function(a){return a?
T(a)?ma.call(a):Ca(a)?a.match(Vb):Q(a)?aa(a,da):D(a):[]},size:function(a){return null==a?0:Q(a)?a.length:f(a).length},pick:lb,omit:Wb,first:ya,head:ya,take:ya,initial:ab,last:function(a,b,d){return null==a||1>a.length?null==b||d?void 0:[]:null==b||d?a[a.length-1]:qa(a,Math.max(0,a.length-b))},rest:qa,tail:qa,drop:qa,compact:function(a){return fa(a,Boolean)},flatten:function(a,b){return H(a,b,!1)},without:Xb,uniq:za,unique:za,union:Yb,intersection:function(a){for(var b=[],d=arguments.length,c=0,g=
U(a);c<g;c++){var e=a[c];if(!Y(b,e)){var f;for(f=1;f<d&&Y(arguments[f],e);f++);f===d&&b.push(e)}}return b},difference:mb,unzip:Aa,transpose:Aa,zip:Zb,object:function(a,b){for(var d={},c=0,g=U(a);c<g;c++)b?d[a[c]]=b[c]:d[a[c][0]]=a[c][1];return d},range:function(a,b,d){null==b&&(b=a||0,a=0);d||(d=b<a?-1:1);b=Math.max(Math.ceil((b-a)/d),0);for(var c=Array(b),g=0;g<b;g++,a+=d)c[g]=a;return c},chunk:function(a,b){if(null==b||1>b)return[];for(var d=[],c=0,g=a.length;c<g;)d.push(ma.call(a,c,c+=b));return d},
mixin:bb,"default":d});return nb._=nb})}).call(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[13])(13)});var CindyLeap=function(a){function c(a,c){var e,h;for(e in a)(h=c[e])?h(l(a[e])):console.log("Modifier "+e+" not supported")}var m=a.nada,l=a.evaluate,e=a.defineFunction;e("initleapmotion",0,function(e,l){var h=!1;c(l,{enablegestures:function(a){return h=coerce.toBool(a,!1)},usehandtransformcdy3d:function(a){return setManipulateSceneTransformActive(coerce.toBool(a,!1))},rotationfactor:function(a){return setLeapMotionRotationFactor(coerce.toReal(a,2))},translationfactor:function(a){return setLeapMotionTranslationFactor(coerce.toReal(a,
1))}});initLeapMotion(a,h);return m});e("leapdebugprinthands",0,function(a,c){a=getLeapHandsData();0<a.length&&console.log(a);return m});e("leapdebugprintgestures",0,function(a,c){a=getLeapGestureData();0<a.length&&console.log(a);return m});e("leapnormalizeposition",1,function(c,e){c=a.evaluate(c[0]).value;c=leapNormalizePosition([c[0].value.real,c[1].value.real,c[2].value.real]);return nestedArrayToCSList(c)});e("getleaphandsdata",0,function(a,c){a=new Set(["frame"]);c=getLeapHandsData();return convertObjectToCindyDict(c,
a,new Map)});e("getleapgesturedata",0,function(a,c){a=new Set(["frame"]);c=getLeapGestureData();return convertObjectToCindyDict(c,a,new Map)});e("getleapmotionmodelmatrix",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([[a[0],a[1],a[2],a[3]],[a[4],a[5],a[6],a[7]],[a[8],a[9],a[10],a[11]],[a[12],a[13],a[14],a[15]]])});e("getleapmotionrotationmatrix",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([[a[0],a[1],a[2]],[a[4],a[5],a[6]],[a[8],a[9],a[10]]])});
e("getleapmotiontranslationvector",0,function(a,c){a=getLeapMotionModelMatrix();return nestedArrayToCSList([a[3]+1E-6,a[7],a[11]])});e("getleapmotiontransformhaschanged",0,function(a,c){return{ctype:"boolean",value:getLeapMotionTransformHasChanged()}})};CindyLeap.leapPreRender=leapPreRender;CindyLeap.leapPostRender=leapPostRender;CindyJS.registerPlugin(1,"CindyLeap",CindyLeap);var modelMatrixTmp,mvMatrixTmp,leapMotionModelMatrixInternal=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],leapMotionRotationMatrixInternal=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],leapMotionTransformHasChanged=!1,leapMotionRotationFactor=2,leapMotionTranslationFactor=1,lastLeapFrame=null,manipulateSceneTransformActive=!1,gesturesEnabled=!1;
function leapPreRender(a){if(manipulateSceneTransformActive){modelMatrixTmp=a.modelMatrix.slice();mvMatrixTmp=a.mvMatrix.slice();var c=getLeapMotionModelMatrix();a.modelMatrix=mul4mm(c,a.modelMatrix);a.mvMatrix=mul4mm(a.viewMatrix,a.modelMatrix)}}function leapPostRender(a){manipulateSceneTransformActive&&(a.modelMatrix=modelMatrixTmp.slice(),a.mvMatrix=mvMatrixTmp.slice())}
function initLeapMotion(a,c){gesturesEnabled=c;var m=new Leap.Controller({enableGestures:c});m.on("frame",function(c){onLeapMotionControllerFrame(a,m,c)});m.connect()}
function onLeapMotionControllerFrame(a,c,m){if(0<m.hands.length){lastLeapFrame=m;var l=m.hands[0];c=c.frame(1);l.rotationMatrix(c);m=m.interactionBox.normalizePoint(l.palmPosition,!0);c=l.palmNormal;var e=l.direction;c=[c[1]*e[2]-c[2]*e[1],c[2]*e[0]-c[0]*e[2],c[0]*e[1]-c[1]*e[0]];leapMotionRotationMatrixInternal=[c[0],c[1],c[2],0,l.palmNormal[0],l.palmNormal[1],l.palmNormal[2],0,l.direction[0],l.direction[1],l.direction[2],0,0,0,0,1];leapMotionRotationMatrixInternal=transpose4(mul4mm([1,0,0,0,0,-1,
0,0,0,0,-1,0,0,0,0,1],leapMotionRotationMatrixInternal));2==leapMotionRotationFactor?leapMotionRotationMatrixInternal=mul4mm(leapMotionRotationMatrixInternal,leapMotionRotationMatrixInternal):1!=leapMotionRotationFactor&&(l=axisAngleFromRotationMatrix(leapMotionRotationMatrixInternal),leapMotionRotationMatrixInternal=rotationMatrixFromAxisAngle(l[0],leapMotionRotationFactor*l[1]));leapMotionModelMatrixInternal=leapMotionRotationMatrixInternal.slice();leapMotionModelMatrixInternal[3]=leapMotionTranslationFactor*
(2*m[0]-1);leapMotionModelMatrixInternal[7]=leapMotionTranslationFactor*(2*m[1]-1);leapMotionModelMatrixInternal[11]=leapMotionTranslationFactor*(2*m[2]-1);leapMotionTransformHasChanged=!0;a.scheduleUpdate()}}function setManipulateSceneTransformActive(a){manipulateSceneTransformActive=a}function getLeapHandsData(){return null!=lastLeapFrame?lastLeapFrame.hands:[]}function getLeapGestureData(){return null!=lastLeapFrame&&gesturesEnabled?lastLeapFrame.gestures:[]}
function leapNormalizePosition(a){return null!=lastLeapFrame?(a=lastLeapFrame.interactionBox.normalizePoint(a,!0),[leapMotionTranslationFactor*(2*a[0]-1),leapMotionTranslationFactor*(2*a[1]-1),leapMotionTranslationFactor*(2*a[2]-1)]):a}function rotationMatrixFromAxisAngle(a,c){var m=Math.sin(c);c=Math.cos(c);var l=1-c;return[c+a[0]*a[0]*l,a[0]*a[1]*l-a[2]*m,a[0]*a[2]*l+a[1]*m,0,a[1]*a[0]*l+a[2]*m,c+a[1]*a[1]*l,a[1]*a[2]*l-a[0]*m,0,a[2]*a[0]*l-a[1]*m,a[2]*a[1]*l+a[0]*m,c+a[2]*a[2]*l,0,0,0,0,1]}
function axisAngleFromRotationMatrix(a){var c=function(a){return a*a};if(.001>Math.abs(a[1]-a[4])&&.001>Math.abs(a[2]-a[8])&&.001>Math.abs(a[6]-a[9])){if(.001>Math.abs(a[1]+a[4])&&.01>Math.abs(a[2]+a[8])&&.01>Math.abs(a[6]+a[9])&&.01>Math.abs(a[0]+a[5]+a[10]-3))return[[1,0,0],0];c=(a[0]+1)/2;var m=(a[5]+1)/2,l=(a[10]+1)/2,e=(a[1]+a[4])/4,h=(a[2]+a[8])/4;a=(a[6]+a[9])/4;var n=1/Math.sqrt(2);c>m&&c>l?.001>c?(x=0,z=y=n):(x=Math.sqrt(c),y=e/x,z=h/x):m>l?.001>m?(x=n,y=0,z=n):(y=Math.sqrt(m),x=e/y,z=a/
y):.001>l?(y=x=n,z=0):(z=Math.sqrt(l),x=h/z,y=a/z);return[[0,0,0],Math.PI]}c=Math.sqrt(c(a[9]-a[6])+c(a[2]-a[8])+c(a[4]-a[1]));return[[(a[9]-a[6])/c,(a[2]-a[8])/c,(a[4]-a[1])/c],Math.acos((a[0]+a[5]+a[10]-1)/2)]}function getLeapMotionModelMatrix(){return leapMotionModelMatrixInternal}function getLeapMotionTransformHasChanged(){return leapMotionTransformHasChanged?(leapMotionTransformHasChanged=!1,!0):!1}function setLeapMotionRotationFactor(a){leapMotionRotationFactor=a}
function setLeapMotionTranslationFactor(a){leapMotionTranslationFactor=a};/*
 LeapJS v0.6.4                                                  
 http://github.com/leapmotion/leapjs/                                        

 Copyright 2013 LeapMotion, Inc. and other contributors                      
 Released under the Apache-2.0 license                                     
 http://github.com/leapmotion/leapjs/blob/master/LICENSE.txt                 
*/
(function(a,c,m){function l(h,m){if(!c[h]){if(!a[h]){var n="function"==typeof require&&require;if(!m&&n)return n(h,!0);if(e)return e(h,!0);throw Error("Cannot find module '"+h+"'");}m=c[h]={exports:{}};a[h][0].call(m.exports,function(c){var e=a[h][1][c];return l(e?e:c)},m,m.exports)}return c[h].exports}for(var e="function"==typeof require&&require,h=0;h<m.length;h++)l(m[h]);return l})({1:[function(a,c,m){a("./pointable");m=a("gl-matrix");var l=m.vec3,e=m.mat3,h=m.mat4;a("underscore");a=c.exports=
function(a,c){this.finger=a;this._matrix=this._center=null;this.type=c.type;this.prevJoint=c.prevJoint;this.nextJoint=c.nextJoint;this.width=c.width;a=Array(3);l.sub(a,c.nextJoint,c.prevJoint);this.length=l.length(a);this.basis=c.basis};a.prototype.left=function(){return this._left?this._left:this._left=0>e.determinant(this.basis[0].concat(this.basis[1]).concat(this.basis[2]))};a.prototype.matrix=function(){if(this._matrix)return this._matrix;var a=this.basis,c=this._matrix=h.create();c[0]=a[0][0];
c[1]=a[0][1];c[2]=a[0][2];c[4]=a[1][0];c[5]=a[1][1];c[6]=a[1][2];c[8]=a[2][0];c[9]=a[2][1];c[10]=a[2][2];c[3]=this.center()[0];c[7]=this.center()[1];c[11]=this.center()[2];this.left()&&(c[0]*=-1,c[1]*=-1,c[2]*=-1);return this._matrix};a.prototype.lerp=function(a,c){l.lerp(a,this.prevJoint,this.nextJoint,c)};a.prototype.center=function(){if(this._center)return this._center;var a=l.create();this.lerp(a,.5);return this._center=a};a.prototype.direction=function(){return[-1*this.basis[2][0],-1*this.basis[2][1],
-1*this.basis[2][2]]}},{"./pointable":14,"gl-matrix":23,underscore:24}],2:[function(a,c,m){a=c.exports=function(a){this.pos=0;this._buf=[];this.size=a};a.prototype.get=function(a){void 0==a&&(a=0);if(!(a>=this.size||a>=this._buf.length))return this._buf[(this.pos-a-1)%this.size]};a.prototype.push=function(a){this._buf[this.pos%this.size]=a;return this.pos++}},{}],3:[function(a,c,m){var l=a("../protocol").chooseProtocol;m=a("events").EventEmitter;var e=a("underscore"),h=c.exports=function(a){this.opts=
e.defaults(a||{},{host:"127.0.0.1",enableGestures:!1,scheme:this.getScheme(),port:this.getPort(),background:!1,optimizeHMD:!1,requestProtocolVersion:h.defaultProtocolVersion});this.host=this.opts.host;this.port=this.opts.port;this.scheme=this.opts.scheme;this.protocolVersionVerified=!1;this.optimizeHMD=this.background=null;this.on("ready",function(){this.enableGestures(this.opts.enableGestures);this.setBackground(this.opts.background);this.setOptimizeHMD(this.opts.optimizeHMD);this.opts.optimizeHMD?
console.log("Optimized for head mounted display usage."):console.log("Optimized for desktop usage.")})};h.defaultProtocolVersion=6;h.prototype.getUrl=function(){return this.scheme+"//"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"};h.prototype.getScheme=function(){return"ws:"};h.prototype.getPort=function(){return 6437};h.prototype.setBackground=function(a){this.opts.background=a;this.protocol&&this.protocol.sendBackground&&this.background!==this.opts.background&&(this.background=
this.opts.background,this.protocol.sendBackground(this,this.opts.background))};h.prototype.setOptimizeHMD=function(a){this.opts.optimizeHMD=a;this.protocol&&this.protocol.sendOptimizeHMD&&this.optimizeHMD!==this.opts.optimizeHMD&&(this.optimizeHMD=this.opts.optimizeHMD,this.protocol.sendOptimizeHMD(this,this.opts.optimizeHMD))};h.prototype.handleOpen=function(){this.connected||(this.connected=!0,this.emit("connect"))};h.prototype.enableGestures=function(a){this.gesturesEnabled=a?!0:!1;this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))};
h.prototype.handleClose=function(a,c){this.connected&&(this.disconnect(),1001===a&&1<this.opts.requestProtocolVersion&&(this.protocolVersionVerified?this.protocolVersionVerified=!1:this.opts.requestProtocolVersion--),this.startReconnection())};h.prototype.startReconnection=function(){var a=this;this.reconnectionTimer||(this.reconnectionTimer=setInterval(function(){a.reconnect()},500))};h.prototype.stopReconnection=function(){this.reconnectionTimer=clearInterval(this.reconnectionTimer)};h.prototype.disconnect=
function(a){a||this.stopReconnection();if(this.socket)return this.socket.close(),delete this.socket,delete this.protocol,delete this.background,delete this.optimizeHMD,delete this.focusedState,this.connected&&(this.connected=!1,this.emit("disconnect")),!0};h.prototype.reconnect=function(){this.connected?this.stopReconnection():(this.disconnect(!0),this.connect())};h.prototype.handleData=function(a){a=JSON.parse(a);void 0===this.protocol?(a=this.protocol=l(a),this.protocolVersionVerified=!0,this.emit("ready")):
a=this.protocol(a);this.emit(a.type,a)};h.prototype.connect=function(){if(!this.socket)return this.socket=this.setupSocket(),!0};h.prototype.send=function(a){this.socket.send(a)};h.prototype.reportFocus=function(a){this.connected&&this.focusedState!==a&&(this.focusedState=a,this.emit(this.focusedState?"focus":"blur"),this.protocol&&this.protocol.sendFocused&&this.protocol.sendFocused(this,this.focusedState))};e.extend(h.prototype,m.prototype)},{"../protocol":15,events:21,underscore:24}],4:[function(a,
c,m){var l=c.exports=a("./base");a=a("underscore");c=c.exports=function(a){l.call(this,a);var c=this;this.on("ready",function(){c.startFocusLoop()});this.on("disconnect",function(){c.stopFocusLoop()})};a.extend(c.prototype,l.prototype);c.__proto__=l;c.prototype.useSecure=function(){return"https:"===location.protocol};c.prototype.getScheme=function(){return this.useSecure()?"wss:":"ws:"};c.prototype.getPort=function(){return this.useSecure()?6436:6437};c.prototype.setupSocket=function(){var a=this,
c=new WebSocket(this.getUrl());c.onopen=function(){a.handleOpen()};c.onclose=function(c){a.handleClose(c.code,c.reason)};c.onmessage=function(c){a.handleData(c.data)};c.onerror=function(c){a.useSecure()&&"wss:"===a.scheme?(a.scheme="ws:",a.port=6437,a.disconnect(),a.connect()):confirm("Leap Motion controller driver (V2) not found. Please download the driver from the following website and check that the port 6437 is open.")&&(window.location.href="https://developer.leapmotion.com/sdk/v2")};return c};
c.prototype.startFocusLoop=function(){if(!this.focusDetectorTimer){var a=this,c=null;c="undefined"!==typeof document.hidden?"hidden":"undefined"!==typeof document.mozHidden?"mozHidden":"undefined"!==typeof document.msHidden?"msHidden":"undefined"!==typeof document.webkitHidden?"webkitHidden":void 0;void 0===a.windowVisible&&(a.windowVisible=void 0===c?!0:!1===document[c]);var l=window.addEventListener("focus",function(c){a.windowVisible=!0;v()}),m=window.addEventListener("blur",function(c){a.windowVisible=
!1;v()});this.on("disconnect",function(){window.removeEventListener("focus",l);window.removeEventListener("blur",m)});var v=function(){a.reportFocus((void 0===c?!0:!1===document[c])&&a.windowVisible)};v();this.focusDetectorTimer=setInterval(v,100)}};c.prototype.stopFocusLoop=function(){this.focusDetectorTimer&&(clearTimeout(this.focusDetectorTimer),delete this.focusDetectorTimer)}},{"./base":3,underscore:24}],5:[function(a,c,m){var l=a("__browserify_process"),e=a("./frame"),h=a("./hand"),n=a("./pointable"),
u=a("./finger"),v=a("./circular_buffer"),B=a("./pipeline");m=a("events").EventEmitter;var A=a("./gesture").gestureListener,p=a("./dialog"),q=a("underscore"),r=c.exports=function(c){var h=this;c=q.defaults(c||{},{inNode:"undefined"!==typeof l&&l.versions&&l.versions.node});this.inNode=c.inNode;c=q.defaults(c||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",suppressAnimationLoop:!this.useAnimationLoop(),loopWhileDisconnected:!0,useAllPlugins:!1,checkVersion:!0});this.animationFrameRequested=
!1;this.onAnimationFrame=function(a){h.lastConnectionFrame.valid&&h.emit("animationFrame",h.lastConnectionFrame);h.emit("frameEnd",a);h.loopWhileDisconnected&&(!1!==h.connection.focusedState||h.connection.opts.background)?window.requestAnimationFrame(h.onAnimationFrame):h.animationFrameRequested=!1};this.suppressAnimationLoop=c.suppressAnimationLoop;this.loopWhileDisconnected=c.loopWhileDisconnected;this.frameEventName=c.frameEventName;this.useAllPlugins=c.useAllPlugins;this.history=new v(200);this.lastConnectionFrame=
this.lastValidFrame=this.lastFrame=e.Invalid;this.accumulatedGestures=[];this.checkVersion=c.checkVersion;this.connectionType=void 0===c.connectionType?this.inBrowser()?a("./connection/browser"):a("./connection/node"):c.connectionType;this.connection=new this.connectionType(c);this.streamingCount=0;this.devices={};this.plugins={};this._pluginPipelineSteps={};this._pluginExtendedMethods={};c.useAllPlugins&&this.useRegisteredPlugins();this.setupFrameEvents(c);this.setupConnectionEvents();this.startAnimationLoop()};
r.prototype.gesture=function(a,c){a=A(this,a);void 0!==c&&a.stop(c);return a};r.prototype.setBackground=function(a){this.connection.setBackground(a);return this};r.prototype.setOptimizeHMD=function(a){this.connection.setOptimizeHMD(a);return this};r.prototype.inBrowser=function(){return!this.inNode};r.prototype.useAnimationLoop=function(){return this.inBrowser()&&!this.inBackgroundPage()};r.prototype.inBackgroundPage=function(){return"undefined"!==typeof chrome&&chrome.extension&&chrome.extension.getBackgroundPage&&
chrome.extension.getBackgroundPage()===window};r.prototype.connect=function(){this.connection.connect();return this};r.prototype.streaming=function(){return 0<this.streamingCount};r.prototype.connected=function(){return!!this.connection.connected};r.prototype.startAnimationLoop=function(){this.suppressAnimationLoop||this.animationFrameRequested||(this.animationFrameRequested=!0,window.requestAnimationFrame(this.onAnimationFrame))};r.prototype.disconnect=function(){this.connection.disconnect();return this};
r.prototype.frame=function(a){return this.history.get(a)||e.Invalid};r.prototype.loop=function(a){if(a)if("function"===typeof a)this.on(this.frameEventName,a);else this.setupFrameEvents(a);return this.connect()};r.prototype.addStep=function(a){this.pipeline||(this.pipeline=new B(this));this.pipeline.addStep(a)};r.prototype.processFrame=function(a){a.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(a.gestures));this.lastConnectionFrame=a;this.startAnimationLoop();this.emit("deviceFrame",
a)};r.prototype.processFinishedFrame=function(a){this.lastFrame=a;a.valid&&(this.lastValidFrame=a);a.controller=this;a.historyIdx=this.history.push(a);if(a.gestures){a.gestures=this.accumulatedGestures;this.accumulatedGestures=[];for(var c=0;c!=a.gestures.length;c++)this.emit("gesture",a.gestures[c],a)}this.pipeline&&(a=this.pipeline.run(a),a||(a=e.Invalid));this.emit("frame",a);this.emitHandEvents(a)};r.prototype.emitHandEvents=function(a){for(var c=0;c<a.hands.length;c++)this.emit("hand",a.hands[c])};
r.prototype.setupFrameEvents=function(a){if(a.frame)this.on("frame",a.frame);if(a.hand)this.on("hand",a.hand)};r.prototype.setupConnectionEvents=function(){var a=this;this.connection.on("frame",function(b){a.processFrame(b)});this.on(this.frameEventName,function(b){a.processFinishedFrame(b)});var c=function(){if(5>a.connection.opts.requestProtocolVersion&&0==a.streamingCount){a.streamingCount=1;var b={attached:!0,streaming:!0,type:"unknown",id:"Lx00000000000"};a.devices[b.id]=b;a.emit("deviceAttached",
b);a.emit("deviceStreaming",b);a.emit("streamingStarted",b);a.connection.removeListener("frame",c)}},e=function(){if(0<a.streamingCount){for(var b in a.devices)a.emit("deviceStopped",a.devices[b]),a.emit("deviceRemoved",a.devices[b]);a.emit("streamingStopped",a.devices[b]);a.streamingCount=0;for(b in a.devices)delete a.devices[b]}};this.connection.on("focus",function(){a.loopWhileDisconnected&&a.startAnimationLoop();a.emit("focus")});this.connection.on("blur",function(){a.emit("blur")});this.connection.on("protocol",
function(b){b.on("beforeFrameCreated",function(b){a.emit("beforeFrameCreated",b)});b.on("afterFrameCreated",function(b,c){a.emit("afterFrameCreated",b,c)});a.emit("protocol",b)});this.connection.on("ready",function(){a.checkVersion&&!a.inNode&&a.checkOutOfDate();a.emit("ready")});this.connection.on("connect",function(){a.emit("connect");a.connection.removeListener("frame",c);a.connection.on("frame",c)});this.connection.on("disconnect",function(){a.emit("disconnect");e()});this.connection.on("deviceConnect",
function(b){b.state?(a.emit("deviceConnected"),a.connection.removeListener("frame",c),a.connection.on("frame",c)):(a.emit("deviceDisconnected"),e())});this.connection.on("deviceEvent",function(b){b=b.state;var d=a.devices[b.id],c={},e;for(e in b)d&&d.hasOwnProperty(e)&&d[e]==b[e]||(c[e]=!0);a.devices[b.id]=b;c.attached&&a.emit(b.attached?"deviceAttached":"deviceRemoved",b);c.streaming&&(b.streaming?(a.streamingCount++,a.emit("deviceStreaming",b),1==a.streamingCount&&a.emit("streamingStarted",b),c.attached||
a.emit("deviceConnected")):c.attached&&b.attached||(a.streamingCount--,a.emit("deviceStopped",b),0==a.streamingCount&&a.emit("streamingStopped",b),a.emit("deviceDisconnected")))});this.on("newListener",function(a,d){"deviceConnected"!=a&&"deviceDisconnected"!=a||console.warn(a+" events are depricated.  Consider using 'streamingStarted/streamingStopped' or 'deviceStreaming/deviceStopped' instead")})};r.prototype.checkOutOfDate=function(){console.assert(this.connection&&this.connection.protocol);var a=
this.connection.protocol.serviceVersion,c=this.connection.protocol.version,e=this.connectionType.defaultProtocolVersion;return e>c?(console.warn("Your Protocol Version is v"+c+", this app was designed for v"+e),p.warnOutOfDate({sV:a,pV:c}),!0):!1};r._pluginFactories={};r.plugin=function(a,c){this._pluginFactories[a]&&console.warn('Plugin "'+a+'" already registered');return this._pluginFactories[a]=c};r.plugins=function(){return q.keys(this._pluginFactories)};r.prototype.use=function(a,c){var f;var b=
"function"==typeof a?a:r._pluginFactories[a];if(!b)throw"Leap Plugin "+a+" not found.";c||(c={});if(this.plugins[a])return q.extend(this.plugins[a],c),this;this.plugins[a]=c;c=b.call(this,c);for(f in c)if(b=c[f],"function"===typeof b){var d=a,g=f;if(-1!==["beforeFrameCreated","afterFrameCreated"].indexOf(g))this.on(g,b);else this.pipeline||(this.pipeline=new B(this)),this._pluginPipelineSteps[d]||(this._pluginPipelineSteps[d]=[]),this._pluginPipelineSteps[d].push(this.pipeline.addWrappedStep(g,b))}else{d=
a;g=f;this._pluginExtendedMethods[d]||(this._pluginExtendedMethods[d]=[]);switch(g){case "frame":g=e;break;case "hand":g=h;break;case "pointable":g=n;q.extend(u.prototype,b);q.extend(u.Invalid,b);break;case "finger":g=u;break;default:throw d+' specifies invalid object type "'+g+'" for prototypical extension';}q.extend(g.prototype,b);q.extend(g.Invalid,b);this._pluginExtendedMethods[d].push([g,b])}return this};r.prototype.stopUsing=function(a){var c=this._pluginPipelineSteps[a],e=this._pluginExtendedMethods[a],
b;if(this.plugins[a]){if(c)for(b=0;b<c.length;b++)this.pipeline.removeStep(c[b]);if(e)for(b=0;b<e.length;b++){c=e[b][0];var d=e[b][1];for(var g in d)delete c.prototype[g],delete c.Invalid[g]}delete this.plugins[a];return this}};r.prototype.useRegisteredPlugins=function(){for(var a in r._pluginFactories)this.use(a)};q.extend(r.prototype,m.prototype)},{"./circular_buffer":2,"./connection/browser":4,"./connection/node":20,"./dialog":6,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./pipeline":13,
"./pointable":14,__browserify_process:22,events:21,underscore:24}],6:[function(a,c,m){var l=a("__browserify_process"),e=c.exports=function(a,c){this.options=c||{};this.message=a;this.createElement()};e.prototype.createElement=function(){this.element=document.createElement("div");this.element.className="leapjs-dialog";this.element.style.position="fixed";this.element.style.top="8px";this.element.style.left=0;this.element.style.right=0;this.element.style.textAlign="center";this.element.style.zIndex=
1E3;var a=document.createElement("div");this.element.appendChild(a);a.style.className="leapjs-dialog";a.style.display="inline-block";a.style.margin="auto";a.style.padding="8px";a.style.color="#222";a.style.background="#eee";a.style.borderRadius="4px";a.style.border="1px solid #999";a.style.textAlign="left";a.style.cursor="pointer";a.style.whiteSpace="nowrap";a.style.transition="box-shadow 1s linear";a.innerHTML=this.message;this.options.onclick&&a.addEventListener("click",this.options.onclick);this.options.onmouseover&&
a.addEventListener("mouseover",this.options.onmouseover);this.options.onmouseout&&a.addEventListener("mouseout",this.options.onmouseout);this.options.onmousemove&&a.addEventListener("mousemove",this.options.onmousemove)};e.prototype.show=function(){document.body.appendChild(this.element);return this};e.prototype.hide=function(){document.body.removeChild(this.element);return this};e.warnOutOfDate=function(a){a||(a={});var c="http://developer.leapmotion.com?";a.returnTo=window.location.href;for(var h in a)c+=
h+"="+encodeURIComponent(a[h])+"&";var l=new e("This site requires Leap Motion Tracking V2.<button id='leapjs-accept-upgrade'  style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 16px;'>Upgrade</button><button id='leapjs-decline-upgrade' style='color: #444; transition: box-shadow 100ms linear; cursor: pointer; vertical-align: baseline; margin-left: 8px; '>Not Now</button>",{onclick:function(a){"leapjs-decline-upgrade"!=a.target.id&&(a=window.open(c,
"_blank","height=800,width=1000,location=1,menubar=1,resizable=1,status=1,toolbar=1,scrollbars=1"),window.focus&&a.focus());l.hide();return!0},onmousemove:function(a){a.target==document.getElementById("leapjs-decline-upgrade")?(document.getElementById("leapjs-decline-upgrade").style.color="#000",document.getElementById("leapjs-decline-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-accept-upgrade").style.color="#444",document.getElementById("leapjs-accept-upgrade").style.boxShadow=
"none"):(document.getElementById("leapjs-accept-upgrade").style.color="#000",document.getElementById("leapjs-accept-upgrade").style.boxShadow="0px 0px 2px #5daa00",document.getElementById("leapjs-decline-upgrade").style.color="#444",document.getElementById("leapjs-decline-upgrade").style.boxShadow="none")},onmouseout:function(){document.getElementById("leapjs-decline-upgrade").style.color="#444";document.getElementById("leapjs-decline-upgrade").style.boxShadow="none";document.getElementById("leapjs-accept-upgrade").style.color=
"#444";document.getElementById("leapjs-accept-upgrade").style.boxShadow="none"}});return l.show()};e.hasWarnedBones=!1;e.warnBones=function(){this.hasWarnedBones||(this.hasWarnedBones=!0,console.warn("Your Leap Service is out of date"),"undefined"!==typeof l&&l.versions&&l.versions.node||this.warnOutOfDate({reason:"bones"}))}},{__browserify_process:22}],7:[function(a,c,m){var l=a("./pointable"),e=a("./bone"),h=a("./dialog");a=a("underscore");c=c.exports=function(a){l.call(this,a);this.dipPosition=
a.dipPosition;this.pipPosition=a.pipPosition;this.mcpPosition=a.mcpPosition;this.carpPosition=a.carpPosition;this.extended=a.extended;this.type=a.type;this.finger=!0;this.positions=[this.carpPosition,this.mcpPosition,this.pipPosition,this.dipPosition,this.tipPosition];a.bases?this.addBones(a):h.warnBones()};a.extend(c.prototype,l.prototype);c.prototype.addBones=function(a){this.metacarpal=new e(this,{type:0,width:this.width,prevJoint:this.carpPosition,nextJoint:this.mcpPosition,basis:a.bases[0]});
this.proximal=new e(this,{type:1,width:this.width,prevJoint:this.mcpPosition,nextJoint:this.pipPosition,basis:a.bases[1]});this.medial=new e(this,{type:2,width:this.width,prevJoint:this.pipPosition,nextJoint:this.dipPosition,basis:a.bases[2]});this.distal=new e(this,{type:3,width:this.width,prevJoint:this.dipPosition,nextJoint:a.btipPosition,basis:a.bases[3]});this.bones=[this.metacarpal,this.proximal,this.medial,this.distal]};c.prototype.toString=function(){return"Finger [ id:"+this.id+" "+this.length+
"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};c.Invalid={valid:!1}},{"./bone":1,"./dialog":6,"./pointable":14,underscore:24}],8:[function(a,c,m){var l=a("./hand"),e=a("./pointable"),h=a("./gesture").createGesture;m=a("gl-matrix");var n=m.mat3,u=m.vec3,v=a("./interaction_box"),B=a("./finger"),A=a("underscore");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.timestamp=a.timestamp;this.hands=[];this.handsMap={};this.pointables=[];this.tools=[];this.fingers=[];a.interactionBox&&
(this.interactionBox=new v(a.interactionBox));this.gestures=[];this.pointablesMap={};this._translation=a.t;this._rotation=A.flatten(a.r);this._scaleFactor=a.s;this.data=a;this.type="frame";this.currentFrameRate=a.currentFrameRate;if(a.gestures)for(var c=0,e=a.gestures.length;c!=e;c++)this.gestures.push(h(a.gestures[c]));this.postprocessData(a)};a.prototype.postprocessData=function(a){a||(a=this.data);for(var c=0,h=a.hands.length;c!=h;c++){var m=new l(a.hands[c]);m.frame=this;this.hands.push(m);this.handsMap[m.id]=
m}a.pointables=A.sortBy(a.pointables,function(a){return a.id});c=0;for(h=a.pointables.length;c!=h;c++)m=a.pointables[c],m=m.dipPosition?new B(m):new e(m),m.frame=this,this.addPointable(m)};a.prototype.addPointable=function(a){this.pointables.push(a);this.pointablesMap[a.id]=a;(a.tool?this.tools:this.fingers).push(a);if(void 0!==a.handId&&this.handsMap.hasOwnProperty(a.handId)){var c=this.handsMap[a.handId];c.pointables.push(a);(a.tool?c.tools:c.fingers).push(a);switch(a.type){case 0:c.thumb=a;break;
case 1:c.indexFinger=a;break;case 2:c.middleFinger=a;break;case 3:c.ringFinger=a;break;case 4:c.pinky=a}}};a.prototype.tool=function(a){a=this.pointable(a);return a.tool?a:e.Invalid};a.prototype.pointable=function(a){return this.pointablesMap[a]||e.Invalid};a.prototype.finger=function(a){a=this.pointable(a);return a.tool?e.Invalid:a};a.prototype.hand=function(a){return this.handsMap[a]||l.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid)return 0;var e=this.rotationMatrix(a);
e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=u.dot(a,u.normalize(u.create(),c)));return e};a.prototype.rotationAxis=function(a){return this.valid&&a.valid?u.normalize(u.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):u.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return n.create();var c=n.transpose(n.create(),this._rotation);return n.multiply(n.create(),a._rotation,
c)};a.prototype.scaleFactor=function(a){return this.valid&&a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){return this.valid&&a.valid?u.subtract(u.create(),this._translation,a._translation):u.create()};a.prototype.toString=function(){var a="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";this.gestures&&(a+=" | Gesture count:("+this.gestures.length+")");return a+" ]"};
a.prototype.dump=function(){var a="Frame Info:<br/>"+this.toString();a+="<br/><br/>Hands:<br/>";for(var c=0,e=this.hands.length;c!=e;c++)a+="  "+this.hands[c].toString()+"<br/>";a+="<br/><br/>Pointables:<br/>";c=0;for(e=this.pointables.length;c!=e;c++)a+="  "+this.pointables[c].toString()+"<br/>";if(this.gestures)for(a+="<br/><br/>Gestures:<br/>",c=0,e=this.gestures.length;c!=e;c++)a+="  "+this.gestures[c].toString()+"<br/>";return a=a+"<br/><br/>Raw JSON:<br/>"+JSON.stringify(this.data)};a.Invalid=
{valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return e.Invalid},finger:function(){return e.Invalid},hand:function(){return l.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return n.create()},rotationAxis:function(){return u.create()},scaleFactor:function(){return 1},translation:function(){return u.create()}}},{"./finger":7,"./gesture":9,"./hand":10,"./interaction_box":12,
"./pointable":14,"gl-matrix":23,underscore:24}],9:[function(a,c,m){var l=a("gl-matrix").vec3;c=a("events").EventEmitter;var e=a("underscore");m.createGesture=function(a){switch(a.type){case "circle":var c=new n(a);break;case "swipe":c=new u(a);break;case "screenTap":c=new v(a);break;case "keyTap":c=new B(a);break;default:throw"unknown gesture type";}c.id=a.id;c.handIds=a.handIds.slice();c.pointableIds=a.pointableIds.slice();c.duration=a.duration;c.state=a.state;c.type=a.type;return c};m.gestureListener=
function(a,c){var l={},m={};a.on("gesture",function(a,f){if(a.type==c){if(("start"==a.state||"stop"==a.state)&&void 0===m[a.id]){var b=new h(a,f);m[a.id]=b;e.each(l,function(a,c){b.on(c,a)})}m[a.id].update(a,f);"stop"==a.state&&delete m[a.id]}});var n={start:function(a){l.start=a;return n},stop:function(a){l.stop=a;return n},complete:function(a){l.stop=a;return n},update:function(a){l.update=a;return n}};return n};var h=m.Gesture=function(a,c){this.gestures=[a];this.frames=[c]};h.prototype.update=
function(a,c){this.lastGesture=a;this.lastFrame=c;this.gestures.push(a);this.frames.push(c);this.emit(a.state,this)};h.prototype.translation=function(){return l.subtract(l.create(),this.lastGesture.startPosition,this.lastGesture.position)};e.extend(h.prototype,c.prototype);var n=function(a){this.center=a.center;this.normal=a.normal;this.progress=a.progress;this.radius=a.radius};n.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var u=function(a){this.startPosition=a.startPosition;
this.position=a.position;this.direction=a.direction;this.speed=a.speed};u.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var v=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};v.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var B=function(a){this.position=a.position;this.direction=a.direction;this.progress=a.progress};B.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+
"]"}},{events:21,"gl-matrix":23,underscore:24}],10:[function(a,c,m){var l=a("./pointable"),e=a("./bone");m=a("gl-matrix");var h=m.mat3,n=m.vec3,u=a("underscore");a=c.exports=function(a){this.id=a.id;this.palmPosition=a.palmPosition;this.direction=a.direction;this.palmVelocity=a.palmVelocity;this.palmNormal=a.palmNormal;this.sphereCenter=a.sphereCenter;this.sphereRadius=a.sphereRadius;this.valid=!0;this.pointables=[];this.fingers=[];this.arm=a.armBasis?new e(this,{type:4,width:a.armWidth,prevJoint:a.elbow,
nextJoint:a.wrist,basis:a.armBasis}):null;this.tools=[];this._translation=a.t;this._rotation=u.flatten(a.r);this._scaleFactor=a.s;this.timeVisible=a.timeVisible;this.stabilizedPalmPosition=a.stabilizedPalmPosition;this.type=a.type;this.grabStrength=a.grabStrength;this.pinchStrength=a.pinchStrength;this.confidence=a.confidence};a.prototype.finger=function(a){return(a=this.frame.finger(a))&&a.handId==this.id?a:l.Invalid};a.prototype.rotationAngle=function(a,c){if(!this.valid||!a.valid||!a.hand(this.id).valid)return 0;
var e=this.rotationMatrix(a);e=Math.acos(.5*(e[0]+e[4]+e[8]-1));e=isNaN(e)?0:e;void 0!==c&&(a=this.rotationAxis(a),e*=n.dot(a,n.normalize(n.create(),c)));return e};a.prototype.rotationAxis=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?n.normalize(n.create(),[this._rotation[7]-a._rotation[5],this._rotation[2]-a._rotation[6],this._rotation[3]-a._rotation[1]]):n.create()};a.prototype.rotationMatrix=function(a){if(!this.valid||!a.valid)return h.create();a=a.hand(this.id);
if(!a.valid)return h.create();var c=h.transpose(h.create(),this._rotation);return h.multiply(h.create(),a._rotation,c)};a.prototype.scaleFactor=function(a){if(!this.valid||!a.valid)return 1;a=a.hand(this.id);return a.valid?Math.exp(this._scaleFactor-a._scaleFactor):1};a.prototype.translation=function(a){if(!this.valid||!a.valid)return n.create();a=a.hand(this.id);return a.valid?[this._translation[0]-a._translation[0],this._translation[1]-a._translation[1],this._translation[2]-a._translation[2]]:n.create()};
a.prototype.toString=function(){return"Hand ("+this.type+") [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "};a.prototype.pitch=function(){return Math.atan2(this.direction[1],-this.direction[2])};a.prototype.yaw=function(){return Math.atan2(this.direction[0],-this.direction[2])};a.prototype.roll=function(){return Math.atan2(this.palmNormal[0],-this.palmNormal[1])};a.Invalid={valid:!1,fingers:[],tools:[],pointables:[],left:!1,pointable:function(){return l.Invalid},
finger:function(){return l.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return h.create()},rotationAxis:function(){return n.create()},scaleFactor:function(){return 1},translation:function(){return n.create()}}},{"./bone":1,"./pointable":14,"gl-matrix":23,underscore:24}],11:[function(a,c,m){c.exports={Controller:a("./controller"),Frame:a("./frame"),Gesture:a("./gesture"),Hand:a("./hand"),Pointable:a("./pointable"),
Finger:a("./finger"),InteractionBox:a("./interaction_box"),CircularBuffer:a("./circular_buffer"),UI:a("./ui"),JSONProtocol:a("./protocol").JSONProtocol,glMatrix:a("gl-matrix"),mat3:a("gl-matrix").mat3,vec3:a("gl-matrix").vec3,loopController:void 0,version:a("./version.js"),_:a("underscore"),EventEmitter:a("events").EventEmitter,loop:function(a,c){a&&void 0===c&&"[object Function]"==={}.toString.call(a)&&(c=a,a={});this.loopController?a&&this.loopController.setupFrameEvents(a):this.loopController=
new this.Controller(a);this.loopController.loop(c);return this.loopController},plugin:function(a,c){this.Controller.plugin(a,c)}}},{"./circular_buffer":2,"./controller":5,"./finger":7,"./frame":8,"./gesture":9,"./hand":10,"./interaction_box":12,"./pointable":14,"./protocol":15,"./ui":16,"./version.js":19,events:21,"gl-matrix":23,underscore:24}],12:[function(a,c,m){var l=a("gl-matrix").vec3;a=c.exports=function(a){this.valid=!0;this.center=a.center;this.size=a.size;this.width=a.size[0];this.height=
a.size[1];this.depth=a.size[2]};a.prototype.denormalizePoint=function(a){return l.fromValues((a[0]-.5)*this.size[0]+this.center[0],(a[1]-.5)*this.size[1]+this.center[1],(a[2]-.5)*this.size[2]+this.center[2])};a.prototype.normalizePoint=function(a,c){a=l.fromValues((a[0]-this.center[0])/this.size[0]+.5,(a[1]-this.center[1])/this.size[1]+.5,(a[2]-this.center[2])/this.size[2]+.5);c&&(a[0]=Math.min(Math.max(a[0],0),1),a[1]=Math.min(Math.max(a[1],0),1),a[2]=Math.min(Math.max(a[2],0),1));return a};a.prototype.toString=
function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"};a.Invalid={valid:!1}},{"gl-matrix":23}],13:[function(a,c,m){a=c.exports=function(a){this.steps=[];this.controller=a};a.prototype.addStep=function(a){this.steps.push(a)};a.prototype.run=function(a){for(var c=this.steps.length,h=0;h!=c&&a;h++)a=this.steps[h](a);return a};a.prototype.removeStep=function(a){a=this.steps.indexOf(a);if(-1===a)throw"Step not found in pipeline";this.steps.splice(a,
1)};a.prototype.addWrappedStep=function(a,c){var e=this.controller,l=function(h){var l;var m="frame"==a?[h]:h[a+"s"]||[];var n=0;for(l=m.length;n<l;n++)c.call(e,m[n]);return h};this.addStep(l);return l}},{}],14:[function(a,c,m){a("gl-matrix");a=c.exports=function(a){this.valid=!0;this.id=a.id;this.handId=a.handId;this.length=a.length;this.tool=a.tool;this.width=a.width;this.direction=a.direction;this.stabilizedTipPosition=a.stabilizedTipPosition;this.tipPosition=a.tipPosition;this.tipVelocity=a.tipVelocity;
this.touchZone=a.touchZone;this.touchDistance=a.touchDistance;this.timeVisible=a.timeVisible};a.prototype.toString=function(){return"Pointable [ id:"+this.id+" "+this.length+"mmx | width:"+this.width+"mm | direction:"+this.direction+" ]"};a.prototype.hand=function(){return this.frame.hand(this.handId)};a.Invalid={valid:!1}},{"gl-matrix":23}],15:[function(a,c,m){var l=a("./frame");a("./hand");a("./pointable");a("./finger");var e=a("underscore"),h=a("events").EventEmitter,n=function(a){this.type=a.type;
this.state=a.state};m.chooseProtocol=function(a){switch(a.version){case 1:case 2:case 3:case 4:case 5:case 6:var c=u(a);c.sendBackground=function(a,e){a.send(c.encode({background:e}))};c.sendFocused=function(a,e){a.send(c.encode({focused:e}))};c.sendOptimizeHMD=function(a,e){a.send(c.encode({optimizeHMD:e}))};break;default:throw"unrecognized version";}return c};var u=m.JSONProtocol=function(a){var c=function(a){if(a.event)return new n(a.event);c.emit("beforeFrameCreated",a);var e=new l(a);c.emit("afterFrameCreated",
e,a);return e};c.encode=function(a){return JSON.stringify(a)};c.version=a.version;c.serviceVersion=a.serviceVersion;c.versionLong="Version "+a.version;c.type="protocol";e.extend(c,h.prototype);return c}},{"./finger":7,"./frame":8,"./hand":10,"./pointable":14,events:21,underscore:24}],16:[function(a,c,m){m.UI={Region:a("./ui/region"),Cursor:a("./ui/cursor")}},{"./ui/cursor":17,"./ui/region":18}],17:[function(a,c,m){c.exports=function(){return function(a){var c=a.pointables.sort(function(a,c){return a.z-
c.z})[0];c&&c.valid&&(a.cursorPosition=c.tipPosition);return a}}},{}],18:[function(a,c,m){m=a("events").EventEmitter;a=a("underscore");var l=c.exports=function(a,c){this.start=new Vector(a);this.end=new Vector(c);this.enteredFrame=null};l.prototype.hasPointables=function(a){for(var c=0;c!=a.pointables.length;c++){var e=a.pointables[c].tipPosition;if(e.x>=this.start.x&&e.x<=this.end.x&&e.y>=this.start.y&&e.y<=this.end.y&&e.z>=this.start.z&&e.z<=this.end.z)return!0}return!1};l.prototype.listener=function(a){var c=
this;a&&a.nearThreshold&&this.setupNearRegion(a.nearThreshold);return function(a){return c.updatePosition(a)}};l.prototype.clipper=function(){var a=this;return function(c){a.updatePosition(c);return a.enteredFrame?c:null}};l.prototype.setupNearRegion=function(a){a=this.nearRegion=new l([this.start.x-a,this.start.y-a,this.start.z-a],[this.end.x+a,this.end.y+a,this.end.z+a]);var c=this;a.on("enter",function(a){c.emit("near",a)});a.on("exit",function(a){c.emit("far",a)});c.on("exit",function(a){c.emit("near",
a)})};l.prototype.updatePosition=function(a){this.nearRegion&&this.nearRegion.updatePosition(a);this.hasPointables(a)&&null==this.enteredFrame?(this.enteredFrame=a,this.emit("enter",this.enteredFrame)):this.hasPointables(a)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame));return a};l.prototype.normalize=function(a){return new Vector([(a.x-this.start.x)/(this.end.x-this.start.x),(a.y-this.start.y)/(this.end.y-this.start.y),(a.z-this.start.z)/(this.end.z-this.start.z)])};
l.prototype.mapToXY=function(a,c,l){a=this.normalize(a);var e=a.x,h=a.y;1<e?e=1:-1>e&&(e=-1);1<h?h=1:-1>h&&(h=-1);return[(e+1)/2*c,(1-h)/2*l,a.z]};a.extend(l.prototype,m.prototype)},{events:21,underscore:24}],19:[function(a,c,m){c.exports={full:"0.6.4",major:0,minor:6,dot:4}},{}],20:[function(a,c,m){},{}],21:[function(a,c,m){a=a("__browserify_process");a.EventEmitter||(a.EventEmitter=function(){});m=m.EventEmitter=a.EventEmitter;var l="function"===typeof Array.isArray?Array.isArray:function(a){return"[object Array]"===
Object.prototype.toString.call(a)};m.prototype.setMaxListeners=function(a){this._events||(this._events={});this._events.maxListeners=a};m.prototype.emit=function(a){if("error"===a&&(!this._events||!this._events.error||l(this._events.error)&&!this._events.error.length)){if(arguments[1]instanceof Error)throw arguments[1];throw Error("Uncaught, unspecified 'error' event.");}if(!this._events)return!1;var c=this._events[a];if(!c)return!1;if("function"==typeof c){switch(arguments.length){case 1:c.call(this);
break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:var e=Array.prototype.slice.call(arguments,1);c.apply(this,e)}return!0}if(l(c)){e=Array.prototype.slice.call(arguments,1);c=c.slice();for(var m=0,v=c.length;m<v;m++)c[m].apply(this,e);return!0}return!1};m.prototype.addListener=function(a,c){if("function"!==typeof c)throw Error("addListener only takes instances of Function");this._events||(this._events={});this.emit("newListener",a,c);if(this._events[a])if(l(this._events[a])){if(!this._events[a].warned){var e;
(e=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&0<e&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}this._events[a].push(c)}else this._events[a]=[this._events[a],c];else this._events[a]=c;return this};m.prototype.on=m.prototype.addListener;m.prototype.once=function(a,c){var e=this;e.on(a,
function v(){e.removeListener(a,v);c.apply(this,arguments)});return this};m.prototype.removeListener=function(a,c){if("function"!==typeof c)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[a])return this;var e=this._events[a];if(l(e)){a:if(e.indexOf)c=e.indexOf(c);else{for(var h=0;h<e.length;h++)if(c===e[h]){c=h;break a}c=-1}if(0>c)return this;e.splice(c,1);0==e.length&&delete this._events[a]}else this._events[a]===c&&delete this._events[a];return this};
m.prototype.removeAllListeners=function(a){if(0===arguments.length)return this._events={},this;a&&this._events&&this._events[a]&&(this._events[a]=null);return this};m.prototype.listeners=function(a){this._events||(this._events={});this._events[a]||(this._events[a]=[]);l(this._events[a])||(this._events[a]=[this._events[a]]);return this._events[a]};m.listenerCount=function(a,c){return a._events&&a._events[c]?"function"===typeof a._events[c]?1:a._events[c].length:0}},{__browserify_process:22}],22:[function(a,
c,m){a=c.exports={};a.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(c){var e=c.source;e!==window&&null!==e||"process-tick"!==c.data||(c.stopPropagation(),0<a.length&&a.shift()())},!0);return function(c){a.push(c);window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}();a.title=
"browser";a.browser=!0;a.env={};a.argv=[];a.binding=function(a){throw Error("process.binding is not supported");};a.cwd=function(){return"/"};a.chdir=function(a){throw Error("process.chdir is not supported");}},{}],23:[function(a,c,m){(function(a){if("undefined"===typeof m)if("function"==typeof define&&"object"==typeof define.amd&&define.amd){var c={};define(function(){return c})}else c="undefined"!==typeof window?window:a;else c=m;(function(a){if(!c)var c=1E-6;if(!e)var e="undefined"!==typeof Float32Array?
Float32Array:Array;if(!l)var l=Math.random;var h={setMatrixArrayType:function(a){e=a}};"undefined"!==typeof a&&(a.glMatrix=h);var m=Math.PI/180;h.toRadian=function(a){return a*m};var p={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new e(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,d){var b=new e(2);b[0]=a;b[1]=d;return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];return a},set:function(a,d,c){a[0]=d;a[1]=c;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=
d[1]+c[1];return a},subtract:function(a,d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];return a}};p.sub=p.subtract;p.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];return a};p.mul=p.multiply;p.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];return a};p.div=p.divide;p.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);return a};p.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);return a};p.scale=function(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;return a};p.scaleAndAdd=
function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;return a};p.distance=function(a,d){var b=d[0]-a[0];a=d[1]-a[1];return Math.sqrt(b*b+a*a)};p.dist=p.distance;p.squaredDistance=function(a,d){var b=d[0]-a[0];a=d[1]-a[1];return b*b+a*a};p.sqrDist=p.squaredDistance;p.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};p.len=p.length;p.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};p.sqrLen=p.squaredLength;p.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];return a};p.normalize=function(a,
d){var b=d[0],c=d[1];b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b);return a};p.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]};p.cross=function(a,d,c){d=d[0]*c[1]-d[1]*c[0];a[0]=a[1]=0;a[2]=d;return a};p.lerp=function(a,d,c,e){var b=d[0];d=d[1];a[0]=b+e*(c[0]-b);a[1]=d+e*(c[1]-d);return a};p.random=function(a,d){d=d||1;var b=2*l()*Math.PI;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;return a};p.transformMat2=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d;a[1]=c[1]*b+c[3]*d;return a};p.transformMat2d=
function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[2]*d+c[4];a[1]=c[1]*b+c[3]*d+c[5];return a};p.transformMat3=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[3]*d+c[6];a[1]=c[1]*b+c[4]*d+c[7];return a};p.transformMat4=function(a,d,c){var b=d[0];d=d[1];a[0]=c[0]*b+c[4]*d+c[12];a[1]=c[1]*b+c[5]*d+c[13];return a};p.forEach=function(){var a=p.create();return function(b,c,e,f,h,l){c||(c=2);e||(e=0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],h(a,a,l),b[e]=a[0],b[e+1]=a[1];return b}}();
p.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof a&&(a.vec2=p);var q={create:function(){var a=new e(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new e(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,d,c){var b=new e(3);b[0]=a;b[1]=d;b[2]=c;return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];return a},set:function(a,d,c,e){a[0]=d;a[1]=c;a[2]=e;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];return a},subtract:function(a,
d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];a[2]=d[2]-c[2];return a}};q.sub=q.subtract;q.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];a[2]=d[2]*c[2];return a};q.mul=q.multiply;q.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];a[2]=d[2]/c[2];return a};q.div=q.divide;q.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);a[2]=Math.min(d[2],c[2]);return a};q.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);a[2]=Math.max(d[2],c[2]);return a};q.scale=function(a,
d,c){a[0]=d[0]*c;a[1]=d[1]*c;a[2]=d[2]*c;return a};q.scaleAndAdd=function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;a[2]=d[2]+c[2]*e;return a};q.distance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1];a=d[2]-a[2];return Math.sqrt(b*b+c*c+a*a)};q.dist=q.distance;q.squaredDistance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1];a=d[2]-a[2];return b*b+c*c+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};q.len=q.length;q.squaredLength=function(a){var b=
a[0],c=a[1];a=a[2];return b*b+c*c+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];a[2]=-d[2];return a};q.normalize=function(a,d){var b=d[0],c=d[1],e=d[2];b=b*b+c*c+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b,a[2]=d[2]*b);return a};q.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]};q.cross=function(a,d,c){var b=d[0],g=d[1];d=d[2];var e=c[0],f=c[1];c=c[2];a[0]=g*c-d*f;a[1]=d*e-b*c;a[2]=b*f-g*e;return a};q.lerp=function(a,d,c,e){var b=d[0],g=d[1];d=d[2];a[0]=
b+e*(c[0]-b);a[1]=g+e*(c[1]-g);a[2]=d+e*(c[2]-d);return a};q.random=function(a,d){d=d||1;var b=2*l()*Math.PI,c=2*l()-1,e=Math.sqrt(1-c*c)*d;a[0]=Math.cos(b)*e;a[1]=Math.sin(b)*e;a[2]=c*d;return a};q.transformMat4=function(a,d,c){var b=d[0],g=d[1];d=d[2];a[0]=c[0]*b+c[4]*g+c[8]*d+c[12];a[1]=c[1]*b+c[5]*g+c[9]*d+c[13];a[2]=c[2]*b+c[6]*g+c[10]*d+c[14];return a};q.transformMat3=function(a,d,c){var b=d[0],g=d[1];d=d[2];a[0]=b*c[0]+g*c[3]+d*c[6];a[1]=b*c[1]+g*c[4]+d*c[7];a[2]=b*c[2]+g*c[5]+d*c[8];return a};
q.transformQuat=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=c[0];var f=c[1],k=c[2];c=c[3];var h=c*b+f*e-k*g,l=c*g+k*b-d*e,m=c*e+d*g-f*b;b=-d*b-f*g-k*e;a[0]=h*c+b*-d+l*-k-m*-f;a[1]=l*c+b*-f+m*-d-h*-k;a[2]=m*c+b*-k+h*-f-l*-d;return a};q.rotateX=function(a,d,c,e){var b=[],g=[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[0];g[1]=b[1]*Math.cos(e)-b[2]*Math.sin(e);g[2]=b[1]*Math.sin(e)+b[2]*Math.cos(e);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.rotateY=function(a,d,c,e){var b=[],g=
[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[2]*Math.sin(e)+b[0]*Math.cos(e);g[1]=b[1];g[2]=b[2]*Math.cos(e)-b[0]*Math.sin(e);a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.rotateZ=function(a,d,c,e){var b=[],g=[];b[0]=d[0]-c[0];b[1]=d[1]-c[1];b[2]=d[2]-c[2];g[0]=b[0]*Math.cos(e)-b[1]*Math.sin(e);g[1]=b[0]*Math.sin(e)+b[1]*Math.cos(e);g[2]=b[2];a[0]=g[0]+c[0];a[1]=g[1]+c[1];a[2]=g[2]+c[2];return a};q.forEach=function(){var a=q.create();return function(b,c,e,f,h,l){c||(c=3);e||(e=
0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],h(a,a,l),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2];return b}}();q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof a&&(a.vec3=q);var r={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,d,c,f){var b=new e(4);b[0]=a;b[1]=d;b[2]=c;b[3]=f;return b},copy:function(a,d){a[0]=
d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];return a},set:function(a,d,c,e,f){a[0]=d;a[1]=c;a[2]=e;a[3]=f;return a},add:function(a,d,c){a[0]=d[0]+c[0];a[1]=d[1]+c[1];a[2]=d[2]+c[2];a[3]=d[3]+c[3];return a},subtract:function(a,d,c){a[0]=d[0]-c[0];a[1]=d[1]-c[1];a[2]=d[2]-c[2];a[3]=d[3]-c[3];return a}};r.sub=r.subtract;r.multiply=function(a,d,c){a[0]=d[0]*c[0];a[1]=d[1]*c[1];a[2]=d[2]*c[2];a[3]=d[3]*c[3];return a};r.mul=r.multiply;r.divide=function(a,d,c){a[0]=d[0]/c[0];a[1]=d[1]/c[1];a[2]=d[2]/c[2];a[3]=d[3]/
c[3];return a};r.div=r.divide;r.min=function(a,d,c){a[0]=Math.min(d[0],c[0]);a[1]=Math.min(d[1],c[1]);a[2]=Math.min(d[2],c[2]);a[3]=Math.min(d[3],c[3]);return a};r.max=function(a,d,c){a[0]=Math.max(d[0],c[0]);a[1]=Math.max(d[1],c[1]);a[2]=Math.max(d[2],c[2]);a[3]=Math.max(d[3],c[3]);return a};r.scale=function(a,d,c){a[0]=d[0]*c;a[1]=d[1]*c;a[2]=d[2]*c;a[3]=d[3]*c;return a};r.scaleAndAdd=function(a,d,c,e){a[0]=d[0]+c[0]*e;a[1]=d[1]+c[1]*e;a[2]=d[2]+c[2]*e;a[3]=d[3]+c[3]*e;return a};r.distance=function(a,
d){var b=d[0]-a[0],c=d[1]-a[1],e=d[2]-a[2];a=d[3]-a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};r.dist=r.distance;r.squaredDistance=function(a,d){var b=d[0]-a[0],c=d[1]-a[1],e=d[2]-a[2];a=d[3]-a[3];return b*b+c*c+e*e+a*a};r.sqrDist=r.squaredDistance;r.length=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return Math.sqrt(b*b+c*c+e*e+a*a)};r.len=r.length;r.squaredLength=function(a){var b=a[0],c=a[1],e=a[2];a=a[3];return b*b+c*c+e*e+a*a};r.sqrLen=r.squaredLength;r.negate=function(a,d){a[0]=-d[0];a[1]=-d[1];
a[2]=-d[2];a[3]=-d[3];return a};r.normalize=function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3];b=b*b+c*c+e*e+f*f;0<b&&(b=1/Math.sqrt(b),a[0]=d[0]*b,a[1]=d[1]*b,a[2]=d[2]*b,a[3]=d[3]*b);return a};r.dot=function(a,d){return a[0]*d[0]+a[1]*d[1]+a[2]*d[2]+a[3]*d[3]};r.lerp=function(a,d,c,e){var b=d[0],g=d[1],f=d[2];d=d[3];a[0]=b+e*(c[0]-b);a[1]=g+e*(c[1]-g);a[2]=f+e*(c[2]-f);a[3]=d+e*(c[3]-d);return a};r.random=function(a,d){d=d||1;a[0]=l();a[1]=l();a[2]=l();a[3]=l();r.normalize(a,a);r.scale(a,a,d);return a};
r.transformMat4=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=d[3];a[0]=c[0]*b+c[4]*g+c[8]*e+c[12]*d;a[1]=c[1]*b+c[5]*g+c[9]*e+c[13]*d;a[2]=c[2]*b+c[6]*g+c[10]*e+c[14]*d;a[3]=c[3]*b+c[7]*g+c[11]*e+c[15]*d;return a};r.transformQuat=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=c[0];var f=c[1],k=c[2];c=c[3];var h=c*b+f*e-k*g,l=c*g+k*b-d*e,m=c*e+d*g-f*b;b=-d*b-f*g-k*e;a[0]=h*c+b*-d+l*-k-m*-f;a[1]=l*c+b*-f+m*-d-h*-k;a[2]=m*c+b*-k+h*-f-l*-d;return a};r.forEach=function(){var a=r.create();return function(b,c,
e,f,h,l){c||(c=4);e||(e=0);for(f=f?Math.min(f*c+e,b.length):b.length;e<f;e+=c)a[0]=b[e],a[1]=b[e+1],a[2]=b[e+2],a[3]=b[e+3],h(a,a,l),b[e]=a[0],b[e+1]=a[1],b[e+2]=a[2],b[e+3]=a[3];return b}}();r.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.vec4=r);h={create:function(){var a=new e(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new e(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];
a[3]=d[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,d){if(a===d){var b=d[1];a[1]=d[2];a[2]=b}else a[0]=d[0],a[1]=d[2],a[2]=d[1],a[3]=d[3];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b*d-e*c;if(!f)return null;f=1/f;a[0]=d*f;a[1]=-c*f;a[2]=-e*f;a[3]=b*f;return a},adjoint:function(a,d){var b=d[0];a[0]=d[3];a[1]=-d[1];a[2]=-d[2];a[3]=b;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,d,c){var b=d[0],
g=d[1],e=d[2];d=d[3];var f=c[0],k=c[1],h=c[2];c=c[3];a[0]=b*f+e*k;a[1]=g*f+d*k;a[2]=b*h+e*c;a[3]=g*h+d*c;return a}};h.mul=h.multiply;h.rotate=function(a,d,c){var b=d[0],g=d[1],e=d[2];d=d[3];var f=Math.sin(c);c=Math.cos(c);a[0]=b*c+e*f;a[1]=g*c+d*f;a[2]=b*-f+e*c;a[3]=g*-f+d*c;return a};h.scale=function(a,d,c){var b=d[1],g=d[2],e=d[3],f=c[0];c=c[1];a[0]=d[0]*f;a[1]=b*f;a[2]=g*c;a[3]=e*c;return a};h.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};h.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};h.LDU=function(a,d,c,e){a[2]=e[2]/e[0];c[0]=e[0];c[1]=e[1];c[3]=e[3]-a[2]*c[1];return[a,d,c]};"undefined"!==typeof a&&(a.mat2=h);h={create:function(){var a=new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new e(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=
0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4];d=d[5];var k=b*f-c*e;if(!k)return null;k=1/k;a[0]=f*k;a[1]=-c*k;a[2]=-e*k;a[3]=b*k;a[4]=(e*d-f*h)*k;a[5]=(c*h-b*d)*k;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4];d=d[5];var h=c[0],l=c[1],m=c[2],n=c[3],p=c[4];c=c[5];a[0]=b*h+g*l;a[1]=e*h+f*l;a[2]=b*m+g*n;a[3]=e*m+f*n;a[4]=b*p+g*c+k;a[5]=e*p+f*c+d;return a}};h.mul=h.multiply;h.rotate=
function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4];d=d[5];var h=Math.sin(c);c=Math.cos(c);a[0]=b*c+g*h;a[1]=e*c+f*h;a[2]=b*-h+g*c;a[3]=e*-h+f*c;a[4]=k;a[5]=d;return a};h.scale=function(a,d,c){var b=d[1],e=d[2],g=d[3],f=d[4],k=d[5],h=c[0];c=c[1];a[0]=d[0]*h;a[1]=b*h;a[2]=e*c;a[3]=g*c;a[4]=f;a[5]=k;return a};h.translate=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4];d=d[5];var h=c[0];c=c[1];a[0]=b;a[1]=e;a[2]=g;a[3]=f;a[4]=b*h+g*c+k;a[5]=e*h+f*c+d;return a};h.str=function(a){return"mat2d("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};h.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof a&&(a.mat2d=h);var t={create:function(){var a=new e(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[4];a[4]=d[5];a[5]=d[6];a[6]=d[8];a[7]=d[9];a[8]=d[10];return a},clone:function(a){var b=new e(9);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,d){if(a===d){var b=d[1],c=d[2],e=d[5];a[1]=d[3];a[2]=d[6];a[3]=b;a[5]=d[7];a[6]=c;a[7]=e}else a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=
d[5],a[8]=d[8];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],k=d[5],l=d[6],m=d[7];d=d[8];var n=d*h-k*m,p=-d*f+k*l,q=m*f-h*l,r=b*n+c*p+e*q;if(!r)return null;r=1/r;a[0]=n*r;a[1]=(-d*c+e*m)*r;a[2]=(k*c-e*h)*r;a[3]=p*r;a[4]=(d*b-e*l)*r;a[5]=(-k*b+e*f)*r;a[6]=q*r;a[7]=(-m*b+c*l)*r;a[8]=(h*b-c*f)*r;return a},adjoint:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],k=d[5],l=d[6],m=d[7];d=d[8];a[0]=h*d-k*m;a[1]=e*m-c*d;a[2]=c*k-e*h;a[3]=k*l-f*d;a[4]=b*d-e*l;a[5]=e*f-b*k;a[6]=f*
m-h*l;a[7]=c*l-b*m;a[8]=b*h-c*f;return a},determinant:function(a){var b=a[3],c=a[4],e=a[5],f=a[6],h=a[7],l=a[8];return a[0]*(l*c-e*h)+a[1]*(-l*b+e*f)+a[2]*(h*b-c*f)},multiply:function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4],h=d[5],l=d[6],m=d[7];d=d[8];var n=c[0],p=c[1],q=c[2],r=c[3],t=c[4],u=c[5],v=c[6],w=c[7];c=c[8];a[0]=n*b+p*f+q*l;a[1]=n*e+p*k+q*m;a[2]=n*g+p*h+q*d;a[3]=r*b+t*f+u*l;a[4]=r*e+t*k+u*m;a[5]=r*g+t*h+u*d;a[6]=v*b+w*f+c*l;a[7]=v*e+w*k+c*m;a[8]=v*g+w*h+c*d;return a}};t.mul=t.multiply;
t.translate=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4],h=d[5],l=d[6],m=d[7];d=d[8];var n=c[0];c=c[1];a[0]=b;a[1]=e;a[2]=g;a[3]=f;a[4]=k;a[5]=h;a[6]=n*b+c*f+l;a[7]=n*e+c*k+m;a[8]=n*g+c*h+d;return a};t.rotate=function(a,d,c){var b=d[0],e=d[1],g=d[2],f=d[3],k=d[4],h=d[5],l=d[6],m=d[7];d=d[8];var n=Math.sin(c);c=Math.cos(c);a[0]=c*b+n*f;a[1]=c*e+n*k;a[2]=c*g+n*h;a[3]=c*f-n*b;a[4]=c*k-n*e;a[5]=c*h-n*g;a[6]=l;a[7]=m;a[8]=d;return a};t.scale=function(a,d,c){var b=c[0];c=c[1];a[0]=b*d[0];a[1]=
b*d[1];a[2]=b*d[2];a[3]=c*d[3];a[4]=c*d[4];a[5]=c*d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];return a};t.fromMat2d=function(a,d){a[0]=d[0];a[1]=d[1];a[2]=0;a[3]=d[2];a[4]=d[3];a[5]=0;a[6]=d[4];a[7]=d[5];a[8]=1;return a};t.fromQuat=function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b+b,h=c+c,k=e+e;b*=f;var l=c*f;c*=h;var m=e*f,n=e*h;e*=k;f*=d;h*=d;d*=k;a[0]=1-c-e;a[3]=l-d;a[6]=m+h;a[1]=l+d;a[4]=1-b-e;a[7]=n-f;a[2]=m-h;a[5]=n+f;a[8]=1-b-c;return a};t.normalFromMat4=function(a,d){var b=d[0],c=d[1],e=d[2],f=
d[3],h=d[4],k=d[5],l=d[6],m=d[7],n=d[8],p=d[9],q=d[10],r=d[11],t=d[12],u=d[13],v=d[14];d=d[15];var w=b*k-c*h,A=b*l-e*h,B=b*m-f*h,G=c*l-e*k,F=c*m-f*k,J=e*m-f*l,I=n*u-p*t,H=n*v-q*t;n=n*d-r*t;var L=p*v-q*u;p=p*d-r*u;q=q*d-r*v;r=w*q-A*p+B*L+G*n-F*H+J*I;if(!r)return null;r=1/r;a[0]=(k*q-l*p+m*L)*r;a[1]=(l*n-h*q-m*H)*r;a[2]=(h*p-k*n+m*I)*r;a[3]=(e*p-c*q-f*L)*r;a[4]=(b*q-e*n+f*H)*r;a[5]=(c*n-b*p-f*I)*r;a[6]=(u*J-v*F+d*G)*r;a[7]=(v*B-t*J-d*A)*r;a[8]=(t*F-u*B+d*w)*r;return a};t.str=function(a){return"mat3("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};t.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof a&&(a.mat3=t);var w={create:function(){var a=new e(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=
new e(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,d){a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=d[3];a[4]=d[4];a[5]=d[5];a[6]=d[6];a[7]=d[7];a[8]=d[8];a[9]=d[9];a[10]=d[10];a[11]=d[11];a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=
0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,d){if(a===d){var b=d[1],c=d[2],e=d[3],f=d[6],h=d[7],k=d[11];a[1]=d[4];a[2]=d[8];a[3]=d[12];a[4]=b;a[6]=d[9];a[7]=d[13];a[8]=c;a[9]=f;a[11]=d[14];a[12]=e;a[13]=h;a[14]=k}else a[0]=d[0],a[1]=d[4],a[2]=d[8],a[3]=d[12],a[4]=d[1],a[5]=d[5],a[6]=d[9],a[7]=d[13],a[8]=d[2],a[9]=d[6],a[10]=d[10],a[11]=d[14],a[12]=d[3],a[13]=d[7],a[14]=d[11],a[15]=d[15];return a},invert:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],k=d[5],l=d[6],m=d[7],n=d[8],
p=d[9],q=d[10],r=d[11],t=d[12],u=d[13],v=d[14];d=d[15];var w=b*k-c*h,A=b*l-e*h,B=b*m-f*h,G=c*l-e*k,F=c*m-f*k,J=e*m-f*l,I=n*u-p*t,H=n*v-q*t,L=n*d-r*t,P=p*v-q*u,R=p*d-r*u,K=q*d-r*v,N=w*K-A*R+B*P+G*L-F*H+J*I;if(!N)return null;N=1/N;a[0]=(k*K-l*R+m*P)*N;a[1]=(e*R-c*K-f*P)*N;a[2]=(u*J-v*F+d*G)*N;a[3]=(q*F-p*J-r*G)*N;a[4]=(l*L-h*K-m*H)*N;a[5]=(b*K-e*L+f*H)*N;a[6]=(v*B-t*J-d*A)*N;a[7]=(n*J-q*B+r*A)*N;a[8]=(h*R-k*L+m*I)*N;a[9]=(c*L-b*R-f*I)*N;a[10]=(t*F-u*B+d*w)*N;a[11]=(p*B-n*F-r*w)*N;a[12]=(k*H-h*P-l*I)*
N;a[13]=(b*P-c*H+e*I)*N;a[14]=(u*A-t*G-v*w)*N;a[15]=(n*G-p*A+q*w)*N;return a},adjoint:function(a,d){var b=d[0],c=d[1],e=d[2],f=d[3],h=d[4],k=d[5],l=d[6],m=d[7],n=d[8],p=d[9],q=d[10],r=d[11],t=d[12],u=d[13],v=d[14];d=d[15];a[0]=k*(q*d-r*v)-p*(l*d-m*v)+u*(l*r-m*q);a[1]=-(c*(q*d-r*v)-p*(e*d-f*v)+u*(e*r-f*q));a[2]=c*(l*d-m*v)-k*(e*d-f*v)+u*(e*m-f*l);a[3]=-(c*(l*r-m*q)-k*(e*r-f*q)+p*(e*m-f*l));a[4]=-(h*(q*d-r*v)-n*(l*d-m*v)+t*(l*r-m*q));a[5]=b*(q*d-r*v)-n*(e*d-f*v)+t*(e*r-f*q);a[6]=-(b*(l*d-m*v)-h*(e*
d-f*v)+t*(e*m-f*l));a[7]=b*(l*r-m*q)-h*(e*r-f*q)+n*(e*m-f*l);a[8]=h*(p*d-r*u)-n*(k*d-m*u)+t*(k*r-m*p);a[9]=-(b*(p*d-r*u)-n*(c*d-f*u)+t*(c*r-f*p));a[10]=b*(k*d-m*u)-h*(c*d-f*u)+t*(c*m-f*k);a[11]=-(b*(k*r-m*p)-h*(c*r-f*p)+n*(c*m-f*k));a[12]=-(h*(p*v-q*u)-n*(k*v-l*u)+t*(k*q-l*p));a[13]=b*(p*v-q*u)-n*(c*v-e*u)+t*(c*q-e*p);a[14]=-(b*(k*v-l*u)-h*(c*v-e*u)+t*(c*l-e*k));a[15]=b*(k*q-l*p)-h*(c*q-e*p)+n*(c*l-e*k);return a},determinant:function(a){var b=a[0],c=a[1],e=a[2],f=a[3],h=a[4],l=a[5],k=a[6],m=a[7],
n=a[8],p=a[9],q=a[10],r=a[11],t=a[12],u=a[13],v=a[14];a=a[15];return(b*l-c*h)*(q*a-r*v)-(b*k-e*h)*(p*a-r*u)+(b*m-f*h)*(p*v-q*u)+(c*k-e*l)*(n*a-r*t)-(c*m-f*l)*(n*v-q*t)+(e*m-f*k)*(n*u-p*t)},multiply:function(a,d,c){var b=d[0],e=d[1],f=d[2],g=d[3],k=d[4],h=d[5],l=d[6],m=d[7],n=d[8],p=d[9],q=d[10],r=d[11],t=d[12],u=d[13],v=d[14];d=d[15];var w=c[0],A=c[1],B=c[2],F=c[3];a[0]=w*b+A*k+B*n+F*t;a[1]=w*e+A*h+B*p+F*u;a[2]=w*f+A*l+B*q+F*v;a[3]=w*g+A*m+B*r+F*d;w=c[4];A=c[5];B=c[6];F=c[7];a[4]=w*b+A*k+B*n+F*t;
a[5]=w*e+A*h+B*p+F*u;a[6]=w*f+A*l+B*q+F*v;a[7]=w*g+A*m+B*r+F*d;w=c[8];A=c[9];B=c[10];F=c[11];a[8]=w*b+A*k+B*n+F*t;a[9]=w*e+A*h+B*p+F*u;a[10]=w*f+A*l+B*q+F*v;a[11]=w*g+A*m+B*r+F*d;w=c[12];A=c[13];B=c[14];F=c[15];a[12]=w*b+A*k+B*n+F*t;a[13]=w*e+A*h+B*p+F*u;a[14]=w*f+A*l+B*q+F*v;a[15]=w*g+A*m+B*r+F*d;return a}};w.mul=w.multiply;w.translate=function(a,d,c){var b=c[0],e=c[1];c=c[2];if(d===a)a[12]=d[0]*b+d[4]*e+d[8]*c+d[12],a[13]=d[1]*b+d[5]*e+d[9]*c+d[13],a[14]=d[2]*b+d[6]*e+d[10]*c+d[14],a[15]=d[3]*b+
d[7]*e+d[11]*c+d[15];else{var f=d[0];var g=d[1];var k=d[2];var h=d[3];var l=d[4];var m=d[5];var n=d[6];var p=d[7];var q=d[8];var r=d[9];var t=d[10];var u=d[11];a[0]=f;a[1]=g;a[2]=k;a[3]=h;a[4]=l;a[5]=m;a[6]=n;a[7]=p;a[8]=q;a[9]=r;a[10]=t;a[11]=u;a[12]=f*b+l*e+q*c+d[12];a[13]=g*b+m*e+r*c+d[13];a[14]=k*b+n*e+t*c+d[14];a[15]=h*b+p*e+u*c+d[15]}return a};w.scale=function(a,d,c){var b=c[0],e=c[1];c=c[2];a[0]=d[0]*b;a[1]=d[1]*b;a[2]=d[2]*b;a[3]=d[3]*b;a[4]=d[4]*e;a[5]=d[5]*e;a[6]=d[6]*e;a[7]=d[7]*e;a[8]=
d[8]*c;a[9]=d[9]*c;a[10]=d[10]*c;a[11]=d[11]*c;a[12]=d[12];a[13]=d[13];a[14]=d[14];a[15]=d[15];return a};w.rotate=function(a,d,e,f){var b=f[0],g=f[1];f=f[2];var h=Math.sqrt(b*b+g*g+f*f);if(Math.abs(h)<c)return null;h=1/h;b*=h;g*=h;f*=h;var k=Math.sin(e);var l=Math.cos(e);var m=1-l;e=d[0];h=d[1];var n=d[2];var p=d[3];var q=d[4];var r=d[5];var E=d[6];var t=d[7];var u=d[8];var v=d[9];var w=d[10];var A=d[11];var B=b*b*m+l;var F=g*b*m+f*k;var J=f*b*m-g*k;var I=b*g*m-f*k;var H=g*g*m+l;var L=f*g*m+b*k;var P=
b*f*m+g*k;b=g*f*m-b*k;g=f*f*m+l;a[0]=e*B+q*F+u*J;a[1]=h*B+r*F+v*J;a[2]=n*B+E*F+w*J;a[3]=p*B+t*F+A*J;a[4]=e*I+q*H+u*L;a[5]=h*I+r*H+v*L;a[6]=n*I+E*H+w*L;a[7]=p*I+t*H+A*L;a[8]=e*P+q*b+u*g;a[9]=h*P+r*b+v*g;a[10]=n*P+E*b+w*g;a[11]=p*P+t*b+A*g;d!==a&&(a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);return a};w.rotateX=function(a,d,c){var b=Math.sin(c);c=Math.cos(c);var e=d[4],f=d[5],g=d[6],k=d[7],h=d[8],l=d[9],m=d[10],n=d[11];d!==a&&(a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[12]=d[12],a[13]=d[13],a[14]=
d[14],a[15]=d[15]);a[4]=e*c+h*b;a[5]=f*c+l*b;a[6]=g*c+m*b;a[7]=k*c+n*b;a[8]=h*c-e*b;a[9]=l*c-f*b;a[10]=m*c-g*b;a[11]=n*c-k*b;return a};w.rotateY=function(a,d,c){var b=Math.sin(c);c=Math.cos(c);var e=d[0],f=d[1],g=d[2],k=d[3],h=d[8],l=d[9],m=d[10],n=d[11];d!==a&&(a[4]=d[4],a[5]=d[5],a[6]=d[6],a[7]=d[7],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=e*c-h*b;a[1]=f*c-l*b;a[2]=g*c-m*b;a[3]=k*c-n*b;a[8]=e*b+h*c;a[9]=f*b+l*c;a[10]=g*b+m*c;a[11]=k*b+n*c;return a};w.rotateZ=function(a,d,c){var b=Math.sin(c);
c=Math.cos(c);var e=d[0],f=d[1],g=d[2],k=d[3],h=d[4],l=d[5],m=d[6],n=d[7];d!==a&&(a[8]=d[8],a[9]=d[9],a[10]=d[10],a[11]=d[11],a[12]=d[12],a[13]=d[13],a[14]=d[14],a[15]=d[15]);a[0]=e*c+h*b;a[1]=f*c+l*b;a[2]=g*c+m*b;a[3]=k*c+n*b;a[4]=h*c-e*b;a[5]=l*c-f*b;a[6]=m*c-g*b;a[7]=n*c-k*b;return a};w.fromRotationTranslation=function(a,d,c){var b=d[0],e=d[1],f=d[2],g=d[3],k=b+b,h=e+e,l=f+f;d=b*k;var m=b*h;b*=l;var n=e*h;e*=l;f*=l;k*=g;h*=g;g*=l;a[0]=1-(n+f);a[1]=m+g;a[2]=b-h;a[3]=0;a[4]=m-g;a[5]=1-(d+f);a[6]=
e+k;a[7]=0;a[8]=b+h;a[9]=e-k;a[10]=1-(d+n);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};w.fromQuat=function(a,d){var b=d[0],c=d[1],e=d[2];d=d[3];var f=b+b,h=c+c,k=e+e;b*=f;var l=c*f;c*=h;var m=e*f,n=e*h;e*=k;f*=d;h*=d;d*=k;a[0]=1-c-e;a[1]=l+d;a[2]=m-h;a[3]=0;a[4]=l-d;a[5]=1-b-e;a[6]=n+f;a[7]=0;a[8]=m+h;a[9]=n-f;a[10]=1-b-c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};w.frustum=function(a,c,e,f,h,l,m){var b=1/(e-c),d=1/(h-f),g=1/(l-m);a[0]=2*l*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
2*l*d;a[6]=0;a[7]=0;a[8]=(e+c)*b;a[9]=(h+f)*d;a[10]=(m+l)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=m*l*2*g;a[15]=0;return a};w.perspective=function(a,c,e,f,h){c=1/Math.tan(c/2);var b=1/(f-h);a[0]=c/e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+f)*b;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*f*b;a[15]=0;return a};w.ortho=function(a,c,e,f,h,l,m){var b=1/(c-e),d=1/(f-h),g=1/(l-m);a[0]=-2*b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*g;a[11]=0;a[12]=(c+e)*b;a[13]=
(h+f)*d;a[14]=(m+l)*g;a[15]=1;return a};w.lookAt=function(a,d,e,f){var b=d[0],g=d[1];d=d[2];var h=f[0];var k=f[1];var l=f[2];var m=e[0];f=e[1];var n=e[2];if(Math.abs(b-m)<c&&Math.abs(g-f)<c&&Math.abs(d-n)<c)return w.identity(a);e=b-m;f=g-f;m=d-n;var p=1/Math.sqrt(e*e+f*f+m*m);e*=p;f*=p;m*=p;n=k*m-l*f;l=l*e-h*m;h=h*f-k*e;(p=Math.sqrt(n*n+l*l+h*h))?(p=1/p,n*=p,l*=p,h*=p):h=l=n=0;k=f*h-m*l;var q=m*n-e*h;var r=e*l-f*n;(p=Math.sqrt(k*k+q*q+r*r))?(p=1/p,k*=p,q*=p,r*=p):r=q=k=0;a[0]=n;a[1]=k;a[2]=e;a[3]=
0;a[4]=l;a[5]=q;a[6]=f;a[7]=0;a[8]=h;a[9]=r;a[10]=m;a[11]=0;a[12]=-(n*b+l*g+h*d);a[13]=-(k*b+q*g+r*d);a[14]=-(e*b+f*g+m*d);a[15]=1;return a};w.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};w.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[6],
2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof a&&(a.mat4=w);var f={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};f.rotationTo=function(){var a=q.create(),c=q.fromValues(1,0,0),e=q.fromValues(0,1,0);return function(b,d,g){var h=q.dot(d,g);if(-.999999>h)return q.cross(a,c,d),1E-6>q.length(a)&&q.cross(a,e,d),q.normalize(a,a),f.setAxisAngle(b,
a,Math.PI),b;if(.999999<h)return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b;q.cross(a,d,g);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=1+h;return f.normalize(b,b)}}();f.setAxes=function(){var a=t.create();return function(b,c,e,h){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=h[0];a[4]=h[1];a[7]=h[2];a[2]=-c[0];a[5]=-c[1];a[8]=-c[2];return f.normalize(b,f.fromMat3(b,a))}}();f.clone=r.clone;f.fromValues=r.fromValues;f.copy=r.copy;f.set=r.set;f.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};f.setAxisAngle=function(a,c,e){e*=
.5;var b=Math.sin(e);a[0]=b*c[0];a[1]=b*c[1];a[2]=b*c[2];a[3]=Math.cos(e);return a};f.add=r.add;f.multiply=function(a,c,e){var b=c[0],d=c[1],f=c[2];c=c[3];var g=e[0],h=e[1],l=e[2];e=e[3];a[0]=b*e+c*g+d*l-f*h;a[1]=d*e+c*h+f*g-b*l;a[2]=f*e+c*l+b*h-d*g;a[3]=c*e-b*g-d*h-f*l;return a};f.mul=f.multiply;f.scale=r.scale;f.rotateX=function(a,c,e){e*=.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e+c*g;a[1]=d*e+f*g;a[2]=f*e-d*g;a[3]=c*e-b*g;return a};f.rotateY=function(a,c,e){e*=
.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e-f*g;a[1]=d*e+c*g;a[2]=f*e+b*g;a[3]=c*e-d*g;return a};f.rotateZ=function(a,c,e){e*=.5;var b=c[0],d=c[1],f=c[2];c=c[3];var g=Math.sin(e);e=Math.cos(e);a[0]=b*e+d*g;a[1]=d*e-b*g;a[2]=f*e+c*g;a[3]=c*e-f*g;return a};f.calculateW=function(a,c){var b=c[0],d=c[1];c=c[2];a[0]=b;a[1]=d;a[2]=c;a[3]=-Math.sqrt(Math.abs(1-b*b-d*d-c*c));return a};f.dot=r.dot;f.lerp=r.lerp;f.slerp=function(a,c,e,f){var b=c[0],d=c[1],g=c[2];c=c[3];var h=
e[0],l=e[1],m=e[2];e=e[3];var n=b*h+d*l+g*m+c*e;0>n&&(n=-n,h=-h,l=-l,m=-m,e=-e);if(1E-6<1-n){var p=Math.acos(n);var q=Math.sin(p);n=Math.sin((1-f)*p)/q;f=Math.sin(f*p)/q}else n=1-f;a[0]=n*b+f*h;a[1]=n*d+f*l;a[2]=n*g+f*m;a[3]=n*c+f*e;return a};f.invert=function(a,c){var b=c[0],d=c[1],e=c[2];c=c[3];var f=b*b+d*d+e*e+c*c;f=f?1/f:0;a[0]=-b*f;a[1]=-d*f;a[2]=-e*f;a[3]=c*f;return a};f.conjugate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};f.length=r.length;f.len=f.length;f.squaredLength=
r.squaredLength;f.sqrLen=f.squaredLength;f.normalize=r.normalize;f.fromMat3=function(a,c){var b=c[0]+c[4]+c[8];if(0<b)b=Math.sqrt(b+1),a[3]=.5*b,b=.5/b,a[0]=(c[7]-c[5])*b,a[1]=(c[2]-c[6])*b,a[2]=(c[3]-c[1])*b;else{var d=0;c[4]>c[0]&&(d=1);c[8]>c[3*d+d]&&(d=2);var e=(d+1)%3,f=(d+2)%3;b=Math.sqrt(c[3*d+d]-c[3*e+e]-c[3*f+f]+1);a[d]=.5*b;b=.5/b;a[3]=(c[3*f+e]-c[3*e+f])*b;a[e]=(c[3*e+d]+c[3*d+e])*b;a[f]=(c[3*f+d]+c[3*d+f])*b}return a};f.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+
")"};"undefined"!==typeof a&&(a.quat=f)})(c)})(this)},{}],24:[function(a,c,m){(function(){var a=this,e=a._,h={},n=Array.prototype,u=Object.prototype,v=n.push,B=n.slice,A=n.concat,p=u.toString,q=u.hasOwnProperty,r=n.forEach,t=n.map,w=n.reduce,f=n.reduceRight,b=n.filter,d=n.every,g=n.some,E=n.indexOf,C=n.lastIndexOf;u=Array.isArray;var D=Object.keys,ba=Function.prototype.bind,k=function(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._wrapped=a};"undefined"!==typeof m?("undefined"!==
typeof c&&c.exports&&(m=c.exports=k),m._=k):a._=k;k.VERSION="1.4.4";var M=k.each=k.forEach=function(a,b,c){if(null!=a)if(r&&a.forEach===r)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,e=a.length;d<e&&b.call(c,a[d],d,a)!==h;d++);else for(d in a)if(k.has(a,d)&&b.call(c,a[d],d,a)===h)break};k.map=k.collect=function(a,b,c){var d=[];if(null==a)return d;if(t&&a.map===t)return a.map(b,c);M(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});return d};k.reduce=k.foldl=k.inject=function(a,b,c,d){var e=
2<arguments.length;null==a&&(a=[]);if(w&&a.reduce===w)return d&&(b=k.bind(b,d)),e?a.reduce(b,c):a.reduce(b);M(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};k.reduceRight=k.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(f&&a.reduceRight===f)return d&&(b=k.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var g=a.length;if(g!==+g){var h=k.keys(a);g=h.length}M(a,function(f,k,l){k=h?h[--g]:--g;
e?c=b.call(d,c,a[k],k,l):(c=a[k],e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};k.find=k.detect=function(a,b,c){var d;na(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0});return d};k.filter=k.select=function(a,c,d){var e=[];if(null==a)return e;if(b&&a.filter===b)return a.filter(c,d);M(a,function(a,b,f){c.call(d,a,b,f)&&(e[e.length]=a)});return e};k.reject=function(a,b,c){return k.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)};k.every=k.all=function(a,
b,c){b||(b=k.identity);var e=!0;if(null==a)return e;if(d&&a.every===d)return a.every(b,c);M(a,function(a,d,f){if(!(e=e&&b.call(c,a,d,f)))return h});return!!e};var na=k.some=k.any=function(a,b,c){b||(b=k.identity);var d=!1;if(null==a)return d;if(g&&a.some===g)return a.some(b,c);M(a,function(a,e,f){if(d||(d=b.call(c,a,e,f)))return h});return!!d};k.contains=k.include=function(a,b){return null==a?!1:E&&a.indexOf===E?-1!==a.indexOf(b):na(a,function(a){return a===b})};k.invoke=function(a,b){var c=B.call(arguments,
2),d=k.isFunction(b);return k.map(a,function(a){return(d?b:a[b]).apply(a,c)})};k.pluck=function(a,b){return k.map(a,function(a){return a[b]})};k.where=function(a,b,c){return k.isEmpty(b)?c?null:[]:k[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};k.findWhere=function(a,b){return k.where(a,b,!0)};k.max=function(a,b,c){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.max.apply(Math,a);if(!b&&k.isEmpty(a))return-Infinity;var d={computed:-Infinity,value:-Infinity};
M(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};k.min=function(a,b,c){if(!b&&k.isArray(a)&&a[0]===+a[0]&&65535>a.length)return Math.min.apply(Math,a);if(!b&&k.isEmpty(a))return Infinity;var d={computed:Infinity,value:Infinity};M(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};k.shuffle=function(a){var b,c=0,d=[];M(a,function(a){b=k.random(c++);d[c-1]=d[b];d[b]=a});return d};var ca=function(a){return k.isFunction(a)?
a:function(b){return b[a]}};k.sortBy=function(a,b,c){var d=ca(b);return k.pluck(k.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var ia=function(a,b,c,d){var e={},f=ca(b||k.identity);M(a,function(b,g){g=f.call(c,b,g,a);d(e,g,b)});return e};k.groupBy=function(a,b,c){return ia(a,b,c,function(a,b,c){(k.has(a,b)?a[b]:a[b]=
[]).push(c)})};k.countBy=function(a,b,c){return ia(a,b,c,function(a,b){k.has(a,b)||(a[b]=0);a[b]++})};k.sortedIndex=function(a,b,c,d){c=null==c?k.identity:ca(c);b=c.call(d,b);for(var e=0,f=a.length;e<f;){var g=e+f>>>1;c.call(d,a[g])<b?e=g+1:f=g}return e};k.toArray=function(a){return a?k.isArray(a)?B.call(a):a.length===+a.length?k.map(a,k.identity):k.values(a):[]};k.size=function(a){return null==a?0:a.length===+a.length?a.length:k.keys(a).length};k.first=k.head=k.take=function(a,b,c){if(null!=a)return null==
b||c?a[0]:B.call(a,0,b)};k.initial=function(a,b,c){return B.call(a,0,a.length-(null==b||c?1:b))};k.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:B.call(a,Math.max(a.length-b,0))};k.rest=k.tail=k.drop=function(a,b,c){return B.call(a,null==b||c?1:b)};k.compact=function(a){return k.filter(a,k.identity)};var da=function(a,b,c){M(a,function(a){k.isArray(a)?b?v.apply(c,a):da(a,b,c):c.push(a)});return c};k.flatten=function(a,b){return da(a,b,[])};k.without=function(a){return k.difference(a,
B.call(arguments,1))};k.uniq=k.unique=function(a,b,c,d){k.isFunction(b)&&(d=c,c=b,b=!1);c=c?k.map(a,c,d):a;var e=[],f=[];M(c,function(c,d){(b?d&&f[f.length-1]===c:k.contains(f,c))||(f.push(c),e.push(a[d]))});return e};k.union=function(){return k.uniq(A.apply(n,arguments))};k.intersection=function(a){var b=B.call(arguments,1);return k.filter(k.uniq(a),function(a){return k.every(b,function(b){return 0<=k.indexOf(b,a)})})};k.difference=function(a){var b=A.apply(n,B.call(arguments,1));return k.filter(a,
function(a){return!k.contains(b,a)})};k.zip=function(){for(var a=B.call(arguments),b=k.max(k.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=k.pluck(a,""+d);return c};k.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};k.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c)if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else return d=k.sortedIndex(a,b),a[d]===b?d:-1;if(E&&a.indexOf===E)return a.indexOf(b,c);for(;d<
e;d++)if(a[d]===b)return d;return-1};k.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(C&&a.lastIndexOf===C)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=d?c:a.length;c--;)if(a[c]===b)return c;return-1};k.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};k.bind=function(a,b){if(a.bind===ba&&ba)return ba.apply(a,B.call(arguments,1));var c=B.call(arguments,2);return function(){return a.apply(b,
c.concat(B.call(arguments)))}};k.partial=function(a){var b=B.call(arguments,1);return function(){return a.apply(this,b.concat(B.call(arguments)))}};k.bindAll=function(a){var b=B.call(arguments,1);0===b.length&&(b=k.functions(a));M(b,function(b){a[b]=k.bind(a[b],a)});return a};k.memoize=function(a,b){var c={};b||(b=k.identity);return function(){var d=b.apply(this,arguments);return k.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};k.delay=function(a,b){var c=B.call(arguments,2);return setTimeout(function(){return a.apply(null,
c)},b)};k.defer=function(a){return k.delay.apply(k,[a,1].concat(B.call(arguments,1)))};k.throttle=function(a,b){var c,d,e,f,g=0,h=function(){g=new Date;e=null;f=a.apply(c,d)};return function(){var k=new Date,l=b-(k-g);c=this;d=arguments;0>=l?(clearTimeout(e),e=null,g=k,f=a.apply(c,d)):e||(e=setTimeout(h,l));return f}};k.debounce=function(a,b,c){var d,e;return function(){var f=this,g=arguments,h=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||(e=a.apply(f,g))},b);h&&(e=a.apply(f,g));return e}};
k.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};k.wrap=function(a,b){return function(){var c=[a];v.apply(c,arguments);return b.apply(this,c)}};k.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};k.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};k.keys=D||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],c;for(c in a)k.has(a,c)&&(b[b.length]=c);return b};k.values=function(a){var b=[],c;for(c in a)k.has(a,c)&&b.push(a[c]);return b};k.pairs=function(a){var b=[],c;for(c in a)k.has(a,c)&&b.push([c,a[c]]);return b};k.invert=function(a){var b={},c;for(c in a)k.has(a,c)&&(b[a[c]]=c);return b};k.functions=k.methods=function(a){var b=[],c;for(c in a)k.isFunction(a[c])&&b.push(c);return b.sort()};k.extend=function(a){M(B.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};k.pick=
function(a){var b={},c=A.apply(n,B.call(arguments,1));M(c,function(c){c in a&&(b[c]=a[c])});return b};k.omit=function(a){var b={},c=A.apply(n,B.call(arguments,1)),d;for(d in a)k.contains(c,d)||(b[d]=a[d]);return b};k.defaults=function(a){M(B.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])});return a};k.clone=function(a){return k.isObject(a)?k.isArray(a)?a.slice():k.extend({},a):a};k.tap=function(a,b){b(a);return a};var V=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;
if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var e=p.call(a);if(e!=p.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==
a)return d[f]==b;c.push(a);d.push(b);f=0;var g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=V(a[f],b[f],c,d)););}else{e=a.constructor;var h=b.constructor;if(e!==h&&!(k.isFunction(e)&&e instanceof e&&k.isFunction(h)&&h instanceof h))return!1;for(var l in a)if(k.has(a,l)&&(f++,!(g=k.has(b,l)&&V(a[l],b[l],c,d))))break;if(g){for(l in b)if(k.has(b,l)&&!f--)break;g=!f}}c.pop();d.pop();return g};k.isEqual=function(a,b){return V(a,b,[],[])};k.isEmpty=function(a){if(null==a)return!0;
if(k.isArray(a)||k.isString(a))return 0===a.length;for(var b in a)if(k.has(a,b))return!1;return!0};k.isElement=function(a){return!(!a||1!==a.nodeType)};k.isArray=u||function(a){return"[object Array]"==p.call(a)};k.isObject=function(a){return a===Object(a)};M("Arguments Function String Number Date RegExp".split(" "),function(a){k["is"+a]=function(b){return p.call(b)=="[object "+a+"]"}});k.isArguments(arguments)||(k.isArguments=function(a){return!(!a||!k.has(a,"callee"))});"function"!==typeof/./&&(k.isFunction=
function(a){return"function"===typeof a});k.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!=+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==p.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return q.call(a,b)};k.noConflict=function(){a._=e;return this};k.identity=function(a){return a};k.times=function(a,b,c){for(var d=Array(a),e=0;e<a;e++)d[e]=b.call(c,
e);return d};k.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var W={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};W.unescape=k.invert(W.escape);var ja={escape:new RegExp("["+k.keys(W.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(W.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(a){k[a]=function(b){return null==b?"":(""+b).replace(ja[a],function(b){return W[a][b]})}});k.result=function(a,b){if(null==
a)return null;b=a[b];return k.isFunction(b)?b.call(a):b};k.mixin=function(a){M(k.functions(a),function(b){var c=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];v.apply(a,arguments);return G.call(this,c.apply(k,a))}})};var Z=0;k.uniqueId=function(a){var b=++Z+"";return a?a+b:b};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ea=/(.)^/,ka={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;
k.template=function(a,b,c){c=k.defaults({},c,k.templateSettings);var d=new RegExp([(c.escape||ea).source,(c.interpolate||ea).source,(c.evaluate||ea).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){f+=a.slice(e,h).replace(O,function(a){return"\\"+ka[a]});c&&(f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");d&&(f+="'+\n((__t=("+d+"))==null?'':__t)+\n'");g&&(f+="';\n"+g+"\n__p+='");e=h+b.length;return b});f+="';\n";c.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
f+"return __p;\n";try{var g=new Function(c.variable||"obj","_",f)}catch(K){throw K.source=f,K;}if(b)return g(b,k);b=function(a){return g.call(this,a,k)};b.source="function("+(c.variable||"obj")+"){\n"+f+"}";return b};k.chain=function(a){return k(a).chain()};var G=function(a){return this._chain?k(a).chain():a};k.mixin(k);M("pop push reverse shift sort splice unshift".split(" "),function(a){var b=n[a];k.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);"shift"!=a&&"splice"!=a||0!==c.length||
delete c[0];return G.call(this,c)}});M(["concat","join","slice"],function(a){var b=n[a];k.prototype[a]=function(){return G.call(this,b.apply(this._wrapped,arguments))}});k.extend(k.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this)},{}],25:[function(a,c,m){"undefined"!==typeof window&&"function"!==typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||
window.msRequestAnimationFrame||function(a){setTimeout(a,1E3/60)});Leap=a("../lib/index")},{"../lib/index":11}]},{},[25]);
}).call(this);//# sourceMappingURL=CindyLeap.js.map

